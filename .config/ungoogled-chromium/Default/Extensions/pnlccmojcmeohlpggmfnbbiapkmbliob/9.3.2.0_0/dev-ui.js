// Copyright (C) 1999-2022 Siber Systems Inc. All Rights Reserved.
(window.rf_vlu7ce9uien=window.rf_vlu7ce9uien||[]).push([[2],{278:function(e,t,n){"use strict";n.r(t);var o=n(17),i=n(11),a=n(9),l=n(14),s=n(75),c=n(2),m=n(1),d=n(8),r=n(3),_=n(12),p=n(0);n(13),n.p;var u=n(78),f=n(103),h=n(52),b=n(100);Object(c.l)(async function(e,t,n){const u=e,f=function(e,t,n){var u,f,h;const b=e,v=t;let g,w=[],y=null,j=null,x=null,C="layout",L=null,O=null,k=null,E="9.3.2.0",S=null!==(u=null===navigator||void 0===navigator?void 0:navigator.platform)&&void 0!==u?u:"",$=null!==(f=null===navigator||void 0===navigator?void 0:navigator.userAgent)&&void 0!==f?f:"",B="",N=null!==(h=null===navigator||void 0===navigator?void 0:navigator.language)&&void 0!==h?h:"";const z={Init:function(){w=[],y=null,j=null,x=null,C="layout",L=null;ee(".header .text-json-view .set-mode").addEventListener("change",U);ee(".header .layout-view .set-mode").addEventListener("change",q);ee(".header .list-view .set-mode").addEventListener("change",F);ee(".header .details-view .set-mode").addEventListener("change",M),window.addEventListener("resize",(function(){O&&O()}),!0);ee(".history-container .current-page").addEventListener("click",R);ee("#load-report").addEventListener("click",()=>{z.onDisconnectFromUpdateEvents&&z.onDisconnectFromUpdateEvents(),Object(c.k)((async()=>{try{await async function(){var e,t,o,i,c,d;const r=await Object(l.h)([".json",".zip"]);if(!r)return;let _,p;if(document.title=`RoboForm Dev-UI - View: ${r.name}, ${new Date(r.lastModified).toLocaleString()}`,"application/x-zip-compressed"===r.type){const e=await n.OpenZip(r);for(const t of e)if("rf-diagnostic-info.json"===t.m_file_name?_=await Object(a.j)(t.m_bytes):"active-tab-screenshot.htm"===t.m_file_name&&(p=await Object(a.j)(t.m_bytes)),void 0!==_&&void 0!==p)break;if(!_)throw Object(m.e)(m.r,"File rf-diagnostic-info.json not found in ZIP")}else _=await Object(s.a)(r);if(g=null,p){const e=new DOMParser,t=e.parseFromString(p,"text/xml").querySelector("img");t&&(g=t.getAttribute("src"))}const u=JSON.parse(_),f=u.m_diagnostic_info;let h,b=null;if(null===(e=null==f?void 0:f.m_web_page_data)||void 0===e?void 0:e.m_fields){const e=u.m_web_page_field_index;if(void 0!==e){const t=f.m_web_page_data.m_fields[e];t&&(b=t.m_pos)}}if(function(){const e=ee(".history-container"),t=ee(e,"tbody");Object(l.g)(t),w=[]}(),null==f?void 0:f.m_history)for(const n of f.m_history)n.m_forms&&((h||(h={}))[n.m_info.m_id]=n.m_forms);k=b,E=null!==(t=u.m_extension_version)&&void 0!==t?t:"",S=null!==(o=u.m_os)&&void 0!==o?o:"",$=null!==(i=u.m_browser)&&void 0!==i?i:"",B=null!==(c=u.m_browser_version)&&void 0!==c?c:"",N=null!==(d=u.m_browser_language)&&void 0!==d?d:"",T({m_app_window:null==f?void 0:f.m_app_window,m_web_page_data:null==f?void 0:f.m_web_page_data,m_analyzed_forms:null==f?void 0:f.m_analyzed_forms,m_history:(null==f?void 0:f.m_history)&&f.m_history.map(e=>e.m_info),m_history_forms:h})}()}catch(e){alert("Cannot load report file: "+Object(m.a)(e))}})(),"#load-report:click")});ee("#save-report").addEventListener("click",()=>{const e=y;if(e){let t;e.m_web_page_data&&(t=Object(o.d)(e.m_web_page_data));const n=Object(_.c)()-3e5,i=[];for(const e of w){const t=e.m_record;if(t.m_time<=n)break;if(t.m_web_page_data){const n=Object(o.d)(t.m_web_page_data);i.push({m_info:Object.assign(Object.assign({},t),{m_web_page_data:n}),m_forms:e.m_forms})}else i.push({m_info:t})}const a={m_diagnostic_info:{m_web_page_url:(null==t?void 0:t.m_url)||"",m_web_page_domain:(null==t?void 0:t.m_domain)||"",m_app_window:e.m_app_window,m_web_page_data:t,m_analyzed_forms:e.m_analyzed_forms,m_history:i},m_extension_version:E,m_os:S,m_browser:$,m_browser_version:B,m_browser_language:N},l=new Blob([Object(r.u)(a)],{type:"application/json"}),s=URL.createObjectURL(l),c=document.createElement("a");c.href=s,c.download="rf-diagnostic-info.json",c.click(),setTimeout((function(){window.URL.revokeObjectURL(s)}),0)}});ee("#copy-webpagedata").addEventListener("click",()=>{Object(c.k)((async()=>{var e;try{const t=null!==(e=null==y?void 0:y.m_web_page_data)&&void 0!==e?e:null;Object(i.b)(Object(r.u)(t))}catch(t){alert("Cannot load report file: "+Object(m.a)(t))}})(),"#copy-webpagedata:click")});ee("#close-history").addEventListener("click",()=>{ee(".history-container").classList.add("hidden")}),G(y),H(null),P(D()),Z(y)},SetViewMode:I,Update:T,onDisconnectFromUpdateEvents:null};return z;function I(e){C=e}function T(e){y=e,G(e),e.m_history&&0!==e.m_history.length&&function(e,t){const n=ee(".history-container"),o=V(),i=ee(n,"template.item-row"),a=ee(n,"tbody");for(let l=e.length-1;l>=0;l--){const n=e[l],s=n.m_web_page_data,m=document.importNode(i.content,!0),d=ee(m,".item"),r=ee(m,".item-row");n.m_time&&(ee(m,".time").textContent=new Date(n.m_time).toLocaleTimeString("en",{hour12:!1}));let _="";n.m_event&&(_=n.m_event.toUpperCase()),n.m_submit_reason&&(_+=" ["+n.m_submit_reason+"]"),n.m_transition_type&&(_+=" ("+n.m_transition_type+")"),ee(m,".event").textContent=_;let p="";n.m_id&&(p="id="+n.m_id,r.id="history-"+n.m_id),n.m_tab_id&&(p+=" tab="+n.m_tab_id),n.m_frame_id&&(p+=" frame="+n.m_frame_id),p&&(ee(m,".details").textContent=p,ee(m,".details").title=p);const u=n.m_url||(null==s?void 0:s.m_url);switch(u&&(Object(c.l)((async()=>{var e;ee(m,".url-icon").src=null!==(e=await v.GetWebSiteIconUrl(u,null))&&void 0!==e?e:""})()),ee(m,".url").href=u,ee(m,".url").textContent=u,ee(m,".url").title=u),n.m_event){case"navigation":d.addEventListener("click",(function(){const e=V();n.m_tab_id!==e&&Object(c.k)((async()=>{await W(n.m_tab_id,!1)&&H(null)})(),"_UpdatedHistoryRecordSelection")}),!1);break;default:r.classList.add("selectable"),d.addEventListener("click",(function(){Object(c.k)((async()=>{await W(n.m_tab_id,!1),A(n.m_id)})(),"_SelectHistoryRecord")}),!1)}o===n.m_tab_id&&r.classList.add("hilited"),a.insertBefore(m,a.firstElementChild),w.unshift({m_record:n,m_view:a.firstElementChild,m_forms:t&&t[n.m_id]||void 0})}}(e.m_history,e.m_history_forms),P(D()),null===j&&Z(y)}function R(){H(null),P(D()),Z(y)}function U(e){I("text-json"),Z(x)}function q(e){I("layout"),Z(x)}function F(e){I("list"),Z(x)}function M(e){I("details"),Z(x)}function A(e){let t,n;if(e)for(const o of w){const i=o.m_record;i.m_id===e&&(t=i,n=o.m_forms)}t?(H(t),P(t.m_tab_id),Z({m_web_page_data:t.m_web_page_data,m_analyzed_forms:n,m_app_window:y&&y.m_app_window||void 0})):(H(null),P(D()),Z(y))}function D(){return y&&y.m_web_page_data&&y.m_web_page_data.m_tab_id}function V(){return x&&x.m_web_page_data&&x.m_web_page_data.m_tab_id}function P(e){if(w)for(const t of w){const n=t.m_view;if(!n)continue;const o=n;t.m_record.m_tab_id===e?o.classList.add("hilited"):o.classList.remove("hilited")}}async function W(e,t){return b.CallBackgroundScript("ActivateTab",null,null,e,{focus:t})}function H(e){const t=e&&e.m_id;if(j&&j===t)return;const n=ee(".history-container"),o=ee(n,".selected");o&&o.classList.remove("selected"),j=t;const i=ee(".history-container .current-page");let a;if(t&&(a=ee(n,"#history-"+t)),a||(a=i,j=null),a&&a.classList.add("selected"),j){const t=D();e&&e.m_tab_id===t?i.classList.add("hilited"):i.classList.remove("hilited")}else i.classList.add("hilited")}function G(e){const t=e&&e.m_web_page_data,n=ee(".history-container .current-page");let o="";const i=t&&t.m_tab_id;if(i){o+=" tab="+i;const e=t&&t.m_opener_tab_id;e&&(o+=" ("+e+")")}ee(n,".details").textContent=o,ee(n,".details").title=o;const a=(null==t?void 0:t.m_url)||"";a?Object(c.l)((async()=>{var e;ee(n,".url-icon").src=null!==(e=await v.GetWebSiteIconUrl(a,null))&&void 0!==e?e:""})()):ee(n,".url-icon").src="",ee(n,".url").href=a,ee(n,".url").textContent=a,ee(n,".url").title=a}function Z(e){var t,n,o;const a=x&&x.m_web_page_data,s=x&&x.m_app_window,c=e&&e.m_web_page_data,m=e&&e.m_app_window,_=a&&a.m_tab_id,u=s&&s.id,f=c&&c.m_tab_id,h=m&&m.id,b=_&&f&&_===f&&u===h;x=e||{},x.m_web_page_data||(x.m_web_page_data={});const v={},w=[],y={},j={},z=Object(p.q)(x.m_web_page_data),I=x.m_analyzed_forms,T=I&&I.m_forms||[];for(let i=0;i<T.length;++i){const e=T[i],t=e.m_type||"---",n=`${t}[${e.m_instance_index}]`;let o=0;void 0===j[n]?j[n]=0:o=++j[n];let a="";void 0!==e.m_mandatory_fields_percent&&e.m_mandatory_fields_percent<100&&(a+=` ${e.m_mandatory_fields_percent}%`);const l=`#${i} ${n} Part[${o}] ${a}`;(y[t]||(y[t]=[])).push(l);const s=e.m_fields;for(const i in s){const e=s[i].m_web_page_field_indices;for(let n=0;n<e.length;++n){const o=e[n],a=Object(p.q)(z.m_fields)[o];if(a){const o=`${a.m_frame_id}-${a.m_id}`;v[o]||(v[o]={m_field_key:o,m_fields:[],m_form_names:[],m_form_types:[]});const s=e.length>1?`${i}(part ${n})`:i;v[o].m_fields.push(s),v[o].m_form_names.push(l),v[o].m_form_types.push(t)}}}}for(const i in y){const e=y[i];for(const t of e)w.push(t)}const R=L!==C;let U,q;switch(L=C,O=null,ee(".header .url").textContent=z.m_url||"",ee(".header .url").href=z.m_url||"",ee(".header .title").textContent=z.m_title||"",ee(".header .icon-image").src=z.m_icon||"",C){case"layout":U="layout-view";break;case"list":U="list-view";break;case"details":U="details-view";break;default:case"text-json":U="text-json-view"}const F=ee("template."+U),M=document.importNode(F.content,!0),A=(z.m_fields||[]).slice();let D=-1;if(z.m_action_element){const e=z.m_action_element;if(e.m_data){D=A.length;const t={m_id:e.m_id,m_index:A.length,m_pos:e.m_data.m_pos,m_frame_id:Object(p.q)(e.m_frame_id),m_type:e.m_data.m_type,m_visible:!0};A.push(t)}else for(let t=0;t<A.length;t++){const n=A[t];if(n.m_id===e.m_id&&n.m_frame_id===e.m_frame_id){D=t;break}}}switch(C){case"list":{const e=ee(M,"tbody");if(0===A.length){const t=ee(M,"template.empty"),n=document.importNode(t.content,!0);e.appendChild(n)}else{const t=ee(M,"template.item");for(let n=0;n<A.length;n++){const o=A[n],i=o.m_id,a=o.m_frame_id,l=`${a||0}-${i||0}`,s=document.importNode(t.content,!0),c=ee(s,".item");c.classList.remove("visible","not-in-view-port","overlapped","selected","focused"),o.m_visible?o.m_html&&o.m_html.m_overlapped&&c.classList.add("overlapped"):c.classList.add("not-in-view-port"),o.m_html&&o.m_html.m_selected&&c.classList.add("selected"),o.m_html&&o.m_html.m_focused&&c.classList.add("focused");let m=ee(s,".field-type");m.textContent=o.m_type,m=ee(s,".field-id"),i?(m.textContent=Object(p.B)(i),n===D&&(m.textContent+=" (SUBMIT)")):n===D&&(m.textContent="SUBMIT"),m=ee(s,".field-index"),m.textContent=Object(p.B)(o.m_index),m=ee(s,".field-visibility"),o.m_visible?o.m_html&&o.m_html.m_overlapped?m.textContent="Overlapped":m.textContent="In viewport":m.textContent="Not in viewport",o.m_html&&o.m_html.m_selected&&(m.textContent&&(m.textContent+=" "),m.textContent+=" Selected"),o.m_html&&o.m_html.m_focused&&(m.textContent&&(m.textContent+=" "),m.textContent+=" Focused"),m=ee(s,".field-frame"),a&&(m.textContent="FrameID="+a);const d="&ensp;";m=ee(s,".field-analyzer-info");let r='<b>"Field"'+d+"Form:</b>";const _=v[l];if(_)for(let e=0;e<_.m_fields.length;++e)r+="<br>",r+='"'+_.m_fields[e]+'"',r+=d,r+=_.m_form_types[e];m.innerHTML=r;ee(s,".left-top-info").textContent=o.m_pos?`${o.m_pos[0]},${o.m_pos[1]}`:"";ee(s,".right-bottom-info").textContent=o.m_pos?`${o.m_pos[2]},${o.m_pos[3]}`:"";ee(s,".caption-left").textContent=o.m_captions&&o.m_captions.left&&o.m_captions.left.m_text||null;ee(s,".caption-top").textContent=o.m_captions&&o.m_captions.top&&o.m_captions.top.m_text||null;ee(s,".caption-right").textContent=o.m_captions&&o.m_captions.right&&o.m_captions.right.m_text||null;ee(s,".caption-bottom").textContent=o.m_captions&&o.m_captions.bottom&&o.m_captions.bottom.m_text||null;const u=ee(s,".input-container");u.classList.remove("changed","unchanged","simulated"),u.classList.add(o.m_changed||n===D?"changed":"unchanged"),o.m_simulated_change&&u.classList.add("simulated");const f=J(n,o);u.appendChild(f);const h=ee(s,".html-info table"),b=o.m_html;if(X(h,"Caption",b&&b.m_caption),b&&b.m_labels)for(let e=0;e<b.m_labels.length;e++){const t=b.m_labels[e];X(h,t.m_aria_label?"[aria-label]":"Label",t.m_text)}X(h,"tag",b&&b.m_tag),X(h,"[type]",b&&b.m_type),"select"===o.m_type&&X(h,"multiselect",o.m_multiselect?"true":void 0),X(h,"[disabled]",b&&b.m_disabled?"true":void 0),X(h,"[read_only]",b&&b.m_read_only?"true":void 0),X(h,"[id]",b&&b.m_id),X(h,"[name]",b&&b.m_name),X(h,"[maxlength]",Object(p.B)(b&&b.m_maxlength)),X(h,"[autocomplete]",b&&b.m_autocomplete),X(h,"[placeholder]",b&&b.m_placeholder),X(h,"[title]",b&&b.m_title),void 0!==o.m_default_value?X(h,"[default]",o.m_default_value):void 0!==o.m_default_checked&&X(h,"[default]",o.m_default_value?"checked":"unchecked"),e.appendChild(s)}}Object(p.q)(M.firstElementChild).classList.add("view"),q=ee(".view"),Object(p.q)(q.parentNode).replaceChild(M,q),q=ee(".view");const t=ee(q,".item.focused .input-container>*:first-child");t&&(t.focus(),t.scrollIntoView());break}case"layout":{let e,a;if(b){const t=ee(".content .view .data-view");t&&(e=t.scrollLeft,a=t.scrollTop)}const s=ee(M,".data-view"),c=ee(M,".document-area"),m=ee(M,".visible-area"),r=ee(M,".overview-map .visible-area"),_=ee(M,".layout-view .side-bar"),u=ee(M,".controls");let f=z&&z.m_width||0,h=z&&z.m_height||0;const y=z&&z.m_client_width,j=z&&z.m_client_height;void 0!==y&&y<f&&(f=y),void 0!==j&&j<h&&(h=j);const x=z&&z.m_scroll_x||0,C=z&&z.m_scroll_y||0,L=z.m_scroll_width||x+f,E=z.m_scroll_height||C+h;if(Object(l.k)(c,L,E),Object(l.j)(m,x,C,f,h),k){const e=ee(M,"template.bug"),t=ee(document.importNode(e.content,!0),".bug");Object(l.i)(t,k[2],k[1]),m.appendChild(t)}let S=null,$=0,B=0,N=0,I=0;const T={};if(z&&"html"===z.m_type){if(0===A.length){const e=ee(M,"template.empty"),t=document.importNode(e.content,!0);m.appendChild(t),u.classList.add("hidden")}else{const e=[[".controls .filters .captions","captions-hidden"],[".controls .filters .labels","labels-hidden"],[".controls .filters .search-rects","search-rects-hidden"]];for(let t=0;t<e.length;t++){const n=e[t],o=ee(u,n[0]);o.addEventListener("change",function(e,t){return()=>{e.checked?s.classList.remove(t):s.classList.add(t)}}(o,n[1]),!1)}const a=ee(u,".controls .filters .screenshot");void 0===g?null===(t=a.parentElement)||void 0===t||t.classList.add("hidden"):null===g?(null===(n=a.parentElement)||void 0===n||n.classList.remove("hidden"),a.disabled=!0,a.title="No screenshot in report"):(null===(o=a.parentElement)||void 0===o||o.classList.remove("hidden"),a.disabled=!1,a.title="Show/Hide screenshot from report",a.addEventListener("change",()=>{a.checked&&g?(m.style.backgroundImage=`url(${g})`,r.style.backgroundImage=`url(${g})`):(m.style.backgroundImage="none",r.style.backgroundImage="none")},!1));const c=ee(u,"#autofill_forms");for(let t=0;t<w.length;++t){const e=w[t],n=document.createElement("option");n.value=Q(e),n.innerHTML=e,c.appendChild(n)}c.addEventListener("change",(function(){const e=m.querySelectorAll(".content .layout-view .form-field-name");for(let t=0;t<e.length;t++)e[t].classList.remove("form-field-name"),e[t].classList.add("form-field-name-hidden");if(c.value){const e=m.querySelectorAll(".form-"+c.value);for(let t=0;t<e.length;t++)e[t].classList.remove("form-field-name-hidden"),e[t].classList.add("form-field-name")}}));const _=ee(M,"template.field"),f=ee(M,"template.caption"),h=ee(M,"template.search-rect"),b=ee(M,"template.adjacent-area"),y=[];for(const t of A){const e=t.m_id,n=`${t.m_frame_id||0}-${e||0}`,o=t.m_pos;if(o&&(S=Object(d.z)(S,o)),t.m_captions){const e={left:t.m_captions.left,top:t.m_captions.top,right:t.m_captions.right,bottom:t.m_captions.bottom};for(const t in e){const o=e[t];if(!o||!o.m_pos)continue;S=Object(d.z)(S,o.m_pos);const i={m_pos:o.m_pos,m_caption_for_fields:{},m_text:o.m_text};i.m_caption_for_fields&&(i.m_caption_for_fields[n]=t),y.push(i)}}if(t.m_html&&t.m_html.m_labels)for(const i of t.m_html.m_labels){if(!i||!i.m_pos)continue;S=Object(d.z)(S,i.m_pos);const e={m_pos:i.m_pos,m_label_for_fields:{},m_text:i.m_text};e.m_label_for_fields&&(e.m_label_for_fields[n]=t),y.push(e)}}let j,x;for(const t of A)t.m_html&&(x=t.m_html.m_z_index,void 0!==x&&(void 0===j||x<j)&&(j=x));for(const t of y)x=t.m_z_index,void 0!==x&&(void 0===j||x<j)&&(j=x);for(let t=0;t<A.length;t++){const e=A[t],n=e.m_id,o=`${e.m_frame_id||0}-${n||0}`,a=e.m_pos;if(a){const n=document.importNode(_.content,!0),s=ee(n,".input-container");s.classList.remove("not-in-view-port","overlapped","selected","focused","changed","unchanged","simulated"),e.m_visible?e.m_html&&e.m_html.m_overlapped&&s.classList.add("overlapped"):s.classList.add("not-in-view-port"),e.m_html&&e.m_html.m_selected&&s.classList.add("selected"),e.m_html&&e.m_html.m_focused&&s.classList.add("focused"),s.classList.add(e.m_changed||t===D?"changed":"unchanged"),e.m_simulated_change&&s.classList.add("simulated"),s.classList.add("field-"+o);const c=v[o];if(c){const e=c.m_form_names;for(let t=0;t<e.length;++t){const n=ee(M,"template.field_name"),l=ee(document.importNode(n.content,!0),".form-field-name-hidden");l.innerText=c.m_fields[t],l.classList.add("form-"+Q(e[t]));const s=(a[3]-a[1])/2;l.style.left=Object(i.a)(a[0]+s),l.style.top=Object(i.a)(a[1]+1),m.appendChild(l),l.classList.add("field-"+o),l.addEventListener("mouseenter",function(e){return function(){m.classList.add("dimmed");const t=m.querySelectorAll(".field-"+e);for(let e=0;e<t.length;e++)t[e].classList.add("field-hover")}}(o),!1),l.addEventListener("mouseleave",function(e){return function(){m.classList.remove("dimmed");const t=m.querySelectorAll(".field-"+e);for(let e=0;e<t.length;e++)t[e].classList.remove("field-hover")}}(o),!1)}}const d=J(t,e);d.classList.add("web-page-field-control"),s.appendChild(d),Object(l.j)(s,a[0],a[1],a[2]-a[0],a[3]-a[1]),e.m_html&&void 0!==e.m_html.m_z_index&&void 0!==j&&(s.style.zIndex=Object(p.B)(e.m_html.m_z_index-j)),s.addEventListener("mouseenter",function(e){return function(){m.classList.add("dimmed");const t=m.querySelectorAll(".field-"+e);for(let e=0;e<t.length;e++)t[e].classList.add("field-hover")}}(o),!1),s.addEventListener("mouseleave",function(e){return function(){m.classList.remove("dimmed");const t=m.querySelectorAll(".field-"+e);for(let e=0;e<t.length;e++)t[e].classList.remove("field-hover")}}(o),!1),m.appendChild(n);const r=e.m_captions&&e.m_captions.m_dbg;if(r){if(r.m_search_rects)for(let e=0;e<r.m_search_rects.length;e++)Y(r.m_search_rects[e],h,o,m);r.m_adjacent_area&&K(r.m_adjacent_area,b,o,m)}}}for(const t of y){const e=t.m_pos;if(e){const n=document.importNode(f.content,!0),o=ee(n,".caption-container");if(o.textContent=t.m_text,Object(l.j)(o,e[0],e[1],e[2]-e[0],e[3]-e[1]),o.style.fontSize=Object(i.a)(Math.min(Math.max(e[3]-e[1]-5,8),18)),t.m_caption_for_fields){o.classList.add("caption-for-field");for(const e in t.m_caption_for_fields)o.classList.add("field-"+e)}if(t.m_label_for_fields){o.classList.add("label-for-field");for(const e in t.m_label_for_fields)o.classList.add("field-"+e)}m.appendChild(n)}}}M.firstElementChild&&M.firstElementChild.classList.add("view"),q=ee(".view"),q.parentNode&&q.parentNode.replaceChild(M,q),q=ee(".view");const s=ee(q,".data-view"),f=ee(s,".input-container.focused>*:first-child");if(f&&f.focus(),R||void 0===e||void 0===a)if(f){const e=s.getBoundingClientRect(),t=f.getBoundingClientRect();Object(d.k)(e,t)||f.scrollIntoView(!1)}else s.scrollLeft=x,s.scrollTop=C;else s.scrollLeft=e,s.scrollTop=a;if(0===L||0===E)_.classList.add("hidden");else{S?($=S[0]+x<0&&-(S[0]+x)||0,B=S[2]+x>L&&S[2]+x-L||0,N=S[1]+C<0&&-(S[1]+C)||0,I=S[3]+C>E&&S[3]+C-E||0):($=0,B=0,N=0,I=0),c.style.marginLeft=Object(i.a)($),c.style.marginTop=Object(i.a)(N),c.style.marginRight=Object(i.a)(B),c.style.marginBottom=Object(i.a)(I);const e=ee(q,".overview-map .content .visible-area");for(let t=0;t<A.length;t++){const n=A[t],o=`${n.m_frame_id||0}-${n.m_id||0}`;if(n.m_pos){const t=document.createElement("div");t.classList.add("overview-map-element"),e.appendChild(t),T[o]={element:t,field:n}}}V(),s.addEventListener("scroll",(function(){V()}),!1),O=V;ee(q,".overview-map .container").addEventListener("mousedown",(function(e){const t=ee(q,".overview-map .content"),n=t.getBoundingClientRect(),o=window.getComputedStyle(t),a=n.left-Object(i.h)(o.marginLeft),c=n.top-Object(i.h)(o.marginTop),m=n.right+Object(i.h)(o.marginRight)-a,d=L+$+B,r=E+N+I,_=m*r/d,p=e.clientX-a,u=e.clientY-c,f=ee(q,".overview-map .content .viewport-frame"),h=f.getBoundingClientRect(),b=h.width,v=h.height;let g=p-b/2;g<0?g=0:g>m-b&&(g=m-b),g+=a-n.left;let w=u-v/2;w<0?w=0:w>_-v&&(w=_-v),w+=c-n.top,Object(l.i)(f,g,w),s.scrollLeft=g*d/m+$,s.scrollTop=w*r/_+N}),!1)}}else{const e=ee(M,"template.non-html"),t=document.importNode(e.content,!0);s.appendChild(t),c.classList.add("hidden"),_.classList.add("hidden"),u.classList.add("hidden"),Object(p.q)(M.firstElementChild).classList.add("view"),q=ee(".view"),Object(p.q)(q.parentNode).replaceChild(M,q)}function V(){const e=ee(q,".overview-map .container"),t=e.getBoundingClientRect(),n=window.getComputedStyle(e),o=t.left+Object(i.h)(n.paddingLeft),a=t.right-Object(i.h)(n.paddingRight),c=t.top+Object(i.h)(n.paddingTop),m=t.bottom-Object(i.h)(n.paddingBottom),d=ee(q,".overview-map .content"),r=L+$+B,_=E+N+I;let p=a-o,u=p*_/r;u>m-c&&(u=m-c,p=u*r/_);const b=L*p/r,v=E*u/_,g=$*p/r;d.style.marginLeft=Object(i.a)(g);const w=N*u/_;d.style.marginTop=Object(i.a)(w);const y=a-o-g-b;d.style.marginRight=Object(i.a)(y);const j=m-c-w-v;d.style.marginBottom=Object(i.a)(j),Object(l.k)(d,b,v);const O=ee(q,".overview-map .content .document-area");Object(l.k)(O,b,v);const k=x*p/r,S=C*u/_,z=f*p/r,R=h*u/_,U=ee(q,".overview-map .content .visible-area");Object(l.j)(U,k,S,z,R);const F=s.getBoundingClientRect(),M=(s.scrollLeft-$)*p/r,A=(s.scrollTop-N)*u/_,D=F.width*p/r,V=F.height*u/_,P=ee(q,".overview-map .content .viewport-frame");Object(l.j)(P,M,A,D,V);for(const i in T){const e=T[i],t=e.field.m_pos;t&&Object(l.j)(e.element,t[0]*p/r,t[1]*u/_,(t[2]-t[0])*p/r,(t[3]-t[1])*u/_)}}break}case"details":{const e=x.m_app_window;ee(M,".details .app-window-id").textContent=e&&e.id||"?",ee(M,".details .app-window-type").textContent=e&&e.type||"?",ee(M,".details .app-window-state").textContent=e&&e.state||"?",ee(M,".details .app-window-pos").textContent=[e&&e.left,e&&e.top,e&&e.width,e&&e.height].join(", ")}ee(M,".details .tab-id").textContent=z.m_tab_id||"",ee(M,".details .icon").textContent=z.m_icon||"",ee(M,".details .browser-window-pos").textContent=P(z.m_window_pos)||"?",ee(M,".details .browser-client-pos").textContent=P(z.m_content_pos)||"?",ee(M,".details .web-page-scroll-x").textContent=void 0===z.m_scroll_x?"?":Object(p.B)(Math.round(z.m_scroll_x)),ee(M,".details .web-page-scroll-y").textContent=void 0===z.m_scroll_y?"?":Object(p.B)(Math.round(z.m_scroll_y)),ee(M,".details .web-page-client-width").textContent=void 0===z.m_width?"?":Object(p.B)(z.m_width),ee(M,".details .web-page-client-height").textContent=void 0===z.m_height?"?":Object(p.B)(z.m_height),ee(M,".details .extension-version").textContent=E,ee(M,".details .os").textContent=S,ee(M,".details .browser").textContent=$,ee(M,".details .browser-version").textContent=B,ee(M,".details .browser-language").textContent=N,M.firstElementChild&&M.firstElementChild.classList.add("view"),q=ee(".view"),q.parentNode&&q.parentNode.replaceChild(M,q);break;default:case"text-json":ee(M,".text-json").textContent=Object(r.u)(x),M.firstElementChild&&M.firstElementChild.classList.add("view"),q=ee(".view"),q.parentNode&&q.parentNode.replaceChild(M,q)}function P(e){return e&&[e[0],e[1],e[2]-e[0],e[3]-e[1]].join(", ")}}function J(e,t){const n=t.m_html&&t.m_html.m_tag||"input",o=t.m_html&&t.m_html.m_type||t.m_type||"text",a=t.m_value||"",l=t.m_default_value||"",s=t.m_checked||!1,c=t.m_default_checked||!1;let m,d="";if(t.m_html&&t.m_html.m_labels)for(let i=0;i<t.m_html.m_labels.length;i++){const e=t.m_html.m_labels[i];if(e.m_aria_label&&e.m_text){d=e.m_text;break}}let r=!0;switch(n){case"input":{const e=document.createElement(n);switch(m=e,e.type="password"===o?"text":o,o){case"checkbox":e.checked=s,e.defaultChecked=c;break;case"radio":e.value=a,e.defaultValue=l,e.checked=s,e.defaultChecked=c;break;case"submit":case"button":case"reset":case"image":e.value=t.m_html&&t.m_html.m_caption||a||d||t.m_html&&t.m_html.m_title||"",r=!1;break;default:case"text":case"password":case"":case"hidden":case"file":case"color":case"number":case"email":case"name":case"username":case"textbox":case"nickname":case"tel":case"search":e.value=a,e.defaultValue=l,e.placeholder=t.m_html&&t.m_html.m_placeholder||t.m_caption||t.m_html&&t.m_html.m_caption||d}break}case"button":{const e=document.createElement("input");m=e,e.type="button",t.m_html&&t.m_html.m_type&&(e.type=t.m_html.m_type),e.value=t.m_caption||t.m_html&&t.m_html.m_caption||a||d,r=!1;break}case"textarea":{const e=document.createElement(n);m=e,e.value=a,e.defaultValue=l,e.placeholder=t.m_html&&t.m_html.m_placeholder||t.m_caption||t.m_html&&t.m_html.m_caption||d;break}case"select":{const e=document.createElement(n);let o;if(m=e,t.m_options)for(const n of t.m_options)o=document.createElement("option"),o.text=n.m_text||"",o.value=n.m_value||n.m_text||"",o.selected=n.m_selected||!1,o.defaultSelected=n.m_default||!1,e.appendChild(o);else o=document.createElement("option"),o.value=a,e.appendChild(o);void 0!==t.m_value&&(e.value=t.m_value),t.m_multiselect&&e.setAttribute("multiple","true");break}case"a":switch(t.m_type){case"button":{const e=document.createElement("input");m=e,e.type="button",e.value=t.m_caption||t.m_html&&t.m_html.m_caption||d||t.m_html&&t.m_html.m_title||"",r=!1;break}case"checkbox":{const e=document.createElement("input");m=e,e.type=t.m_type,e.checked=s;break}default:{const e=document.createElement("a");m=e,e.href="#",e.textContent=t.m_caption||t.m_html&&t.m_html.m_caption||d||t.m_html&&t.m_html.m_title||null;break}}break;default:switch(o){case"checkbox":{const e=document.createElement("input");m=e,e.type="checkbox",e.checked=s,e.defaultChecked=c;break}case"radio":{const e=document.createElement("input");m=e,e.type="radio",e.value=a,e.defaultValue=l,e.checked=s,e.defaultChecked=c;break}case"submit":case"button":case"reset":case"image":{const e=document.createElement("input");m=e,e.type="button",e.value=t.m_caption||t.m_html&&t.m_html.m_caption||a||d||t.m_html&&t.m_html.m_title||"",r=!1;break}case"text":case"password":case"":case"hidden":case"file":case"color":case"number":case"email":case"name":case"username":case"textbox":case"nickname":case"tel":case"search":{const e=document.createElement("input");m=e,e.type="password"===o?"text":o,e.value=a,e.defaultValue=l,e.placeholder=t.m_html&&t.m_html.m_placeholder||t.m_caption||t.m_html&&t.m_html.m_caption||d;break}default:{const e=document.createElement("div");m=e,e.textContent=t.m_caption||t.m_html&&t.m_html.m_caption||d||t.m_html&&t.m_html.m_title||null;break}}}return r&&t.m_pos&&(m.style.width=Object(i.a)(t.m_pos[2]-t.m_pos[0]),m.style.height=Object(i.a)(t.m_pos[3]-t.m_pos[1])),t.m_html&&t.m_html.m_font_size?m.style.fontSize=Object(p.B)(t.m_html.m_font_size)+"px":t.m_pos&&(m.style.fontSize=Object(i.a)(Math.min(Math.max(t.m_pos[3]-t.m_pos[1]-4,7),18))),m.title=`field #${e}: ${t.m_frame_id}-${t.m_id}`,m}function X(e,t,n){if(!n)return;const o=document.createElement("tr"),i=document.createElement("td");i.textContent=t,o.appendChild(i);const a=document.createElement("td");a.textContent="=",o.appendChild(a);const l=document.createElement("td");l.textContent=n,o.appendChild(l),e.appendChild(o)}function Y(e,t,n,o){const i=document.importNode(t.content,!0),a=ee(i,".search-rect");a.classList.add("field-"+n),Object(l.j)(a,e[0],e[1],e[2]-e[0],e[3]-e[1]),o.appendChild(i)}function K(e,t,n,o){const i=document.importNode(t.content,!0),a=ee(i,".adjacent-area");a.classList.add("field-"+n),Object(l.j)(a,e[0],e[1],e[2]-e[0],e[3]-e[1]),o.appendChild(i)}function Q(e){return e.replace(/[#<> ()[\]%]/g,"-")}function ee(e,t){if("string"==typeof e)return Object(p.q)(document.querySelector(e));if(t)return Object(p.q)(e.querySelector(t));throw Object(m.e)(m.r,"Bad parameters: missing selector string")}}(u,t,n);let h=null,b=null,v=!1;return await u.Init(),f.Init(),u.onNotificationFromBackgroundScript.Add(g),f.onDisconnectFromUpdateEvents=()=>{u.onNotificationFromBackgroundScript.Remove(g)},window.document.title="RoboForm Engine Dev Tool",void await w();function g(e,...t){switch(e){case"WebPageUpdated":case"WebPageAnalyzed":case"WebPageSubmitted":y(0)}}async function w(){if(v)y(100);else{v=!0;try{const e={historyId:h,getForms:!0},t=await u.CallBackgroundScript("GetBrowserWindowInfo",null,null,e);f.Update(t,null);const n=t.m_history&&t.m_history[0]&&t.m_history[0].m_id;n&&(h=n)}finally{v=!1}}}function y(e){j(),b=setTimeout((function(){j(),Object(c.k)(w(),"Update")}),e)}function j(){b&&(clearTimeout(b),b=null)}}(Object(u.a)(null),Object(f.a)(Object(h.a)()),Object(b.a)()))}},[[278,0,1]]]);