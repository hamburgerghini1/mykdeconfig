!function(e){function t(t){for(var r,i,s=t[0],u=t[1],c=t[2],d=0,f=[];d<s.length;d++)i=s[d],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&f.push(o[i][0]),o[i]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);for(l&&l(t);f.length;)f.shift()();return a.push.apply(a,c||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],r=!0,s=1;s<n.length;s++){var u=n[s];0!==o[u]&&(r=!1)}r&&(a.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},o={3:0},a=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var s=window.webpackJsonp=window.webpackJsonp||[],u=s.push.bind(s);s.push=t,s=s.slice();for(var c=0;c<s.length;c++)t(s[c]);var l=u;a.push([2591,0,1]),n()}({1006:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var r,o=n(118);!function(e){e.PENDING="PENDING",e.RESOLVED="RESOLVED",e.REJECTED="REJECTED"}(r||(r={}));var a=function(){function e(e){var t=this;this._state=r.PENDING,this._handlers=[],this._resolve=function(e){t._setResult(r.RESOLVED,e)},this._reject=function(e){t._setResult(r.REJECTED,e)},this._setResult=function(e,n){t._state===r.PENDING&&(Object(o.m)(n)?n.then(t._resolve,t._reject):(t._state=e,t._value=n,t._executeHandlers()))},this._attachHandler=function(e){t._handlers=t._handlers.concat(e),t._executeHandlers()},this._executeHandlers=function(){if(t._state!==r.PENDING){var e=t._handlers.slice();t._handlers=[],e.forEach((function(e){e.done||(t._state===r.RESOLVED&&e.onfulfilled&&e.onfulfilled(t._value),t._state===r.REJECTED&&e.onrejected&&e.onrejected(t._value),e.done=!0)}))}};try{e(this._resolve,this._reject)}catch(e){this._reject(e)}}return e.resolve=function(t){return new e((function(e){e(t)}))},e.reject=function(t){return new e((function(e,n){n(t)}))},e.all=function(t){return new e((function(n,r){if(Array.isArray(t))if(0!==t.length){var o=t.length,a=[];t.forEach((function(t,i){e.resolve(t).then((function(e){a[i]=e,0===(o-=1)&&n(a)})).then(null,r)}))}else n([]);else r(new TypeError("Promise.all requires an array as input."))}))},e.prototype.then=function(t,n){var r=this;return new e((function(e,o){r._attachHandler({done:!1,onfulfilled:function(n){if(t)try{return void e(t(n))}catch(e){return void o(e)}else e(n)},onrejected:function(t){if(n)try{return void e(n(t))}catch(e){return void o(e)}else o(t)}})}))},e.prototype.catch=function(e){return this.then((function(e){return e}),e)},e.prototype.finally=function(t){var n=this;return new e((function(e,r){var o,a;return n.then((function(e){a=!1,o=e,t&&t()}),(function(e){a=!0,o=e,t&&t()})).then((function(){a?r(o):e(o)}))}))},e.prototype.toString=function(){return"[object SyncPromise]"},e}()},1065:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FRAME_TRANPORT_IDS=t.FRAME_TRANSPORT_ACTIONS=t.MESSAGE_ACTIONS=t.SCRIPT_IDS=void 0;var r="CHECKOUT_EXTENSION_OBSEVATION",o={PAGE_TO_CONTENT_TRANSPORT:r+"_PAGE_TO_CONTENT_TRANSPORT"};t.FRAME_TRANPORT_IDS=o;var a={PAGE_TO_CONTENT_EVENT:r+"_PAGE_TO_CONTENT_EVENT"};t.FRAME_TRANSPORT_ACTIONS=a;var i={COLLECT_DATA:r+"_COLLECT_DATA",ENABLE_BG_SERVER:r+"_ENABLE_BG_SERVER",CONTENT_TO_BG_EVENT:r+"_PAGE_TO_CONTENT_EVENT"};t.MESSAGE_ACTIONS=i;t.SCRIPT_IDS={HONEY_ANALYTICS_CONFIG:"928a0802-4adc-4e55-9c29-45515240b713"}},1066:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ServerBase=t.ManagerBase=void 0;var o=n(2718);Object.defineProperty(t,"ManagerBase",{enumerable:!0,get:function(){return r(o).default}});var a=n(2719);Object.defineProperty(t,"ServerBase",{enumerable:!0,get:function(){return r(a).default}})},1067:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(23),a=(r=o)&&r.__esModule?r:{default:r},i=n(924);function s(e){var t=(0,a.default)(e);return t?0===t.length?null:1===t.length?t[0]:null:null}t.default={notFoundDoContinue:function(){return{shouldContinue:!0,data:null}},notFoundDontContinue:function(){return{shouldContinue:!1,data:null}},foundDontContinue:function(e){return{shouldContinue:!1,data:{tabId:e.tabId,target:e.target,origin:e.origin,cartPrice:e.cartPrice,status:i.DiscoveryStatus.Discovered,frame:0}}},getSingleClickableElement:function(e){var t=s(e);return t&&"function"==typeof t.click?t:null},getSingleElement:s,findElementByTag:function(e,t){try{var n=document.getElementsByTagName(e),r=!0,o=!1,a=void 0;try{for(var i,s=n[Symbol.iterator]();!(r=(i=s.next()).done);r=!0)for(var u=i.value,c=u.attributes.length,l=0;l<c;){var d=u.attributes[l];if(d&&d.nodeValue&&d.nodeValue.toLowerCase().includes(t))return u;l+=1}}catch(e){o=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw a}}return null}catch(e){return null}}}},1068:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=n(0),i=l(a),s=l(n(1)),u=n(1031),c=n(622);function l(e){return e&&e.__esModule?e:{default:e}}var d=function(e){var t=e.tipInstanceId,n=e.templateType,s=e.isSecondary,l=void 0!==s&&s,d=e.hideCaret,f=void 0!==d&&d,p=e.isTeaser,h=void 0!==p&&p,v=e.scrollToCard,g=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["tipInstanceId","templateType","isSecondary","hideCaret","isTeaser","scrollToCard"]),y=(0,c.useTip)(t),m=o(y,1)[0].template;if(!m)return i.default.createElement(a.Fragment,null);var b=(0,u.getTemplate)(m);if(!b)return i.default.createElement(a.Fragment,null);var _=b[n];if(!_)return i.default.createElement(a.Fragment,null);var w=r({tipInstanceId:t,isSecondary:l,hideCaret:f,scrollToCard:v,isTeaser:h,templateType:n},g);return"card"===n?i.default.createElement("div",null,i.default.createElement(_,w)):i.default.createElement(_,w)};d.propTypes={tipInstanceId:s.default.string.isRequired,templateType:s.default.string.isRequired},t.default=d},1069:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=t.FINISHED_EVENT="honeyTips:dependency:finished",o=t.CREATE_RELEVANCE_REQUEST="honeyTips:createRelevanceRequest",a=t.LOG_PREFIX="honeyTips:categories:dependencies:";t.default={FINISHED_EVENT:r,CREATE_RELEVANCE_REQUEST:o,LOG_PREFIX:a}},1070:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));function r(e){try{return e&&"function"==typeof e&&e.name||"<anonymous>"}catch(e){return"<anonymous>"}}},1071:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return l}));var r=n(11),o=n(118),a=n(636),i=n(1006),s=n(167),u=function(){function e(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._user={},this._tags={},this._extra={},this._contexts={}}return e.clone=function(t){var n=new e;return t&&(n._breadcrumbs=Object(r.e)(t._breadcrumbs),n._tags=Object(r.a)({},t._tags),n._extra=Object(r.a)({},t._extra),n._contexts=Object(r.a)({},t._contexts),n._user=t._user,n._level=t._level,n._span=t._span,n._session=t._session,n._transactionName=t._transactionName,n._fingerprint=t._fingerprint,n._eventProcessors=Object(r.e)(t._eventProcessors),n._requestSession=t._requestSession),n},e.prototype.addScopeListener=function(e){this._scopeListeners.push(e)},e.prototype.addEventProcessor=function(e){return this._eventProcessors.push(e),this},e.prototype.setUser=function(e){return this._user=e||{},this._session&&this._session.update({user:e}),this._notifyScopeListeners(),this},e.prototype.getUser=function(){return this._user},e.prototype.getRequestSession=function(){return this._requestSession},e.prototype.setRequestSession=function(e){return this._requestSession=e,this},e.prototype.setTags=function(e){return this._tags=Object(r.a)(Object(r.a)({},this._tags),e),this._notifyScopeListeners(),this},e.prototype.setTag=function(e,t){var n;return this._tags=Object(r.a)(Object(r.a)({},this._tags),((n={})[e]=t,n)),this._notifyScopeListeners(),this},e.prototype.setExtras=function(e){return this._extra=Object(r.a)(Object(r.a)({},this._extra),e),this._notifyScopeListeners(),this},e.prototype.setExtra=function(e,t){var n;return this._extra=Object(r.a)(Object(r.a)({},this._extra),((n={})[e]=t,n)),this._notifyScopeListeners(),this},e.prototype.setFingerprint=function(e){return this._fingerprint=e,this._notifyScopeListeners(),this},e.prototype.setLevel=function(e){return this._level=e,this._notifyScopeListeners(),this},e.prototype.setTransactionName=function(e){return this._transactionName=e,this._notifyScopeListeners(),this},e.prototype.setTransaction=function(e){return this.setTransactionName(e)},e.prototype.setContext=function(e,t){var n;return null===t?delete this._contexts[e]:this._contexts=Object(r.a)(Object(r.a)({},this._contexts),((n={})[e]=t,n)),this._notifyScopeListeners(),this},e.prototype.setSpan=function(e){return this._span=e,this._notifyScopeListeners(),this},e.prototype.getSpan=function(){return this._span},e.prototype.getTransaction=function(){var e,t,n,r,o=this.getSpan();return(null===(e=o)||void 0===e?void 0:e.transaction)?null===(t=o)||void 0===t?void 0:t.transaction:(null===(r=null===(n=o)||void 0===n?void 0:n.spanRecorder)||void 0===r?void 0:r.spans[0])?o.spanRecorder.spans[0]:void 0},e.prototype.setSession=function(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this},e.prototype.getSession=function(){return this._session},e.prototype.update=function(t){if(!t)return this;if("function"==typeof t){var n=t(this);return n instanceof e?n:this}return t instanceof e?(this._tags=Object(r.a)(Object(r.a)({},this._tags),t._tags),this._extra=Object(r.a)(Object(r.a)({},this._extra),t._extra),this._contexts=Object(r.a)(Object(r.a)({},this._contexts),t._contexts),t._user&&Object.keys(t._user).length&&(this._user=t._user),t._level&&(this._level=t._level),t._fingerprint&&(this._fingerprint=t._fingerprint),t._requestSession&&(this._requestSession=t._requestSession)):Object(o.h)(t)&&(t=t,this._tags=Object(r.a)(Object(r.a)({},this._tags),t.tags),this._extra=Object(r.a)(Object(r.a)({},this._extra),t.extra),this._contexts=Object(r.a)(Object(r.a)({},this._contexts),t.contexts),t.user&&(this._user=t.user),t.level&&(this._level=t.level),t.fingerprint&&(this._fingerprint=t.fingerprint),t.requestSession&&(this._requestSession=t.requestSession)),this},e.prototype.clear=function(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this},e.prototype.addBreadcrumb=function(e,t){var n="number"==typeof t?Math.min(t,100):100;if(n<=0)return this;var o=Object(r.a)({timestamp:Object(a.b)()},e);return this._breadcrumbs=Object(r.e)(this._breadcrumbs,[o]).slice(-n),this._notifyScopeListeners(),this},e.prototype.clearBreadcrumbs=function(){return this._breadcrumbs=[],this._notifyScopeListeners(),this},e.prototype.applyToEvent=function(e,t){var n;if(this._extra&&Object.keys(this._extra).length&&(e.extra=Object(r.a)(Object(r.a)({},this._extra),e.extra)),this._tags&&Object.keys(this._tags).length&&(e.tags=Object(r.a)(Object(r.a)({},this._tags),e.tags)),this._user&&Object.keys(this._user).length&&(e.user=Object(r.a)(Object(r.a)({},this._user),e.user)),this._contexts&&Object.keys(this._contexts).length&&(e.contexts=Object(r.a)(Object(r.a)({},this._contexts),e.contexts)),this._level&&(e.level=this._level),this._transactionName&&(e.transaction=this._transactionName),this._span){e.contexts=Object(r.a)({trace:this._span.getTraceContext()},e.contexts);var o=null===(n=this._span.transaction)||void 0===n?void 0:n.name;o&&(e.tags=Object(r.a)({transaction:o},e.tags))}return this._applyFingerprint(e),e.breadcrumbs=Object(r.e)(e.breadcrumbs||[],this._breadcrumbs),e.breadcrumbs=e.breadcrumbs.length>0?e.breadcrumbs:void 0,this._notifyEventProcessors(Object(r.e)(c(),this._eventProcessors),e,t)},e.prototype._notifyEventProcessors=function(e,t,n,a){var s=this;return void 0===a&&(a=0),new i.a((function(i,u){var c=e[a];if(null===t||"function"!=typeof c)i(t);else{var l=c(Object(r.a)({},t),n);Object(o.m)(l)?l.then((function(t){return s._notifyEventProcessors(e,t,n,a+1).then(i)})).then(null,u):s._notifyEventProcessors(e,l,n,a+1).then(i).then(null,u)}}))},e.prototype._notifyScopeListeners=function(){var e=this;this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach((function(t){t(e)})),this._notifyingListeners=!1)},e.prototype._applyFingerprint=function(e){e.fingerprint=e.fingerprint?Array.isArray(e.fingerprint)?e.fingerprint:[e.fingerprint]:[],this._fingerprint&&(e.fingerprint=e.fingerprint.concat(this._fingerprint)),e.fingerprint&&!e.fingerprint.length&&delete e.fingerprint},e}();function c(){var e=Object(s.e)();return e.__SENTRY__=e.__SENTRY__||{},e.__SENTRY__.globalEventProcessors=e.__SENTRY__.globalEventProcessors||[],e.__SENTRY__.globalEventProcessors}function l(e){c().push(e)}},1072:function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e.Explicit="explicitly_set",e.Sampler="client_sampler",e.Rate="client_rate",e.Inheritance="inheritance"}(r||(r={}))},11:function(e,t,n){"use strict";n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return a})),n.d(t,"d",(function(){return i})),n.d(t,"f",(function(){return s})),n.d(t,"c",(function(){return u})),n.d(t,"e",(function(){return c}));
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function o(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var a=function(){return(a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function i(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n}function s(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}function u(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(r=a.next()).done;)i.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=a.return)&&n.call(a)}finally{if(o)throw o.error}}return i}function c(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(u(arguments[t]));return e}},118:function(e,t,n){"use strict";function r(e){switch(Object.prototype.toString.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return v(e,Error)}}function o(e){return"[object ErrorEvent]"===Object.prototype.toString.call(e)}function a(e){return"[object DOMError]"===Object.prototype.toString.call(e)}function i(e){return"[object DOMException]"===Object.prototype.toString.call(e)}function s(e){return"[object String]"===Object.prototype.toString.call(e)}function u(e){return null===e||"object"!=typeof e&&"function"!=typeof e}function c(e){return"[object Object]"===Object.prototype.toString.call(e)}function l(e){return"undefined"!=typeof Event&&v(e,Event)}function d(e){return"undefined"!=typeof Element&&v(e,Element)}function f(e){return"[object RegExp]"===Object.prototype.toString.call(e)}function p(e){return Boolean(e&&e.then&&"function"==typeof e.then)}function h(e){return c(e)&&"nativeEvent"in e&&"preventDefault"in e&&"stopPropagation"in e}function v(e,t){try{return e instanceof t}catch(e){return!1}}n.d(t,"d",(function(){return r})),n.d(t,"e",(function(){return o})),n.d(t,"a",(function(){return a})),n.d(t,"b",(function(){return i})),n.d(t,"k",(function(){return s})),n.d(t,"i",(function(){return u})),n.d(t,"h",(function(){return c})),n.d(t,"f",(function(){return l})),n.d(t,"c",(function(){return d})),n.d(t,"j",(function(){return f})),n.d(t,"m",(function(){return p})),n.d(t,"l",(function(){return h})),n.d(t,"g",(function(){return v}))},165:function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e.Ok="ok",e.DeadlineExceeded="deadline_exceeded",e.Unauthenticated="unauthenticated",e.PermissionDenied="permission_denied",e.NotFound="not_found",e.ResourceExhausted="resource_exhausted",e.InvalidArgument="invalid_argument",e.Unimplemented="unimplemented",e.Unavailable="unavailable",e.InternalError="internal_error",e.UnknownError="unknown_error",e.Cancelled="cancelled",e.AlreadyExists="already_exists",e.FailedPrecondition="failed_precondition",e.Aborted="aborted",e.OutOfRange="out_of_range",e.DataLoss="data_loss"}(r||(r={})),function(e){e.fromHttpCode=function(t){if(t<400)return e.Ok;if(t>=400&&t<500)switch(t){case 401:return e.Unauthenticated;case 403:return e.PermissionDenied;case 404:return e.NotFound;case 409:return e.AlreadyExists;case 413:return e.FailedPrecondition;case 429:return e.ResourceExhausted;default:return e.InvalidArgument}if(t>=500&&t<600)switch(t){case 501:return e.Unimplemented;case 503:return e.Unavailable;case 504:return e.DeadlineExceeded;default:return e.InternalError}return e.UnknownError}}(r||(r={}))},167:function(e,t,n){"use strict";(function(e){n.d(t,"e",(function(){return a})),n.d(t,"j",(function(){return i})),n.d(t,"h",(function(){return s})),n.d(t,"d",(function(){return u})),n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return l})),n.d(t,"a",(function(){return d})),n.d(t,"f",(function(){return f})),n.d(t,"g",(function(){return p})),n.d(t,"i",(function(){return h}));var r=n(320),o=(n(607),{});function a(){return Object(r.b)()?e:"undefined"!=typeof window?window:"undefined"!=typeof self?self:o}function i(){var e=a(),t=e.crypto||e.msCrypto;if(void 0!==t&&t.getRandomValues){var n=new Uint16Array(8);t.getRandomValues(n),n[3]=4095&n[3]|16384,n[4]=16383&n[4]|32768;var r=function(e){for(var t=e.toString(16);t.length<4;)t="0"+t;return t};return r(n[0])+r(n[1])+r(n[2])+r(n[3])+r(n[4])+r(n[5])+r(n[6])+r(n[7])}return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}function s(e){if(!e)return{};var t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};var n=t[6]||"",r=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],relative:t[5]+n+r}}function u(e){if(e.message)return e.message;if(e.exception&&e.exception.values&&e.exception.values[0]){var t=e.exception.values[0];return t.type&&t.value?t.type+": "+t.value:t.type||t.value||e.event_id||"<unknown>"}return e.event_id||"<unknown>"}function c(e){var t=a();if(!("console"in t))return e();var n=t.console,r={};["debug","info","warn","error","log","assert"].forEach((function(e){e in t.console&&n[e].__sentry_original__&&(r[e]=n[e],n[e]=n[e].__sentry_original__)}));var o=e();return Object.keys(r).forEach((function(e){n[e]=r[e]})),o}function l(e,t,n){e.exception=e.exception||{},e.exception.values=e.exception.values||[],e.exception.values[0]=e.exception.values[0]||{},e.exception.values[0].value=e.exception.values[0].value||t||"",e.exception.values[0].type=e.exception.values[0].type||n||"Error"}function d(e,t){void 0===t&&(t={});try{e.exception.values[0].mechanism=e.exception.values[0].mechanism||{},Object.keys(t).forEach((function(n){e.exception.values[0].mechanism[n]=t[n]}))}catch(e){}}function f(){var e=a();try{return e.document.location.href}catch(e){return""}}function p(e,t){if(!t)return 6e4;var n=parseInt(""+t,10);if(!isNaN(n))return 1e3*n;var r=Date.parse(""+t);return isNaN(r)?6e4:r-e}function h(e){return e.split(/[\?#]/,1)[0]}}).call(this,n(53))},221:function(e,t,n){"use strict";(function(e){n.d(t,"c",(function(){return c})),n.d(t,"f",(function(){return l})),n.d(t,"e",(function(){return p})),n.d(t,"d",(function(){return g})),n.d(t,"b",(function(){return y})),n.d(t,"a",(function(){return m}));var r=n(11),o=n(2455),a=n(118),i=n(2568),s=n(1070),u=n(607);function c(e,t,n){if(t in e){var r=e[t],o=n(r);if("function"==typeof o)try{o.prototype=o.prototype||{},Object.defineProperties(o,{__sentry_original__:{enumerable:!1,value:r}})}catch(e){}e[t]=o}}function l(e){return Object.keys(e).map((function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])})).join("&")}function d(e){if(Object(a.d)(e)){var t=e,n={message:t.message,name:t.name,stack:t.stack};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}if(Object(a.f)(e)){var i=e,s={};s.type=i.type;try{s.target=Object(a.c)(i.target)?Object(o.a)(i.target):Object.prototype.toString.call(i.target)}catch(e){s.target="<unknown>"}try{s.currentTarget=Object(a.c)(i.currentTarget)?Object(o.a)(i.currentTarget):Object.prototype.toString.call(i.currentTarget)}catch(e){s.currentTarget="<unknown>"}for(var u in"undefined"!=typeof CustomEvent&&Object(a.g)(e,CustomEvent)&&(s.detail=i.detail),i)Object.prototype.hasOwnProperty.call(i,u)&&(s[u]=i[u]);return s}return e}function f(e){return function(e){return~-encodeURI(e).split(/%..|./).length}(JSON.stringify(e))}function p(e,t,n){void 0===t&&(t=3),void 0===n&&(n=102400);var r=g(e,t);return f(r)>n?p(e,t-1,n):r}function h(t,n){return"domain"===n&&t&&"object"==typeof t&&t._events?"[Domain]":"domainEmitter"===n?"[DomainEmitter]":void 0!==e&&t===e?"[Global]":"undefined"!=typeof window&&t===window?"[Window]":"undefined"!=typeof document&&t===document?"[Document]":Object(a.l)(t)?"[SyntheticEvent]":"number"==typeof t&&t!=t?"[NaN]":void 0===t?"[undefined]":"function"==typeof t?"[Function: "+Object(s.a)(t)+"]":"symbol"==typeof t?"["+String(t)+"]":"bigint"==typeof t?"[BigInt: "+String(t)+"]":t}function v(e,t,n,r){if(void 0===n&&(n=1/0),void 0===r&&(r=new i.a),0===n)return function(e){var t=Object.prototype.toString.call(e);if("string"==typeof e)return e;if("[object Object]"===t)return"[Object]";if("[object Array]"===t)return"[Array]";var n=h(e);return Object(a.i)(n)?n:t}(t);if(null!=t&&"function"==typeof t.toJSON)return t.toJSON();var o=h(t,e);if(Object(a.i)(o))return o;var s=d(t),u=Array.isArray(t)?[]:{};if(r.memoize(t))return"[Circular ~]";for(var c in s)Object.prototype.hasOwnProperty.call(s,c)&&(u[c]=v(c,s[c],n-1,r));return r.unmemoize(t),u}function g(e,t){try{return JSON.parse(JSON.stringify(e,(function(e,n){return v(e,n,t)})))}catch(e){return"**non-serializable**"}}function y(e,t){void 0===t&&(t=40);var n=Object.keys(d(e));if(n.sort(),!n.length)return"[object has no keys]";if(n[0].length>=t)return Object(u.d)(n[0],t);for(var r=n.length;r>0;r--){var o=n.slice(0,r).join(", ");if(!(o.length>t))return r===n.length?o:Object(u.d)(o,t)}return""}function m(e){var t,n;if(Object(a.h)(e)){var o=e,i={};try{for(var s=Object(r.f)(Object.keys(o)),u=s.next();!u.done;u=s.next()){var c=u.value;void 0!==o[c]&&(i[c]=m(o[c]))}}catch(e){t={error:e}}finally{try{u&&!u.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return i}return Array.isArray(e)?e.map(m):e}}).call(this,n(53))},2443:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(2707),t)},2444:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(2715),t),o(n(2716),t),o(n(2717),t)},2445:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o,a,i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s=(r=j(regeneratorRuntime.mark((function e(t){var n,r,o=t.type;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=G(),e.next=3,n.invoke(O.BackgroundAction.FrameIds);case 3:if(!(r=e.sent)||!r[o]||0!==r[o].length){e.next=6;break}return e.abrupt("return",[]);case 6:return e.abrupt("return",r[o]);case 7:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)}),u=(o=j(regeneratorRuntime.mark((function e(){var t,n,r,o,a,i,s,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=B()).debug("[CheckoutPaypal] Content script initialized"),n=G(),e.next=5,(0,T.getCheckoutSetting)(d.checkoutSettingKeys.iFrameOriginUrl);case 5:return r=e.sent,o=new URL(r),a=new m.HoneyCheckoutServer({transport:new x.FrameTransportServer({allowedOrigins:[o.origin]})}),i=new b.PayPalCheckoutClient({transport:new S.HoneyMessagingTransportClient({id:"Content <-> Paypal Relay"}),defaultTimeoutMilliseconds:C.default.messaging.clientTimeout,options:{log:t}}),s=new _.DiscoveryRelayServer({transport:new x.FrameTransportServer({allowedOrigins:[o.origin,C.default.allowedOrigin]})}),u=new y.ContentCoordinator({log:t,backgroundClient:n,honeyCheckoutServer:a,paypalCheckoutClient:i,discoveryRelayServer:s,paypalRealyScriptPath:"/checkoutPaypal/paypal/relay.js",honeyRealyScriptPath:"/checkoutPaypal/honey/relay.js"}),e.abrupt("return",u);case 14:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)}),c=(a=j(regeneratorRuntime.mark((function e(){var t,n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return arguments[1],regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],r.includes(d.CheckoutTypes.SPB)&&t.push(z()),(n=r.filter((function(e){return M.includes(e)}))).length&&t.push(V(n)),e.abrupt("return",Promise.race(t));case 5:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)});t.getBackgroundClient=G,t.paypalDiscovery=z;var l=I(n(6)),d=n(74),f=I(n(8)),p=I(n(12)),h=I(n(19)),v=I(n(2547)),g=n(2745),y=n(2747),m=n(2548),b=n(2750),_=n(1050),w=n(2751),O=n(1048),E=n(924),S=n(2549),x=n(2755),k=n(574),T=n(103),C=I(n(2756)),P=I(n(2757)),R=I(n(2758));function I(e){return e&&e.__esModule?e:{default:e}}function j(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,n){return function r(o,a){try{var i=t[o](a),s=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(s).then((function(e){r("next",e)}),(function(e){r("throw",e)}));e(s)}("next")}))}}var M=[d.CheckoutTypes.VCC,d.CheckoutTypes.CartPresentment,d.CheckoutTypes.StaticPaypalButton],A=new P.default;function L(e){var t=e.type,n=e.tabId,r=e.frameId,o=e.frameUrl,a=e.discoveryService,i=e.timeout,s=e.observable,u=!1;a.discoveryStatus({type:t,tabId:n,frameId:r})!==d.DiscoveryStatus.Pending&&a.discover({type:t,tabId:n,frameId:r,timeout:i}).then((function(e){var t=e.subscribe((function(e){var a=e.status,i=e.message,c=e.handle;if(a===d.DiscoveryStatus.Discovered){if(u)return;u=!0,t.dispose(),s&&s.next({tabId:n,frameId:r,frameUrl:o,origin:i,target:c,status:d.DiscoveryStatus.Discovered})}a===d.DiscoveryStatus.Error&&(f.default.warn("discovery service: discover: error: "+i+" tabId="+n+" frameId="+r),t.dispose())}))}))}function D(e){var t=e.timeout;f.default.info("discovery service: discover: paypal: start");var n=v.default.events.paypalCheckoutDetected(),r=W();return l.default.addListener(d.PAYPAL_IFRAME_DETECTED,(function(e,o){var a=o.tabId,i=o.frameId;f.default.debug("discovery service: discover: paypal: honeyMessages: returned frames from background",{frameId:i,tabId:a}),L({type:E.FrameIdKey.PayPal,tabId:a,frameId:i,discoveryService:r,timeout:t,observable:n})})),N().then((function(e){f.default.debug("discovery service: discover: paypal: returned frames from background",e),e.forEach((function(e){var o=e.frameId,a=e.tabId,i=e.origin;L({type:E.FrameIdKey.PayPal,tabId:a,frameId:o,discoveryService:r,timeout:t,observable:n,frameUrl:i})}))})),n}function N(){return s({type:E.FrameIdKey.PayPal})}function F(){return s({type:E.FrameIdKey.Honey})}["FIND_SAVINGS","FIND_SAVINGS_URL","PAYMENTS"].forEach((function(e){l.default.addListener("pageDetected:"+e,(function(){A.setReady(!0),A.isInitialized()&&A.start()}))}));var U=void 0;function B(){return U||(U=g.LoggingDriverExtension.createService({honeyLogger:f.default})),U}var H=void 0;function G(){var e,t,n;return H||(e=g.LoggingDriverExtension.createService({honeyLogger:f.default}),t=new w.BackgroundClient({transport:new S.HoneyMessagingTransportClient({id:"Content <-> Background"}),defaultTimeoutMilliseconds:C.default.messaging.backgroundTimeout,options:{log:e}}),n=S.HoneyMessagingTransportClient.makeTransportInterop({honeyMessages:l.default,options:{ignoreResponse:!1,background:!0}}),t.connect(n),H=t),H}var q=void 0;function W(){var e,t,n;return q||(e=B(),t=G(),n=new _.DiscoveryRelayServer({transport:new S.HoneyMessagingTransportServer({target:l.default})}),q=new E.DiscoveryService({log:e,backgroundClient:t,discoveryRelayServer:n,paypalRealyScriptPath:"/checkoutPaypal/paypal/relay.js",honeyRealyScriptPath:"/checkoutPaypal/honey/relay.js"})),q}function V(e){var t=this;f.default.info("discovery service: discover: paypal generic discovery: start");var n;return new Promise((n=j(regeneratorRuntime.mark((function n(r){var o,a,i,s,u,c,l,h,v;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.default.getCurrent();case 2:o=t.sent,a=e.map((function(e){return(0,R.default)(e)})),A.setResolve(r),A.setStore(o),a.map((function(e){return A.addHandler(e)})),i=void 0,s=!0,u=!1,c=void 0,t.prev=11,l=a[Symbol.iterator]();case 13:if(s=(h=l.next()).done){t.next=25;break}return v=h.value,t.next=17,v(o);case 17:if(i=t.sent,!(n=i)||!n.data||n.data.status!==d.DiscoveryStatus.Discovered){t.next=22;break}return f.default.info("discovery service: discovered via handler"),r(i.data),t.abrupt("return");case 22:s=!0,t.next=13;break;case 25:t.next=31;break;case 27:t.prev=27,t.t0=t.catch(11),u=!0,c=t.t0;case 31:t.prev=31,t.prev=32,!s&&l.return&&l.return();case 34:if(t.prev=34,!u){t.next=37;break}throw c;case 37:return t.finish(34);case 38:return t.finish(31);case 39:A.isReady()&&A.start();case 40:case"end":return t.stop()}var n}),n,t,[[11,27,31,39],[32,,34,38]])}))),function(e){return n.apply(this,arguments)}))}function z(){var e,t=this,n=!1;return new Promise((e=j(regeneratorRuntime.mark((function e(r){var o,a,s,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.default.getCurrent();case 2:o=e.sent,a=o.id,s=v.default.events.paypalCheckoutDetected(),u=s.subscribe(function(){var e=j(regeneratorRuntime.mark((function e(o){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=2;break}return e.abrupt("return");case 2:if(o){e.next=4;break}return e.abrupt("return");case 4:if(n=!0,u.dispose(),a===o.tabId){e.next=8;break}return e.abrupt("return");case 8:r(i({},o,{origin:d.CheckoutTypes.SPB}));case 9:case"end":return e.stop()}}),e,t)})));return function(t){return e.apply(this,arguments)}}());case 6:case"end":return e.stop()}}),e,t)}))),function(t){return e.apply(this,arguments)}))}t.default={start:function(){W().start(),D({timeout:C.default.discovery.paypalDiscoveryTimeout})},initialize:u,getBackgroundClient:G,getDiscoveryService:W,discoverFrame:L,getPayPalFrames:N,getHoneyFrames:F,startPayPalDiscovery:D,startHoneyDiscovery:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.timeout;if(!t)throw new Error("discovery service: discover: honey: timeout required");f.default.info("discovery service: discover: honey: start");var n=new k.Observable({value:void 0,replay:!1}),r=W();return F().then((function(e){f.default.debug("discovery service: discover: honey: returned frames from background",e),e.forEach((function(e){var o=e.frameId,a=e.tabId;L({type:E.FrameIdKey.Honey,tabId:a,frameId:o,discoveryService:r,timeout:t,observable:n})}))})),new Promise((function(e,r){var o=setTimeout((function(){r(new Error("discovery service: discover: honey: timeout error "+t+" ms"))}),t),a=n.subscribe((function(t){var n=t.tabId,i=t.frameId,s=t.message,u=t.status,c=t.origin,l=t.handle;if(u===d.DiscoveryStatus.Error)return clearTimeout(o),a.dispose(),void r(new Error(s));u===d.DiscoveryStatus.Discovered&&(clearTimeout(o),a.dispose(),e({tabId:n,frameId:i,message:s,status:u,origin:c,handle:l}))}))}))},startDiscovery:c}},2446:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.merchantSPBPostMessenger=t.merchantSPBMessageKeys=t.checkoutAppPostMessenger=t.checkoutAppMessageKeys=void 0;var r=n(926),o=n(103),a={checkoutCartContentsDetected:"checkout:cartContentsDetected",checkoutCartPriceChange:"checkout:cartPriceChange",checkoutInit:"checkout:init",checkoutOpenFromFS:"checkout:openFromFS",checkoutOpenFromPSB:"checkout:openFromPSB",checkoutRouteChange:"checkout:routeChange",checkoutUserUpdate:"checkout:userUpdate",checkoutFrameRequestComplete:"checkout:frameRequestComplete",extensionActivateStoreGold:"checkout:extensionActivateStoreGold",extensionAuthFetch:"checkout:extensionAuthFetch",extensionDeleteBgLocalStorageItem:"checkout:extensionDeleteBgLocalStorageItem",extensionDeleteLru:"checkout:extensionDeleteLru",extensionExperimentsGetVariant:"checkout:extensionExperimentsGetVariant",extensionExperimentsTrackImpression:"checkout:extensionExperimentsTrackImpression",extensionGetBgLocalStorageItem:"checkout:extensionGetBgLocalStorageItem",extensionGetContentUILocation:"checkout:extensionGetContentUILocation",extensionGetContentUIVisible:"checkout:extensionGetContentUIVisible",extensionGetCurrentPageTypes:"checkout:extensionGetCurrentPageTypes",extensionGetCurrentStore:"checkout:extensionGetCurrentStore",extensionGetFeatureFlags:"checkout:extensionGetFeatureFlags",extensionGetI18nMessage:"checkout:extensionGetI18nMessage",extensionGetI18nMessages:"checkout:extensionGetI18nMessages",extensionGetIsInExperimentPopulation:"checkout:extensionGetIsInExperimentPopulation",extensionGetLru:"checkout:extensionGetLru",extensionGetUserInfo:"checkout:extensionGetUserInfo",extensionGetUserOffers:"checkout:extensionGetUserOffers",extensionGQLMutation:"checkout:extensionGQLMutation",extensionGQLQuery:"checkout:extensionGQLQuery",extensionHideContentUI:"checkout:extensionHideContentUI",extensionInitPaypalCoordinator:"checkout:extensionInitPaypalCoordinator",extensionNativeFetch:"checkout:extensionNativeFetch",extensionOpenContentUILocation:"checkout:extensionOpenContentUILocation",extensionOpenLoginPrompt:"checkout:extensionOpenLoginPrompt",extensionPaypalCoordinatorReady:"checkout:extensionPaypalCoordinatorReady",extensionSetBgLocalStorageItem:"checkout:extensionSetBgLocalStorageItem",extensionSetLru:"checkout:extensionSetLru",extensionShowContentUI:"checkout:extensionShowContentUI",extensionGetAllFrameRequestsByTabId:"checkout:extensionGetAllFrameRequestsByTabId",extensionClearFrameRequestsForTab:"checkout:extensionClearFrameRequestsForTab",extensionGetParentTab:"checkout:extensionGetParentTab",extensionExecuteHoneySPBScript:"checkout:extensionExecuteHoneySPBScript",extensionConnectMerchantSPB:"checkout:extensionConnectMerchantSPB",extensionMerchantSPBRequest:"checkout:extensionMerchantSPBRequest",parentRemoveIFrame:"checkout:parentRemoveIFrame",parentRemoveIFrameAttribute:"checkout:parentRemoveIFrameAttribute",parentSendSDataEvent:"checkout:parentSendSDataEvent",parentSetIFrameAttribute:"checkout:parentSetIFrameAttribute",parentUpdateStyles:"checkout:parentUpdateStyles",parentOpenStaticPaypalButton:"checkout:parentOpenStaticPaypalButton"},i={merchantSPBGetSPBAttributes:"merchantSPB:merchantSPBGetSPBAttributes",merchantSPBGetWindowPath:"merchantSPB:merchantSPBGetWindowPath"},s=(0,o.keyToKeyMap)(a),u=(t.checkoutAppMessageKeys=(0,o.withDefinedPropCheck)(s),t.checkoutAppPostMessenger=new r.PostMessenger({types:a,enableLogging:!1,clientName:"extension-checkout"}),(0,o.keyToKeyMap)(i));t.merchantSPBMessageKeys=(0,o.withDefinedPropCheck)(u),t.merchantSPBPostMessenger=new r.PostMessenger({types:i,enableLogging:!1,clientName:"extension-merchant-spb",useEncryption:!1})},2447:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=i(r),a=i(n(1));function i(e){return e&&e.__esModule?e:{default:e}}var s=function(e){var t=e.container;return o.default.createElement(r.Fragment,null,o.default.createElement("div",{style:{position:"fixed",top:16,zIndex:"2147483647",right:16,display:"flex"}},t))};t.default=s,s.propTypes={container:a.default.node},s.defaultProps={container:void 0}},2448:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),a=l(o),i=l(n(1)),s=n(5),u=l(n(8)),c=n(18);function l(e){return e&&e.__esModule?e:{default:e}}var d=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={hasError:!1},n}var n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"componentDidCatch",value:(n=regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=this.props.sendSdataEvent,u.default.error(t),n(t);case 3:case"end":return e.stop()}}),e,this)})),i=function(){var e=n.apply(this,arguments);return new Promise((function(t,n){return function r(o,a){try{var i=e[o](a),s=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(s).then((function(e){r("next",e)}),(function(e){r("throw",e)}));t(s)}("next")}))},function(e){return i.apply(this,arguments)})},{key:"render",value:function(){var e=this.props.children;return this.state.hasError?a.default.createElement(o.Fragment,null):e}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0,error:e}}}]),t}(a.default.Component);d.propTypes={sendSdataEvent:i.default.func.isRequired,children:i.default.any},d.defaultProps={children:void 0};t.default=(0,s.connect)(null,(function(e){return{sendSdataEvent:function(t){return e((0,c.sdataTipCardErrorEvent)(t))}}}))(d)},2449:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=n(0),a=y(o),i=y(n(1)),s=n(2),u=y(n(3)),c=y(n(4)),l=y(n(71)),d=y(n(57)),f=y(n(101)),p=y(n(429)),h=y(n(59)),v=y(n(1053)),g=y(n(621));function y(e){return e&&e.__esModule?e:{default:e}}var m=v.default.BUTTON_STATUS,b=v.default.BUTTON_COPY_STATUS,_=v.default.getButtonChoices,w={classes:i.default.object.isRequired,isLaunchpad:i.default.bool},O=function(e){var t=e.classes,n=e.isLaunchpad,i=(0,g.default)(),u=i.thoughts,v=i.status,y=i.comments,w=i.firstName,O=i.email,E=i.recruitmentChecked,S=i.validationErrorDescriptions,x=i.handleSetComments,k=i.handleSetThoughts,T=i.toggleFeedbackRecruiting,C=i.handleSetFirstName,P=i.handleSetEmail,R=i.send,I=(0,o.useState)(!1),j=r(I,2),M=j[0],A=j[1],L=b[v]||c.default.getMessage("Send"),D=m[v]||"",N=(0,o.useRef)("thoughts"),F=(0,o.useRef)("email"),U=_(n).map((function(e,t){var n=e.value,r=e.copy;return a.default.createElement(s.RadioButton,{key:"".concat("radio-",n),value:n,copy:r,ref:t?void 0:N})})),B="failed"===v,H={marginBottom:B?"8px":"16px",textAlign:"center"};(0,o.useEffect)((function(){d.default.getFeatureFlag("tips_feedback_recruiting").then(A)}),[]),(0,o.useEffect)((function(){S.thoughts?N.current&&N.current.focus():S.email&&F.current&&F.current.focus()}),[S.thoughts,S.email]);var G=(l.default.getTipsConfigSync()||{}).feedback,q=(void 0===G?{}:G).feedbackCheckboxMessage,W=(0,o.useMemo)((function(){return M?a.default.createElement("div",{style:{marginTop:"14px"}},a.default.createElement(s.CheckBox,{id:"can_contact",checked:E,label:q||c.default.getMessage("I_want_to_help_improve_Tips_E_The_Honey_team_can_contact_me_for_more_feedback"),onCheck:T}),E&&a.default.createElement("div",{style:{marginTop:"14px"}},a.default.createElement(s.FormInput,{id:"first_name",label:c.default.getMessage("First_Name"),value:w,onChange:C}),B&&S.email&&a.default.createElement(f.default,{component:"div",variant:"body2",style:{color:s.Colors.red600,marginBottom:"8px"}},S.email),a.default.createElement(s.FormInput,{id:"email",label:c.default.getMessage("Email"),value:O,onChange:P,wrappedRef:F}))):null}),[O,w,M,B,E,q,T,C,P,S.email]);return a.default.createElement(p.default,null,a.default.createElement("div",{className:t.main},a.default.createElement(f.default,{component:"div",variant:"title1",style:H},n?c.default.getMessage("What_are_your_thoughts_Q"):c.default.getMessage("We_want_to_hear_from_you_Whats_up_Q")),B&&S.thoughts&&a.default.createElement(f.default,{component:"div",variant:"body2",style:{color:s.Colors.red600,marginBottom:"8px"}},S.thoughts),a.default.createElement(s.RadioGroup,{onChange:k,group:"formThoughts",selectedValue:u},U),W,a.default.createElement("div",{style:{marginTop:"14px"}},a.default.createElement(s.FormInput,{size:88,id:"commentsSuggestions",label:c.default.getMessage("Comments_or_suggestions"),value:y,onChange:x})),!n&&a.default.createElement(f.default,{component:"div",variant:"body2",style:{color:s.Colors.grey600,marginBottom:"18px"}},c.default.getMessageAndReplace("To_see_Tips_less_often_go_to_your_settings_GEARICON",{GEARICON:a.default.createElement(h.default,{icon:"setting-stroke-16",color:s.Colors.grey600,style:{display:"inline-flex",verticalAlign:"bottom"}})})),a.default.createElement(s.Button,{"aria-label":"Save Feedback",ariaLabel:"Save Feedback",id:"SaveFeedback",size:40,buttonType:"primary",copy:L,isFlexible:!0,status:D,onClick:function(){return R(n)}})))};O.propTypes=w,O.defaultProps={isLaunchpad:!1},t.default=(0,u.default)({main:{padding:"24px"}})(O)},2450:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=n(0),a=O(o),i=O(n(1)),s=n(3),u=n(5),c=n(2),l=O(n(618)),d=O(n(4)),f=O(n(14)),p=O(n(71)),h=n(15),v=n(381),g=n(856),y=O(n(2789)),m=n(1037),b=(n(322),n(16)),_=O(n(2558)),w=O(n(2790));function O(e){return e&&e.__esModule?e:{default:e}}var E=(0,s.createUseStyles)({settingButton:{alignItems:"center",background:"none",border:"none",borderRadius:"3px",cursor:"pointer",display:"flex",height:"32px",justifyContent:"center",transition:"0.2s",width:"32px","&:hover":{backgroundColor:c.Colors.black03},"&:active":{backgroundColor:c.Colors.black08}},closeButton:{height:"32px",marginRight:"-8px",position:"initial",width:"32px"}}),S=function(e){var t=e.onClick,n=e.showFeedback,i=e.onSettingsClick,s=(0,u.useDispatch)(),O=E(),S=(0,o.useState)(!1),x=r(S,2),k=x[0],T=x[1],C=(0,o.useState)(!1),P=r(C,2),R=P[0],I=P[1],j=(0,o.useState)("https://www.joinhoney.com/settings/feature-settings"),M=r(j,2),A=M[0],L=M[1],D=(0,o.useState)("https://dash.joinhoney.com/product-catalog/product?productId={PRODUCT_ID}"),N=r(D,2),F=N[0],U=N[1],B=(0,o.useState)(!1),H=r(B,2),G=H[0],q=H[1],W=(0,w.default)(),V=(0,_.default)(),z=V.id,Y=V.currentProduct;(0,o.useEffect)((function(){var e,t;(e=regeneratorRuntime.mark((function e(){var t,n,r,o,a,i,s,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.default.getTipsConfig();case 2:return t=e.sent,n=t.hasExtraSnoozeSettings,r=void 0!==n&&n,o=t.links,a=void 0===o?{}:o,e.next=9,f.default.getInfo();case 9:i=e.sent,s=i.isLoggedIn,u=void 0!==s&&s,r&&T(!0),I(u),L(a.featureSettings||A),U(a.debugProduct||F);case 16:case"end":return e.stop()}}),e,this)})),t=function(){var t=e.apply(this,arguments);return new Promise((function(e,n){return function r(o,a){try{var i=t[o](a),s=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(s).then((function(e){r("next",e)}),(function(e){r("throw",e)}));e(s)}("next")}))},function(){return t.apply(this,arguments)})()}),[A]);var K=[{copy:d.default.getMessage("Hide_on_this_page"),key:"snooze_page",onClick:function(){s((0,v.setBadgeSnooze)()),q(!1)}},{copy:d.default.getMessage("Snooze_for_24_hours"),key:"snooze_24",onClick:function(){s((0,m.setTeaserSnoozeOneDay)()),q(!1)}}],X=R?{copy:d.default.getMessage("Go_to_settings"),key:"go_to_settings",onClick:function(){s((0,g.setBadgeSnoozeAllLoggedIn)()),q(!1),window.open(A)}}:{copy:d.default.getMessage("Snooze_on_all_sites"),key:"snooze_all",onClick:function(){s((0,m.setTeaserSnoozeAll)()),q(!1)}};k&&K.push({copy:d.default.getMessage("Snooze_on_this_site"),key:"snooze_store",onClick:function(){s((0,m.setTeaserSnoozeOneStore)()),q(!1)}},X);(0,b.useCurrentStore)();var J=(0,b.useCurrentTipIds)()||[],Q=(0,u.useSelector)((0,h.selectCategoryIdsByTipInstanceIds)(J))||{};Object.values(Q);if(n&&"function"==typeof n){K.push({copy:d.default.getMessage("Leave_feedback_LOWER"),key:"leave_feedback",onClick:function(){n(),q(!1)}})}return W&&K.push({copy:d.default.getMessage("Debug_product"),key:"debug_product",onClick:function(){s((0,y.default)({containerId:z,productId:Y,debugProductLink:F}))},icon:a.default.createElement(c.Icon,{name:"bug",type:"stroke",color:c.Colors.grey800,style:{marginRight:"5px"}})}),a.default.createElement(o.Fragment,null,a.default.createElement(c.Button,{"aria-expanded":G,"aria-label":"Honey Settings",buttonType:"unstyled",className:O.settingButton,copy:a.default.createElement(c.Icon,{color:c.Colors.grey600,name:"setting",type:"stroke"}),onClick:function(){"function"==typeof i&&i(),q(!G),s((0,v.setBadgeClickSettings)())}}),G&&a.default.createElement(l.default,{classes:{main:{alignSelf:"end",whiteSpace:"nowrap",marginTop:"40px",right:"47px",width:"unset",position:"absolute",top:"0px"}},options:K}),a.default.createElement(c.CloseButton,{"aria-label":d.default.getMessage("Close_Honey"),className:O.closeButton,onClick:t}))};S.propTypes={onClick:i.default.func,showFeedback:i.default.func,onSettingsClick:i.default.func},S.defaultProps={onClick:null,showFeedback:null,onSettingsClick:function(){}},t.default=S},2451:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=n(0),a=f(o),i=f(n(1)),s=n(5),u=n(266),c=n(16),l=n(537),d=n(243);function f(e){return e&&e.__esModule?e:{default:e}}var p={tipInstanceId:i.default.string.isRequired,isFullyExpandedPdp:i.default.bool,children:i.default.oneOfType([i.default.arrayOf(i.default.node),i.default.node])},h={isFullyExpandedPdp:!1,children:a.default.createElement(o.Fragment,null)},v=function(e){var t=e.tipInstanceId,n=e.children,i=e.isFullyExpandedPdp,f=(0,s.useDispatch)(),p=(0,o.useCallback)(f,[]),h=(0,u.useInView)({threshold:.4}),v=h.ref,g=h.inView,y=(0,d.useContainerOpen)(),m=r(y,1)[0],b=(0,c.useTipInstanceExpanded)(t),_=r(b,1)[0],w=(0,o.useRef)(),O=(0,o.useRef)(),E=(0,o.useRef)(!0),S=(0,o.useRef)(null);(0,o.useEffect)((function(){return function(){E.current=!1,clearTimeout(S.current)}}),[]),(0,o.useEffect)((function(){!i&&_&&p((0,l.tipShown)(t))}),[_,i,t,p,m]);var x=function(){S.current&&(clearTimeout(S.current),S.current=null)};(0,o.useEffect)((function(){return function(){x()}}),[]);var k=function(){f((0,l.tipShown)(t))};(0,o.useEffect)((function(){g?S.current=setTimeout(k,1e3):O.current&&x(),O.current=g}),[g]);var T=i&&a.default.createElement("div",{ref:v},n)||null,C=a.default.createElement(o.Fragment,null," ",n," ");return a.default.createElement("div",{ref:w},i?T:C)};v.propTypes=p,v.defaultProps=h,t.default=v},2455:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(118);function o(e,t){try{for(var n=e,r=[],o=0,i=0,s=" > ".length,u=void 0;n&&o++<5&&!("html"===(u=a(n,t))||o>1&&i+r.length*s+u.length>=80);)r.push(u),i+=u.length,n=n.parentNode;return r.reverse().join(" > ")}catch(e){return"<unknown>"}}function a(e,t){var n,o,a,i,s,u,c,l=e,d=[];if(!l||!l.tagName)return"";d.push(l.tagName.toLowerCase());var f=(null===(n=t)||void 0===n?void 0:n.length)?t.filter((function(e){return l.getAttribute(e)})).map((function(e){return[e,l.getAttribute(e)]})):null;if(null===(o=f)||void 0===o?void 0:o.length)f.forEach((function(e){d.push("["+e[0]+'="'+e[1]+'"]')}));else if(l.id&&d.push("#"+l.id),(a=l.className)&&Object(r.k)(a))for(i=a.split(/\s+/),c=0;c<i.length;c++)d.push("."+i[c]);var p=["type","name","title","alt"];for(c=0;c<p.length;c++)s=p[c],(u=l.getAttribute(s))&&d.push("["+s+'="'+u+'"]');return d.join("")}},2456:function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"a",(function(){return i})),n.d(t,"d",(function(){return s})),n.d(t,"e",(function(){return u})),n.d(t,"c",(function(){return c}));var r=n(88),o=n(167);function a(){if(!("fetch"in Object(o.e)()))return!1;try{return new Headers,new Request(""),new Response,!0}catch(e){return!1}}function i(e){return e&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}function s(){if(!a())return!1;var e=Object(o.e)();if(i(e.fetch))return!0;var t=!1,n=e.document;if(n&&"function"==typeof n.createElement)try{var s=n.createElement("iframe");s.hidden=!0,n.head.appendChild(s),s.contentWindow&&s.contentWindow.fetch&&(t=i(s.contentWindow.fetch)),n.head.removeChild(s)}catch(e){r.a.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",e)}return t}function u(){if(!a())return!1;try{return new Request("_",{referrerPolicy:"origin"}),!0}catch(e){return!1}}function c(){var e=Object(o.e)(),t=e.chrome,n=t&&t.app&&t.app.runtime,r="history"in e&&!!e.history.pushState&&!!e.history.replaceState;return!n&&r}},2544:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o,a,i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},u=(r=b(regeneratorRuntime.mark((function e(t){var n,r,o,a,i,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.default.getInfo();case 2:if(n=e.sent,(r=n.id)&&t){e.next=6;break}return e.abrupt("return",!1);case 6:return e.prev=6,e.next=9,Promise.all([(0,y.isObservationFeatureEnabled)(),E(r,t)]);case 9:return o=e.sent,a=s(o,2),i=a[0],u=a[1],e.abrupt("return",i&&u&&u.length>0);case 16:return e.prev=16,e.t0=e.catch(6),e.abrupt("return",!1);case 19:case"end":return e.stop()}}),e,this,[[6,16]])}))),function(e){return r.apply(this,arguments)}),c=(o=b(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!S){e.next=2;break}return e.abrupt("return");case 2:if((0,y.isObservationFeatureEnabled)()){e.next=5;break}return e.abrupt("return");case 5:new v.CheckoutObservationContentManager({messages:f.default,executeScript:h.default,scriptPath:"pageScripts/checkoutObservation.js",allowedOrigins:[window.location.origin],store:_}).start(),f.default.send(g.MESSAGE_ACTIONS.ENABLE_BG_SERVER,{storeId:_.storeId},{background:!0}).catch((function(e){d.default.debug("[CheckoutObservation] Failed to start process: "+JSON.stringify(e))})),S=!0;case 9:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)}),l=(a=b(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,y.isObservationFeatureEnabled)();case 2:if(e.sent){e.next=5;break}return e.abrupt("return");case 5:f.default.addListener("stores:pageview",function(){var e=b(regeneratorRuntime.mark((function e(n){var r,o,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.id,o=a.sessionId,_={storeId:r,sessionId:o,pageTitle:w(),pageURL:O()},e.next=4,u(r);case 4:e.sent&&c();case 6:case"end":return e.stop()}}),e,t)})));return function(t){return e.apply(this,arguments)}}()),f.default.addListener("offers:action",function(){var e=b(regeneratorRuntime.mark((function e(n){var r,o,a,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=s.action,o=s.success,a=void 0,"object"===(void 0===o?"undefined":i(o))&&null!==o&&(a=o.storeId),e.t0=r,e.next="offerActivated"===e.t0?6:11;break;case 6:return e.next=8,u(a);case 8:return e.sent&&c(),e.abrupt("break",12);case 11:return e.abrupt("break",12);case 12:case"end":return e.stop()}}),e,t)})));return function(t){return e.apply(this,arguments)}}());case 7:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)}),d=m(n(8)),f=m(n(6)),p=m(n(14)),h=m(n(613)),v=n(2702),g=n(1065),y=n(2742);function m(e){return e&&e.__esModule?e:{default:e}}function b(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,n){return function r(o,a){try{var i=t[o](a),s=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(s).then((function(e){r("next",e)}),(function(e){r("throw",e)}));e(s)}("next")}))}}var _={};function w(){try{return document.title}catch(e){return null}}function O(){try{return window.location.href}catch(e){return null}}function E(e,t){return f.default.send("offers:action",{action:"getProductOfferActivations",data:{userId:e,storeId:t,useCache:!0}},{background:!0})}var S=!1;t.default={start:l}},2545:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(2704),t),o(n(2705),t),o(n(2706),t)},2547:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(2744),a=(r=o)&&r.__esModule?r:{default:r};t.default={events:a.default.events,start:function(){a.default.initialize()}}},2548:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.HoneyCheckoutServer=t.HoneyCheckoutAction=void 0;var a=n(410);!function(e){e.PayPalCreateOrder="515c8f90-77fb-4f9c-9348-fe61dc2ffe36/checkout/paypal/order/create",e.PayPalApproveOrder="515c8f90-77fb-4f9c-9348-fe61dc2ffe36/checkout/paypal/order/approve",e.PayPalCancelOrder="515c8f90-77fb-4f9c-9348-fe61dc2ffe36/checkout/paypal/order/cancel",e.PayPalErrorOrder="515c8f90-77fb-4f9c-9348-fe61dc2ffe36/checkout/paypal/order/error",e.PayPalVersion="515c8f90-77fb-4f9c-9348-fe61dc2ffe36/checkout/paypal/order/version",e.PayPalConfig="515c8f90-77fb-4f9c-9348-fe61dc2ffe36/checkout/paypal/order/config",e.PayPalGuestEnabled="515c8f90-77fb-4f9c-9348-fe61dc2ffe36/checkout/paypal/order/guest",e.PayPalGetFacilitatorAccessToken="515c8f90-77fb-4f9c-9348-fe61dc2ffe36/checkout/paypal/order/gfat",e.HoneyCheckoutIFrameReady="515c8f90-77fb-4f9c-9348-fe61dc2ffe36/checkout/iframe/ready",e.HoneyCheckoutIFrameComplete="515c8f90-77fb-4f9c-9348-fe61dc2ffe36/checkout/iframe/complete"}(t.HoneyCheckoutAction||(t.HoneyCheckoutAction={}));var i=function(e){function t(t){return e.call(this,t)||this}return o(t,e),t}(a.Server);t.HoneyCheckoutServer=i},2549:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(2752),t),o(n(2753),t),o(n(2754),t)},2550:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o,a,i,s=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},u=(r=M(regeneratorRuntime.mark((function e(t){var n,r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e3;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.default.waitForElement(t,{timeout:o});case 2:return n=e.sent,r=D(n.text()),e.abrupt("return",m.default.cleanPrice(r));case 5:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)}),c=(o=M(regeneratorRuntime.mark((function e(t,n,r){var o,a,i,s=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==window.MutationObserver){e.next=2;break}return e.abrupt("return");case 2:return o=new MutationObserver(M(regeneratorRuntime.mark((function e(){var n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N(t);case 2:return n=e.sent,e.next=5,C.default.getFeatureFlag("gift_cards_use_remote_iframe");case 5:if(!e.sent){e.next=10;break}return o=O.default.getCurrent(),e.next=10,R.default.request(P.gcMessageNames.giftCardsCartPriceChange,{cartPrice:n,tabId:o.id,prioritized:r,storeId:t.id,storeName:t.name});case 10:case"end":return e.stop()}}),e,s)})))),e.next=5,m.default.waitForElement(n,{timeout:3e3});case 5:return e.prev=5,e.next=8,C.default.getFeatureFlag("gift_card_deals_observe_body_for_total");case 8:a=e.sent,i=a?document.body:document.querySelector(n),o.observe(i,{characterData:!0,attributes:!1,childList:!0,subtree:!0}),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(5),g.default.error("Error attaching mutation observer for store "+t.id+" with selector "+n);case 16:case"end":return e.stop()}}),e,this,[[5,13]])}))),function(e,t,n){return o.apply(this,arguments)}),l=(a=M(regeneratorRuntime.mark((function e(t){var n,r,o,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([k.default.getReminder(t),y.default.get("honey-pay-now:gift-card-deal-reminder:"+t).catch((function(){return{}}))]);case 2:return n=e.sent,r=s(n,2),o=r[0],a=r[1].isGiftCardTipEngaged,e.abrupt("return",!(!o&&!a));case 7:case"end":return e.stop()}}),e,this)}))),function(e){return a.apply(this,arguments)}),d=(i=M(regeneratorRuntime.mark((function e(t,n){var r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=O.default.getCurrent(),e.next=3,l(t.id);case 3:return o=e.sent,e.next=6,R.default.request(P.gcMessageNames.giftCardsFindSavingsClosed,{cartPrice:n,tabId:r.id,prioritized:!0,storeId:t.id,storeName:t.name,isReminderSet:o});case 6:case"end":return e.stop()}}),e,this)}))),function(e,t){return i.apply(this,arguments)});t.getCartPrice=N;var f=j(n(0)),p=j(n(46)),h=j(n(218)),v=j(n(6)),g=j(n(8)),y=j(n(28)),m=j(n(13)),b=j(n(21)),_=j(n(14)),w=j(n(12)),O=j(n(19)),E=j(n(30)),S=j(n(4)),x=j(n(2765)),k=j(n(1056)),T=n(561),C=j(n(57)),P=n(2551),R=j(P),I=j(n(2766));function j(e){return e&&e.__esModule?e:{default:e}}function M(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,n){return function r(o,a){try{var i=t[o](a),s=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(s).then((function(e){r("next",e)}),(function(e){r("throw",e)}));e(s)}("next")}))}}var A,L=/[\d+][,.\d+]+/;function D(e){var t=e&&e.match(L);if(t)return t[0]}function N(e){return u(e.metadata.honeyPayCartPriceSelector)}function F(e){[].forEach((function(t){return v.default.send("honey-pay-now:action:"+t,{action:T.HONEY_PAY_NOW_MESSAGES.SET_CART_PRICE,data:{cartPrice:e}},{background:!0})}))}function U(e){var t=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"body",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=document.querySelector("#"+e);if(!r){(r=document.createElement("div")).id=e,r.style.cssText=n;var o=document.querySelector(t);o.appendChild(r)}return r}("honeyPayNowContainer");p.default.render(f.default.createElement(I.default,{data:e}),t)}function B(e){var t=e.allPageTypes;return x.default.isPaymentsViewPrioritized(t)}v.default.addListener("current:product",(A=M(regeneratorRuntime.mark((function e(t,n){var r,o,a,i,s,u,c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.data,e.next=3,O.default.getCurrent();case 3:o=e.sent,a=o.id,i=r.partialObservation,s=i.price,u=i.url,c=r.productId,l=(0,h.default)(s).value(),y.default.set("honey-pay-now:product:"+u+":"+a,{productPrice:l,productId:c});case 8:case"end":return e.stop()}}),e,void 0)}))),function(e,t){return A.apply(this,arguments)})),v.default.addListener("honey-pay-now:action:ui",(function(e,t){switch(t&&t.action){case T.HONEY_PAY_NOW_MESSAGES.SET_PAY_NOW_CARD_VISIBILITY:return b.default.open({pathname:"/honey-pay-now-card",query:{},state:{cardData:t.data.cardData},force:!0,feature:"honey-pay-now-card",surface:"popup"});case T.HONEY_PAY_NOW_MESSAGES.OPEN_PAY_NOW_AUTOPOP:return b.default.open({pathname:"/honey-pay-now-autopop",query:{},state:t.data,force:!0,feature:"honey-pay-now-autopop",surface:"popup"});default:throw new InvalidParametersError("Invalid action")}})),function(){var e=this;Promise.all([new Promise((function(e){v.default.addListener("gift-cards-app:ready",(function(){return e()}))})),new Promise((function(e){v.default.addListener("find-savings:closed",(function(){return e()}))}))]).then(M(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.default.getCurrent();case 2:if((n=e.sent).id){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,N(n);case 7:if(r=e.sent){e.next=10;break}return e.abrupt("return");case 10:return e.next=12,C.default.getFeatureFlag("gift_cards_use_remote_iframe");case 12:if(!e.sent){e.next=16;break}return e.next=16,d(n,r);case 16:case"end":return e.stop()}}),t,e)})))).catch((function(){return""}))}(),function(){var e=this;v.default.addListener("find-savings:complete",M(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.default.getCurrent();case 2:if((n=e.sent).id){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,N(n);case 7:if(r=e.sent){e.next=10;break}return e.abrupt("return");case 10:return e.next=12,C.default.getFeatureFlag("gift_cards_use_remote_iframe");case 12:if(!e.sent){e.next=16;break}return e.next=16,d(n,r);case 16:case"end":return e.stop()}}),t,e)}))))}();var H,G=0;v.default.addListener("pageDetected:PAYMENTS",(H=M(regeneratorRuntime.mark((function e(t,n){var r,o,a,i,s,u,d,f,p,h=n.data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((r=Date.now())-G<5e3)){e.next=5;break}return e.abrupt("return");case 5:G=r;case 6:return e.next=8,w.default.getCurrent();case 8:if((o=e.sent).id){e.next=11;break}return e.abrupt("return");case 11:return e.next=13,N(o);case 13:if(a=e.sent){e.next=16;break}return e.abrupt("return");case 16:return e.next=18,C.default.getFeatureFlag("gift_cards_use_remote_iframe");case 18:if(!e.sent){e.next=41;break}return e.next=22,B(h);case 22:return i=e.sent,e.next=25,E.default.getDeviceId();case 25:return s=e.sent,e.next=28,l(o.id);case 28:return u=e.sent,e.next=31,S.default.getCountryCode();case 31:return d=e.sent,e.next=34,S.default.getUILanguage();case 34:return f=e.sent,e.next=37,_.default.getInfo();case 37:p=e.sent,F(a),c(o,o.metadata.honeyPayCartPriceSelector,i);try{U({storeId:o.id,deviceId:s,browser:"ch",extVersion:"14.11.0",cartPrice:a,prioritized:i,isReminderSet:u,language:f,country:d,user:p})}catch(e){g.default.error("Error loading Honey Pay iframe: "+e)}case 41:case"end":return e.stop()}}),e,void 0)}))),function(e,t){return H.apply(this,arguments)})),t.default={}},2551:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.gcMessageNames=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(926);var a={extensionAuth:"extensionAuth",extensionRemoveIFrame:"extensionRemoveIFrame",extensionSendSDataEvent:"extensionSendSDataEvent",extensionUpdateStyles:"extensionUpdateStyles",extensionExperimentsGetVariant:"extensionExperimentsGetVariant",extensionExperimentsTrackImpression:"extensionExperimentsTrackImpression",extensionGetUserABGroup:"extensionGetUserABGroup",extensionGetI18nCountryCode:"extensionGetI18nCountryCode",extensionGetI18nMessage:"extensionGetI18nMessage",extensionSetGiftCardsEnabledForUser:"extensionSetGiftCardsEnabledForUser",extensionOpenLoginPrompt:"extensionOpenLoginPrompt",extensionHideContentUI:"extensionHideContentUI",extensionGetCartPrice:"extensionGetCartPrice",extensionSetIFrameAttribute:"extensionSetIFrameAttribute",extensionRemoveIFrameAttribute:"extensionRemoveIFrameAttribute",extensionSetHoneyStorageItem:"extensionSetHoneyStorageItem",extensionGetHoneyStorageItem:"extensionGetHoneyStorageItem",extensionRemoveHoneyStorageItem:"extensionRemoveHoneyStorageItem",extensionSetWindowLocalStorageItem:"extensionSetWindowLocalStorageItem",extensionGetWindowLocalStorageItem:"extensionGetWindowLocalStorageItem",extensionRemoveWindowLocalStorageItem:"extensionRemoveWindowLocalStorageItem",extensionGQLQuery:"extensionGQLQuery",extensionGQLMutation:"extensionGQLMutation",extensionOpenGiftCardDealModal:"extensionOpenGiftCardDealModal",giftCardsInit:"giftCardsInit",giftCardsReady:"giftCardsReady",giftCardsUserUpdate:"giftCardsUserUpdate",giftCardsCartPriceChange:"giftCardsCartPriceChange",giftCardsUserLoggedIn:"giftCardsUserLoggedIn",giftCardsFindSavingsClosed:"giftCardsFindSavingsClosed",extensionSetIsMinimized:"extensionSetIsMinimized",giftCardsSetIsMinimized:"giftCardsSetIsMinimized"},i=Object.keys(a).reduce((function(e,t){return r({},e,function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},t,t))}),{}),s=(t.gcMessageNames=new Proxy(i,{get:function(e,t,n){var r=Reflect.get(e,t,n);if(void 0===r)throw new Error("checkout message name not found: "+t);return r}}),new o.PostMessenger({types:a,enableLogging:!1,clientName:"extension",useEncryption:!1}));t.default=s},2554:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o,a,i=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u=(r=F(regeneratorRuntime.mark((function e(t){var n,r,o,a,i,u,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.default.sendEvent("tip004034",t);case 2:return e.next=4,(0,k.default)();case 4:if(e.t0=e.sent,e.t0){e.next=7;break}e.t0={};case 7:n=e.t0,r=n.productId,o=void 0===r?null:r,a=n.parentId,i=void 0===a?null:a,u=n.variantId,c=void 0===u?null:u,d.default.sendEvent("tip004034",s({},t,{productId:o,parentId:i,variantId:c}));case 10:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)}),c=(o=F(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(W){e.next=8;break}return e.next=3,(0,P.getCurrentVariant)();case 3:t=e.sent,n=s({level:"store",surface:"launchpad"},(0,v.getWindowSize)()),r=s({},n,{event:"hide_collision",collisionPathname:X,group:t}),u(r),W=!0;case 8:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)}),l=(a=F(regeneratorRuntime.mark((function e(){var t,n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=r.sdataBadgeDefaults,a=r.action;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,k.default)();case 2:return t=e.sent,e.next=5,(0,T.default)();case 5:(n=e.sent)&&!G&&((0,w.sdataTipsDebug)({debugEvent:"offers_miss_rate",action:a},{product:t||{},offer:n},s({},o,{productId:t.id||null}))(),G=!0);case 7:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)}),d=N(n(9)),f=N(n(8)),p=N(n(6)),h=N(n(36)),v=n(102),g=N(n(21)),y=N(n(30)),m=n(34),b=n(134),_=N(n(62)),w=n(18),O=n(2774),E=N(O),S=n(302),x=N(n(1038)),k=N(n(178)),T=N(n(323)),C=N(n(2836));n(2837),n(2838);var P=n(90),R=N(P),I=N(n(268)),j=N(n(2844)),M=n(35),A=N(n(120)),L=N(n(161)),D=n(431);function N(e){return e&&e.__esModule?e:{default:e}}function F(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,n){return function r(o,a){try{var i=t[o](a),s=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(s).then((function(e){r("next",e)}),(function(e){r("throw",e)}));e(s)}("next")}))}}var U=!1,B=!1,H=void 0,G=!1,q=!1,W=!1,V=!1,z=!1,Y=!1,K=!1,X="",J=!1;function Q(){H&&(0,O.unMountApp)(H),U=!1,B=!1,j.default.installed&&j.default.uninstall()}p.default.addListener("ui:action",(function(e,t){"pre-open"===t.action&&(F(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,I.default)();case 2:t=e.sent,U&&t&&(c(),Q());case 4:case"end":return e.stop()}}),e,void 0)})))(),K=!0,X=t.pathname)})),function(){var e,t=this,n=(e=F(regeneratorRuntime.mark((function e(){var t,n,r,o,a,d,p,_,O,k,T,N,F,G,W,X,$,Z,ee,te,ne,re,oe,ae,ie,se,ue,ce,le,de;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,A.default)(),e.next=3,L.default.dispatch(m.experimentsActions.loadVariants([(0,A.default)(),M.CASHBACK_EXPERIMENT,M.CASHBACK_US_EXPERIMENT,M.GOLD_CASHBACK_EXPERIMENT,M.OFFERS_CTA_EXPERIMENT,M.PERSONALIZED_UNAUTH_EXPERIMENT]));case 3:return e.next=5,(0,P.canRunTips)();case 5:if(!e.sent){e.next=14;break}if(h.default.trackImpression(t),h.default.trackImpression(M.CASHBACK_EXPERIMENT),h.default.trackImpression(M.PERSONALIZED_UNAUTH_EXPERIMENT),h.default.trackImpression(M.OFFERS_UI_CARD_EXPERIMENT),!B){e.next=13;break}return e.abrupt("return");case 13:B=!0;case 14:if(!U){e.next=17;break}return B=!1,e.abrupt("return");case 17:return e.next=19,Promise.all([(0,I.default)(),(0,b.isInTipsShowingGroup)(),(0,b.getTipsShowingGroup)(),(0,R.default)(),(0,P.isTipsDisabled)(),(0,P.isAutoPop)(),(0,C.default)()]);case 19:return n=e.sent,r=i(n,7),o=r[0],a=r[1],d=r[2],p=r[3],_=r[4],O=r[5],k=r[6],T=s({level:o?"store":"product",surface:o?"launchpad_homepage":"pdp"},(0,v.getWindowSize)()),k&&(T.level="store",T.surface="launchpad_homepage"),N=g.default.visible(),e.next=33,y.default.isFirstTime();case 33:if(F=e.sent,!(K||N||F)||!o){e.next=39;break}return f.default.debug("honeyTips:canShowUniversalContainer: UI action present so stood down"),q||(c(),q=!0),B=!1,e.abrupt("return");case 39:if(!p){e.next=94;break}if(z||((0,w.sdataTipsDebug)({debugEvent:"funnel",action:"should_show_container"},{funnelForLaunchpad:k},s({},T,{surface:T.surface}))(),z=!0),a){e.next=49;break}return e.next=44,(0,P.getCurrentVariant)();case 44:return G=e.sent,W=s({},T,{event:"hide_holdout",group:G,holdout:d}),V||(f.default.debug("honeyTips: user is in holdout group, dont show tips"),u(W),l({sdataBadgeDefaults:T,action:"tips_available_holdout"}),(0,w.sdataTipsDebug)({debugEvent:"funnel",action:"not_shown"},{},s({},T))(),V=!0),B=!1,e.abrupt("return");case 49:return e.next=51,(0,x.default)();case 51:if(X=e.sent,$=X.tipsEnabledByUser,Z=X.reason,$){e.next=67;break}if(Y){e.next=65;break}return Y=!0,e.next=59,(0,P.getCurrentVariant)();case 59:ee=e.sent,te=s({},T,{event:Z?"hide_disable:"+Z:"hide_disable",group:"launch_v:"+ee}),u(te),l({sdataBadgeDefaults:T,action:"tips_available_disable"}),(0,w.sdataTipsDebug)({debugEvent:"funnel",action:"not_shown"},{},s({},T))(),f.default.debug("honeyTips: tips disabled by user");case 65:return B=!1,e.abrupt("return");case 67:return e.next=69,(0,D.shouldSuppressTips)();case 69:if(ne=e.sent,re=ne.suppressed,oe=ne.reason,!re){e.next=85;break}if(J){e.next=83;break}return e.next=76,(0,P.getCurrentVariant)();case 76:ae=e.sent,ie=s({},T,{event:oe?"hide_snooze:"+oe:"hide_snooze",group:"launch_v:"+ae}),u(ie),J=!0,f.default.debug("honeyTips: tips suppressed by user"),l({sdataBadgeDefaults:T,action:"tips_available_suppress"}),(0,w.sdataTipsDebug)({debugEvent:"funnel",action:"not_shown"},{},s({},T))();case 83:return B=!1,e.abrupt("return");case 85:if(U){e.next=92;break}return e.next=88,(0,E.default)();case 88:se=e.sent,(ue=se.shadowRoot)&&(H=ue,U=!0,j.default.installed||j.default.install()),B=!1;case 92:e.next=102;break;case 94:if(k&&!z?((0,w.sdataTipsDebug)({debugEvent:"funnel",action:"should_show_container"},{isValidLaunchpadPage:k},s({},T))(),z=!0):z||((0,w.sdataTipsDebug)({debugEvent:"funnel",action:"should_not_show_container"},{isValidLaunchpadPage:k},s({},T))(),z=!0),!(0,S.getIsProductPage)()){e.next=100;break}return e.next=98,(0,P.getIsInExperimentPopulation)();case 98:ce=e.sent,O?(le=s({},T,{event:"hide",group:"autopop_displayed"}),u(le)):_&&ce&&(de=s({},T,{event:"hide",group:"control"}),u(de));case 100:B=!1,Q();case 102:case"end":return e.stop()}}),e,this)}))),function(){return e.apply(this,arguments)});d.default.sendEvent("tip004036",{action:"init",debugEvent:"funnel"}),(0,_.default)("honeyTips:newPage")(F(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n();case 1:case"end":return e.stop()}}),e,t)})))),(0,_.default)("honeyTips:turnOff")(F(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e,t)}))))}(),t.default={getInitialized:function(){return U},getInitalizing:function(){return B}}},2555:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=n(0),i=n(30),s=(r=i)&&r.__esModule?r:{default:r};function u(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,n){return function r(o,a){try{var i=t[o](a),s=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(s).then((function(e){r("next",e)}),(function(e){r("throw",e)}));e(s)}("next")}))}}t.default=function(e){var t,n,r=e||{},i=r.mouseEnterDelay,c=void 0===i?3e3:i,l=r.tooltipHideDelay,d=void 0===l?2e3:l,f=r.tooltipHideDelayOnHover,p=void 0===f?3e3:f,h=(0,a.useState)(),v=o(h,2),g=v[0],y=v[1],m=(0,a.useState)(),b=o(m,2),_=b[0],w=b[1],O=(0,a.useState)(!1),E=o(O,2),S=E[0],x=E[1],k=(t=u(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:g&&(clearTimeout(g),y(),w(setTimeout((function(){x(!1),w()}),d)));case 1:case"end":return e.stop()}}),e,void 0)}))),function(){return t.apply(this,arguments)});return{shouldShowTooltip:S,forceHideTooltip:function(){x(!1),w()},startClickBadgeTooltip:(n=u(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.default.getSetting("honeyTips:badge:first_time_click_badge_tooltip");case 2:e.sent||_||y(setTimeout(u(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.default.updateSetting("honeyTips:badge:first_time_click_badge_tooltip",!0);case 2:x(!0),w(setTimeout((function(){x(!1),w()}),p));case 4:case"end":return e.stop()}}),e,void 0)}))),c));case 4:case"end":return e.stop()}}),e,void 0)}))),function(){return n.apply(this,arguments)}),endClickBadgeTooltip:k}}},2556:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hoverOrClickEvents=void 0;var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=n(0),a=t.hoverOrClickEvents={MOUSEUP:"mouseup",MOUSEENTER:"mouseenter",DELAYED_MOUSEENTER:"delayedMouseEnter",MOUSELEAVE:"mouseleave"};t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.hoverTimeout,n=void 0===t?1e3:t,i=e.isStaticContainer,s=void 0!==i&&i,u=(0,o.useState)(null),c=r(u,2),l=c[0],d=c[1],f=void 0,p=(0,o.useCallback)((function(){d({event:a.MOUSEENTER}),f=setTimeout((function(){d({event:a.DELAYED_MOUSEENTER})}),n)}),[]),h=(0,o.useCallback)((function(){clearTimeout(f),f=void 0,d({event:a.MOUSELEAVE})}),[]),v=(0,o.useCallback)((function(){clearTimeout(f),f=void 0,d({event:a.MOUSEUP})}),[]),g=(0,o.useRef)();return(0,o.useEffect)((function(){return g.current&&s&&(g.current.addEventListener("mouseenter",p),g.current.addEventListener("mouseleave",h),g.current.addEventListener("mouseup",v),clearTimeout(f)),function(){g.current&&(g.current.removeEventListener("mouseenter",p),g.current.removeEventListener("mouseleave",h),g.current.removeEventListener("mouseup",v),clearTimeout(f))}}),[g]),[g,l]}},2557:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BadgeAnimationState=void 0,t.default=function(){var e=(0,i.useDispatch)(),t=(0,i.useSelector)(c.selectCurrentContainerId),n=((0,i.useSelector)((0,o.selectUniversalContainerById)(t))||{}).badgeAnimationState,r=void 0===n?l.WAITING:n,s=(0,a.useCallback)((function(){e((0,u.default)(l.START))}),[e]),d=(0,a.useCallback)((function(){e((0,u.default)(l.END))}),[e]);return{animate:r,startAnimation:s,endAnimation:d}};var r,o=n(15),a=n(0),i=n(5),s=n(2788),u=(r=s)&&r.__esModule?r:{default:r},c=n(22);var l=t.BadgeAnimationState={START:"start",END:"end",WAITING:"waiting",CANCELED:"canceled"}},2558:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(5),o=n(22),a=n(15);t.default=function(){var e=(0,r.useSelector)(o.selectCurrentContainerId);return(0,r.useSelector)((0,a.selectUniversalContainerById)(e))||{}}},2559:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=n(0),i=c(n(8)),s=c(n(2793)),u=n(208);function c(e){return e&&e.__esModule?e:{default:e}}var l=function(e){return i.default.debug("honeyTips:universalContainer:hooks:"+e)},d={behavior:"smooth",block:"center"};t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d,n=(0,a.useRef)(new s.default({max:30})),i=(0,a.useRef)(new s.default({max:100})),c=(0,a.useState)(!1),f=o(c,2),p=f[0],h=f[1];(0,a.useEffect)((function(){e&&e.current&&n.current.set((0,u.v4)(),e.current)}),[e]);var v=function(e){e.scrollIntoView(r({},t,{top:-10}))},g=function(e,t){e?t?i.current.set((0,u.v4)(),[e,t]):l("addRef: Missing ref. Pass a ref."):l("addRef: Missing categoryId. Pass a categoryId")},y=function(e){if(p)l("scrollToTip: Already scrolling. Ignore");else if(e){l("scrollToTip: Scrolling to "+e);var t=i.current.values().filter((function(t){return o(t,1)[0]===e}));h(!0),Promise.all(t.map((function(e){var t=o(e,2)[1];return new Promise((function(e){v(t),e()}))}))).then((function(){return h(!1)}))}else l("scrollToTip: categoryId missing. No scrolling here")},m=function(){if(p)l("scrollToTop: Already scrolling. Ignore");else{var e=n.current;if(e){h(!0);var o=e.values();Promise.all(o.map((function(e){return new Promise((function(n){e.scrollTo(r({},t,{top:0})),n()}))}))).then((function(){return h(!1)}))}else l("scrollToTop: Nothing to scroll here")}};return{scrollToTop:m,scrollToCategory:y,addTipRef:g,containerRefs:n,isScrolling:p}}},2560:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=n(0),a=h(o),i=h(n(1)),s=n(2800),u=h(n(4)),c=h(n(30)),l=n(2),d=n(5),f=n(18),p=h(n(2561));function h(e){return e&&e.__esModule?e:{default:e}}var v=(0,s.detect)(),g=function(e){var t=e.hasUserHovered,n=(0,d.useDispatch)(),i=(0,o.useState)(!1),s=r(i,2),h=s[0],g=s[1],y=!1;v&&(y="safari"===v.name&&"15.0.0"===v.version),(0,o.useEffect)((function(){y&&!t&&n((0,f.safariTooltipShown)())}),[]);var m=a.default.createElement(p.default,null);return!y||t||h||(m=a.default.createElement("div",{onMouseEnter:function(){t||(n((0,f.safariTooltipHovered)()),c.default.updateSetting("hoveredSafariUpdateTooltip",!0),g(!0))}},a.default.createElement(l.ToolTipIcon,{direction:"left",dotted:!1,copy:u.default.getMessage("Upgrade_to_Safari_151_or_above_for_the_best_experience_with_Honey_Tips"),customAnchorElement:a.default.createElement(p.default,null),forceShow:!0}))),m};g.propTypes={onClick:i.default.func},g.defaultProps={onClick:null},t.default=g},2561:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=d(r),a=n(3),i=d(n(1019)),s=n(5),u=d(n(4)),c=n(94),l=n(22);function d(e){return e&&e.__esModule?e:{default:e}}var f=(0,a.createUseStyles)({link:{textDecoration:"none"}});t.default=function(){var e=f(),t=(0,s.useDispatch)(),n=(0,s.useSelector)(l.selectCurrentContainerId),a=(0,r.useCallback)((function(){n&&t((0,c.sdataTipsLogoClicked)(n))}),[n,t]),d="https://www.joinhoney.com/",p=u.default.getMessage("Honey_Tips_Visit_URL").replace(/{URL}/g,d);return o.default.createElement("a",{href:d,target:"_blank",rel:"noopener noreferrer",className:e.link,onClick:a,"aria-label":p},o.default.createElement(i.default,null))}},2562:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s(n(0)),o=s(n(4)),a=n(3),i=n(2);function s(e){return e&&e.__esModule?e:{default:e}}var u=(0,a.createUseStyles)({container:{display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",height:"264px"},circle:{width:"88px",height:"88px",border:"1.5px solid "+i.Colors.grey800,boxSizing:"border-box",borderRadius:"50%",marginLeft:"auto",marginRight:"auto",marginBottom:"16px",fontStyle:"normal",fontWeight:"300",fontSize:"50px",lineHeight:"85px",display:"flex",alignSelf:"center",justifyContent:"center"},circleText:{fontStyle:"normal",fontWeight:"500",fontSize:"17px",lineHeight:"22px",marginBottom:"16px, auto",display:"flex"}}),c=function(){var e=u();return r.default.createElement("div",{className:e.container},r.default.createElement("div",null,r.default.createElement("div",{className:e.circle},"!"),r.default.createElement("div",{className:e.circleText},o.default.getMessage("There_are_no_tips_for_this_item"))))};c.propTypes={},c.defaultProps={},t.default=c},2563:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.logDependencyStatus=t.callDataFetcher=t.getDependenciesToProcess=t.getCategoryDependents=void 0;var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=n(1034),a=c(n(848)),i=c(n(8)),s=c(n(2832)),u=n(1069);function c(e){return e&&e.__esModule?e:{default:e}}var l=t.getCategoryDependents=function(){return Object.entries(a.default.getRegistry()).reduce((function(e,t){var n=r(t,2),o=n[0];return n[1].forEach((function(t){var n=e[t]||[];e[t]=[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(n),[o])})),e}),{})},d=t.getDependenciesToProcess=function(){return Object.entries(a.default.getRegistry()).reduce((function(e,t){var n=r(t,2),o=n[0],a=n[1];return e[o]=new Set(a),e}),{})},f=t.callDataFetcher=function(e,t){return function(n){return s.default.createDataFetcherPromise({categoryId:e,data:t,dataFetcher:(0,o.getDataFetcher)(e),dispatch:n})}},p=t.logDependencyStatus=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=t.filter((function(e){return"rejected"===e.status})).map((function(e){return e.reason.message})),o=t.filter((function(e){return"fulfilled"===e.status})).map((function(e){return e.value.type})),a=Array.from(new Set(o));a.length&&i.default.debug(u.LOG_PREFIX+"loadDependencies: Successfully loaded "+a.join(", ")+" for stateId "+e.stateId),r.length&&i.default.warn(u.LOG_PREFIX+"loadDependencies: Failed "+e.stateId+" for following reasons:\n "+r.join("\n")),n&&console.log(u.LOG_PREFIX+"loadDependencies: Result for "+e.stateId,t)};t.default={callCategoryDataFetcher:f,logDependencyStatus:p,getCategoryDependents:l,getDependenciesToProcess:d}},2564:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fireCreateRelevanceRequest=t.fireDependencyFinishedEvent=void 0;var r=i(n(6)),o=i(n(8)),a=n(1069);function i(e){return e&&e.__esModule?e:{default:e}}t.fireDependencyFinishedEvent=function(e){var t=e.type,n=e.status,i=e.data,s=e.stateId;return t?s?r.default.send(a.FINISHED_EVENT,{type:t,status:n,data:i,stateId:s}):(o.default.error(a.LOG_PREFIX+"fireDependencyFinishedEvent Provide associated stateId."),null):(o.default.error(a.LOG_PREFIX+"fireDependencyFinishedEvent Provide a type."),null)},t.fireCreateRelevanceRequest=function(e){r.default.send(a.CREATE_RELEVANCE_REQUEST,e)}},2565:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.HOLDOUT_GROUPS={NULL:"null",CONTROL:"control",TREATMENT:"treatment"},t.UPDATE_HOLDOUT_OVERRIDE_PARAM_KEY="addUserToExperiment",t.RESET_DATE_COMMAND="resetBucketDate",t.RESET_GROUP_COMMAND="resetGroupValue",t.DEVICE_KEY_DATE="device:tipsBucketDate",t.DEVICE_KEY_GROUP_OVERRIDE="device:tipsDevGroupOverride",t.THIRTY_DAYS_IN_MS=2592e6},2566:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTipsGroup=t.updateHoldoutOverride=void 0;var r=s(n(30)),o=s(n(8)),a=s(n(13)),i=n(2565);function s(e){return e&&e.__esModule?e:{default:e}}function u(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,n){return function r(o,a){try{var i=t[o](a),s=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(s).then((function(e){r("next",e)}),(function(e){r("throw",e)}));e(s)}("next")}))}}var c,l,d=(c=u(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Object.values(i.HOLDOUT_GROUPS).includes(t)){e.next=7;break}return e.next=3,r.default.updateSetting(i.DEVICE_KEY_DATE,Date.now());case 3:return e.next=5,Promise.all([r.default.updateSetting(i.DEVICE_KEY_DATE,Date.now()),r.default.updateSetting(i.DEVICE_KEY_GROUP_OVERRIDE,t)]);case 5:return o.default.debug("honeyTips:holdout: dev override, set group manually to "+t),e.abrupt("return",t);case 7:return o.default.debug("honeyTips:holdout: group was not valid: "+t),e.abrupt("return",!1);case 9:case"end":return e.stop()}}),e,void 0)}))),function(e){return c.apply(this,arguments)});t.updateHoldoutOverride=(l=u(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=new URLSearchParams(window.location.search),!(n=t.get(i.UPDATE_HOLDOUT_OVERRIDE_PARAM_KEY))){e.next=17;break}e.t0=n,e.next=e.t0===i.RESET_DATE_COMMAND?6:e.t0===i.RESET_GROUP_COMMAND?10:14;break;case 6:return o.default.debug("honeyTips:holdout: reset dev bucket date override"),e.next=9,r.default.updateSetting(i.DEVICE_KEY_DATE,null);case 9:return e.abrupt("break",17);case 10:return o.default.debug("honeyTips:holdout: reset dev group value override"),e.next=13,r.default.updateSetting(i.DEVICE_KEY_GROUP_OVERRIDE,null);case 13:return e.abrupt("break",17);case 14:return e.next=16,d(n);case 16:return e.abrupt("break",17);case 17:case"end":return e.stop()}}),e,void 0)}))),function(){return l.apply(this,arguments)}),t.getTipsGroup=function(e){var t=e.bucketDate,n=e.devGroupOverride,r=e.userId;if(function(e){var t=e.bucketDate;if(!t)return o.default.debug("honeyTips:holdout: no bucket date"),!1;o.default.debug("honeyTips:holdout: bucketDate is "+new Date(t));var n=t+i.THIRTY_DAYS_IN_MS;o.default.debug("honeyTips:holdout: bucketDate will expire on "+new Date(n));var r=Date.now()<n;return o.default.debug("honeyTips:holdout:is Within 30 days "+r),r}({bucketDate:t})){if(n)return o.default.debug("honeyTips:holdout: got override group from device: "+n),n;for(var s=a.default.parseInt(r.slice(-4),10),u=[{groupName:i.HOLDOUT_GROUPS.NULL,weight:98},{groupName:i.HOLDOUT_GROUPS.CONTROL,weight:1},{groupName:i.HOLDOUT_GROUPS.TREATMENT,weight:1}],c=s%100,l=0;l<u.length;l+=1)if((c-=u[l].weight)<0){var d=u[l].groupName;return o.default.debug("honeyTips:holdout: user is in group "+d),d}}o.default.debug("honeyTips:holdout: user is not in any bucket, bucket date does not exist or is not within 30 days")}},2568:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var r=function(){function e(){this._hasWeakSet="function"==typeof WeakSet,this._inner=this._hasWeakSet?new WeakSet:[]}return e.prototype.memoize=function(e){if(this._hasWeakSet)return!!this._inner.has(e)||(this._inner.add(e),!1);for(var t=0;t<this._inner.length;t++){if(this._inner[t]===e)return!0}return this._inner.push(e),!1},e.prototype.unmemoize=function(e){if(this._hasWeakSet)this._inner.delete(e);else for(var t=0;t<this._inner.length;t++)if(this._inner[t]===e){this._inner.splice(t,1);break}},e}()},2569:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(2570),o=n(88),a=n(165),i=n(72);function s(){Object(r.a)({callback:u,type:"error"}),Object(r.a)({callback:u,type:"unhandledrejection"})}function u(){var e=Object(i.c)();e&&(o.a.log("[Tracing] Transaction: "+a.a.InternalError+" -> Global error occured"),e.setStatus(a.a.InternalError))}},2570:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var r,o=n(11),a=n(118),i=n(88),s=n(167),u=n(221),c=n(1070),l=n(2456),d=Object(s.e)(),f={},p={};function h(e){if(!p[e])switch(p[e]=!0,e){case"console":!function(){if(!("console"in d))return;["debug","info","warn","error","log","assert"].forEach((function(e){e in d.console&&Object(u.c)(d.console,e,(function(t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];g("console",{args:n,level:e}),t&&Function.prototype.apply.call(t,d.console,n)}}))}))}();break;case"dom":!function(){if(!("document"in d))return;var e=g.bind(null,"dom"),t=w(e,!0);d.document.addEventListener("click",t,!1),d.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach((function(t){var n=d[t]&&d[t].prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&(Object(u.c)(n,"addEventListener",(function(t){return function(n,r,o){if("click"===n||"keypress"==n)try{var a=this.__sentry_instrumentation_handlers__=this.__sentry_instrumentation_handlers__||{},i=a[n]=a[n]||{refCount:0};if(!i.handler){var s=w(e);i.handler=s,t.call(this,n,s,o)}i.refCount+=1}catch(e){}return t.call(this,n,r,o)}})),Object(u.c)(n,"removeEventListener",(function(e){return function(t,n,r){if("click"===t||"keypress"==t)try{var o=this.__sentry_instrumentation_handlers__||{},a=o[t];a&&(a.refCount-=1,a.refCount<=0&&(e.call(this,t,a.handler,r),a.handler=void 0,delete o[t]),0===Object.keys(o).length&&delete this.__sentry_instrumentation_handlers__)}catch(e){}return e.call(this,t,n,r)}})))}))}();break;case"xhr":!function(){if(!("XMLHttpRequest"in d))return;var e=[],t=[],n=XMLHttpRequest.prototype;Object(u.c)(n,"open",(function(n){return function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];var i=this,s=r[1];i.__sentry_xhr__={method:Object(a.k)(r[0])?r[0].toUpperCase():r[0],url:r[1]},Object(a.k)(s)&&"POST"===i.__sentry_xhr__.method&&s.match(/sentry_key/)&&(i.__sentry_own_request__=!0);var c=function(){if(4===i.readyState){try{i.__sentry_xhr__&&(i.__sentry_xhr__.status_code=i.status)}catch(e){}try{var n=e.indexOf(i);if(-1!==n){e.splice(n);var o=t.splice(n)[0];i.__sentry_xhr__&&void 0!==o[0]&&(i.__sentry_xhr__.body=o[0])}}catch(e){}g("xhr",{args:r,endTimestamp:Date.now(),startTimestamp:Date.now(),xhr:i})}};return"onreadystatechange"in i&&"function"==typeof i.onreadystatechange?Object(u.c)(i,"onreadystatechange",(function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return c(),e.apply(i,t)}})):i.addEventListener("readystatechange",c),n.apply(i,r)}})),Object(u.c)(n,"send",(function(n){return function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];return e.push(this),t.push(r),g("xhr",{args:r,startTimestamp:Date.now(),xhr:this}),n.apply(this,r)}}))}();break;case"fetch":!function(){if(!Object(l.d)())return;Object(u.c)(d,"fetch",(function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r={args:t,fetchData:{method:y(t),url:m(t)},startTimestamp:Date.now()};return g("fetch",Object(o.a)({},r)),e.apply(d,t).then((function(e){return g("fetch",Object(o.a)(Object(o.a)({},r),{endTimestamp:Date.now(),response:e})),e}),(function(e){throw g("fetch",Object(o.a)(Object(o.a)({},r),{endTimestamp:Date.now(),error:e})),e}))}}))}();break;case"history":!function(){if(!Object(l.c)())return;var e=d.onpopstate;function t(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var o=t.length>2?t[2]:void 0;if(o){var a=r,i=String(o);r=i,g("history",{from:a,to:i})}return e.apply(this,t)}}d.onpopstate=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var o=d.location.href,a=r;if(r=o,g("history",{from:a,to:o}),e)try{return e.apply(this,t)}catch(e){}},Object(u.c)(d.history,"pushState",t),Object(u.c)(d.history,"replaceState",t)}();break;case"error":O=d.onerror,d.onerror=function(e,t,n,r,o){return g("error",{column:r,error:o,line:n,msg:e,url:t}),!!O&&O.apply(this,arguments)};break;case"unhandledrejection":E=d.onunhandledrejection,d.onunhandledrejection=function(e){return g("unhandledrejection",e),!E||E.apply(this,arguments)};break;default:i.a.warn("unknown instrumentation type:",e)}}function v(e){e&&"string"==typeof e.type&&"function"==typeof e.callback&&(f[e.type]=f[e.type]||[],f[e.type].push(e.callback),h(e.type))}function g(e,t){var n,r;if(e&&f[e])try{for(var a=Object(o.f)(f[e]||[]),s=a.next();!s.done;s=a.next()){var u=s.value;try{u(t)}catch(t){i.a.error("Error while triggering instrumentation handler.\nType: "+e+"\nName: "+Object(c.a)(u)+"\nError: "+t)}}}catch(e){n={error:e}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}function y(e){return void 0===e&&(e=[]),"Request"in d&&Object(a.g)(e[0],Request)&&e[0].method?String(e[0].method).toUpperCase():e[1]&&e[1].method?String(e[1].method).toUpperCase():"GET"}function m(e){return void 0===e&&(e=[]),"string"==typeof e[0]?e[0]:"Request"in d&&Object(a.g)(e[0],Request)?e[0].url:String(e[0])}var b,_;function w(e,t){return void 0===t&&(t=!1),function(n){if(n&&_!==n&&!function(e){if("keypress"!==e.type)return!1;try{var t=e.target;if(!t||!t.tagName)return!0;if("INPUT"===t.tagName||"TEXTAREA"===t.tagName||t.isContentEditable)return!1}catch(e){}return!0}(n)){var r="keypress"===n.type?"input":n.type;void 0===b?(e({event:n,name:r,global:t}),_=n):function(e,t){if(!e)return!0;if(e.type!==t.type)return!0;try{if(e.target!==t.target)return!0}catch(e){}return!1}(_,n)&&(e({event:n,name:r,global:t}),_=n),clearTimeout(b),b=d.setTimeout((function(){b=void 0}),1e3)}}}var O=null;var E=null},2591:function(e,t,n){n(1007),e.exports=n(2592)},2592:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(2459),n(2507),n(2512),n(2515),n(2516),n(2522),n(2527),n(2528),n(2530),n(2532),n(2533),n(2534),n(2536),n(2537),n(2539),n(2540),n(2542),n(2543),n(109),n(2544);var r,o=Q(n(26)),a=Q(n(23)),i=Q(n(13)),s=Q(n(343)),u=Q(n(947)),c=Q(n(228)),l=Q(n(148)),d=Q(n(2546)),f=Q(n(2743)),p=Q(n(608)),h=Q(n(258)),v=Q(n(30)),g=Q(n(36)),y=Q(n(518)),m=Q(n(4)),b=Q(n(1010)),_=Q(n(8)),w=Q(n(6)),O=Q(n(85)),E=Q(n(948)),S=Q(n(2550)),x=Q(n(186)),k=Q(n(111)),T=Q(n(2552)),C=Q(n(73)),P=Q(n(2773)),R=Q(n(48)),I=Q(n(2553)),j=Q(n(9)),M=Q(n(80)),A=Q(n(12)),L=Q(n(19)),D=Q(n(2554)),N=Q(n(21)),F=Q(n(14)),U=Q(n(1046)),B=Q(n(1011)),H=Q(n(2845)),G=Q(n(321)),q=Q(n(215)),W=Q(n(959)),V=Q(n(177)),z=Q(n(54)),Y=Q(n(2567)),K=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(2854)),X=Q(n(2850)),J=Q(n(2851));function Q(e){return e&&e.__esModule?e:{default:e}}o.default.onPossiblyUnhandledRejection((function(e){return _.default.error(e)})),r=window.location.href,w.default.send("page:load",{url:r,hasServiceWorkers:!!((navigator||{}).serviceWorker||{}).controller},{allTabs:!0,background:!0,ignoreResponse:!0}).reflect(),_.default.debug("Honey 14.11.0 content script is ready. Environment is production"),(0,X.default)(K,J.default),setTimeout((function(){if("www.joinhoney.com"===window.location.hostname){var e=document.querySelector("#messagingEventHandler");if(e)if(e.getAttribute("si_ext"))w.default.send("si:on",{si_ext:e.getAttribute("si_ext")},{ignoreResponse:!0,background:!0});else new MutationObserver((function(){e.getAttribute("si_ext")&&w.default.send("si:on",{si_ext:e.getAttribute("si_ext")},{ignoreResponse:!0,background:!0})})).observe(e,{attributes:!0})}}));var $={$:a.default,acorns:s.default,adbBp:V.default,ajax:u.default,button:c.default,cartPageFetcher:B.default,checkoutPlatform:f.default,clipboard:l.default,config:d.default,confirmation:p.default,cookies:h.default,device:v.default,experiments:g.default,extensionReview:y.default,i18n:m.default,imageLoader:b.default,honeyPayNow:S.default,honeyPayPal:x.default,launchpad:z.default,logger:_.default,messages:w.default,offers:O.default,optimus:E.default,pageDetector:C.default,popover:k.default,productFetcher:T.default,runtime:P.default,savingsController:R.default,search:Y.default,seleniumComm:I.default,stats:j.default,storage:M.default,stores:A.default,tabs:L.default,tips:D.default,ui:N.default,user:F.default,userSavingsStats:U.default,util:i.default,vims:G.default,websiteComm:q.default,whereAmI:H.default,yelp:W.default};w.default.addListener("debug:change",(function(e,t){try{t.active?window.honey=$:delete window.honey}catch(e){}})),t.default=$},2702:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.CheckoutObservationBackgroundManager=t.CheckoutObservationContentManager=t.DataTransporter=void 0;var o=n(2703);Object.defineProperty(t,"DataTransporter",{enumerable:!0,get:function(){return r(o).default}});var a=n(2714);Object.defineProperty(t,"CheckoutObservationContentManager",{enumerable:!0,get:function(){return r(a).default}});var i=n(2721);Object.defineProperty(t,"CheckoutObservationBackgroundManager",{enumerable:!0,get:function(){return r(i).default}})},2703:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{u(r.next(e))}catch(e){a(e)}}function s(e){try{u(r.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var a=n(2545),i=n(2443),s=n(967),u=n(1065),c=function(){function e(e){var t=e.window,n=new a.FrameTransportClient({allowedOrigin:t.location.origin,id:u.FRAME_TRANPORT_IDS.PAGE_TO_CONTENT_TRANSPORT}),r=new i.Client({transport:n,options:{}});r.connect(t),this.client=r}return e.prototype.send=function(e){return r(this,void 0,void 0,(function(){var t;return o(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,this.client.invoke(u.FRAME_TRANSPORT_ACTIONS.PAGE_TO_CONTENT_EVENT,{data:e,options:{timeoutMilliseconds:3e4}})];case 1:return n.sent(),[3,3];case 2:return t=n.sent(),s.logger.info("[CheckoutObservation] Failed to send page to content",{error:t}),[3,3];case 3:return[2]}}))}))},e}();t.default=c},2704:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FrameTransportClient=void 0;var r=function(){function e(e){var t=e.allowedOrigin,n=e.id;this.allowedOrigin=t,this.id=n}return e.prototype.getId=function(){return this.id},e.prototype.connect=function(e){var t=e.target,n=e.onMessage;this.target=t,this.subscription=this.subscribe({callback:n})},e.prototype.disconnect=function(){this.subscription&&(this.subscription.dispose(),this.target=void 0,this.subscription=void 0)},e.prototype.send=function(e){var t=e.message,n=this.target;if(!n)throw new Error("No connection available. Did you to call connect() before attempting to send a message");n.postMessage(t,this.allowedOrigin)},e.prototype.subscribe=function(e){var t=this,n=e.callback,r=!1,o=function(e){"*"!==t.allowedOrigin&&e.origin!=t.allowedOrigin||e.data&&e.data.meta&&"request"!==e.data.meta.type&&n({message:e.data,source:e.source,context:void 0})};return window.addEventListener("message",o),{dispose:function(){r||(r=!0,window.removeEventListener("message",o))}}},e}();t.FrameTransportClient=r},2705:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FrameTransportServer=void 0;var r=function(){function e(e){var t=e.allowedOrigins,n=e.id;this.id=n;for(var r=!1,o=0,a=t;o<a.length;o++){if("*"===a[o]){r=!0,this.allowedOrigins=["*"];break}}r||(this.allowedOrigins=t)}return e.prototype.start=function(e){this.subscription=this.subscribe({callback:e})},e.prototype.stop=function(){this.subscription&&(this.subscription.dispose(),this.subscription=void 0)},e.prototype.send=function(e){var t=e.message,n=e.target,r=e.context;n&&r&&r.origin&&n.postMessage(t,r.origin)},e.prototype.prepareHandle=function(e,t){return{actionType:e,handlerFunc:t}},e.prototype.isEventOriginAllowed=function(e){if(void 0===e)return!0;for(var t=0,n=this.allowedOrigins;t<n.length;t++){var r=n[t];if("*"===r)return!0;if(r===e)return!0}return!1},e.prototype.subscribe=function(e){var t=this,n=e.callback,r=!1,o=function(e){t.isEventOriginAllowed(e.origin)&&e.data&&e.data.meta&&"response"!==e.data.meta.type&&n({message:e.data,source:e.source,context:{origin:e.origin}})};return window.addEventListener("message",o),{dispose:function(){r||(r=!0,window.removeEventListener("message",o))}}},e}();t.FrameTransportServer=r},2706:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},2707:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(2708),t),o(n(2709),t),o(n(2710),t),o(n(2711),t)},2708:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.send=t.subscribe=void 0,t.subscribe=function(e){var t=e.callback,n=!1;function r(e){t(e)}return window.addEventListener("message",r),{dispose:function(){n||(n=!0,window.removeEventListener("message",r))}}},t.send=function(e){var t=e.target,n=e.origin,r=e.message;t.postMessage(r,n)}},2709:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},2710:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{u(r.next(e))}catch(e){a(e)}}function s(e){try{u(r.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.Server=void 0;var a=function(){function e(e){var t=e.transport;this.routes={},this.transport=t}return e.prototype.start=function(){this.transport.start(this.onMessage.bind(this))},e.prototype.stop=function(){this.transport.stop()},e.prototype.response=function(e){var t=e.message,n=e.target,r=e.context;this.transport.send({message:t,target:n,context:r})},e.prototype.handle=function(e,t){var n=this.transport.prepareHandle(e,t),r=n.actionType,o=n.handlerFunc;this.routes[r]=o},e.prototype.onMessage=function(e){var t=e.message,n=e.source,a=e.context;return r(this,void 0,void 0,(function(){var e,r,i,s,u,c;return o(this,(function(o){switch(o.label){case 0:if(!t)return[2];if(!t.meta)return[2];if(e=t.meta.action,!(r=t.meta.messageId)||!e)return[2];if(!(i=this.routes[e]))return[2];s={meta:{action:e,messageId:r,type:"response"}},o.label=1;case 1:return o.trys.push([1,3,,4]),[4,i({message:t,source:n,context:a})];case 2:return u=o.sent(),s.data=u,[3,4];case 3:return c=o.sent(),s.errors=[{message:c.toString()}],[3,4];case 4:return this.response({message:s,target:n,context:a}),[2]}}))}))},e}();t.Server=a},2711:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Client=void 0;var r=n(208),o=n(2712),a=function(){function e(e){var t=e.transport,n=e.defaultTimeoutMilliseconds,r=e.options;this.inflight={},this.connected=!1,this.transport=t,this.defaultTimeoutMilliseconds=n||100;var a=o.LoggingDriverNoop.createService();this.log=a,r&&r.log&&(this.log=r.log)}return e.prototype.connect=function(e){this.connected=!0,this.transport.connect({target:e,onMessage:this.onMessage.bind(this)})},e.prototype.disconnect=function(){this.connected=!1,this.transport.disconnect()},e.prototype.invoke=function(e,t){var n=this,o=void 0===t?{}:t,a=o.data,i=o.options;if(!this.connected)throw new Error("Unable to invoke action; no connection established. Did you remember to call Client.connect()");var s=this.defaultTimeoutMilliseconds,u={};i&&(i.transport&&(u=i.transport),i.timeoutMilliseconds&&(s=i.timeoutMilliseconds));var c=r.v4().toString(),l={data:a,meta:{messageId:c,type:"request",action:e}};return new Promise((function(t,r){var o={resolve:t,reject:r,timeoutId:void 0,action:l.meta.action};n.inflight[""+c]=o,n.log.debug("[@honeyscience/checkout-extension-messaging][Client][->]["+n.transport.getId()+"] ["+l.meta.action+"]",l.data),n.transport.send({message:l,options:u});var a=setTimeout((function(){var t=n.inflight[c];t&&(delete n.inflight[c],t.reject(new Error("Response for '"+e+"' exceeded "+s+"ms")))}),s);o.timeoutId=a}))},e.prototype.onMessage=function(e){var t=e.message;if(t&&t.meta){var n=t.meta.action,r=t.meta.messageId;if(r&&n){var o=this.inflight[r];if(o&&n==o.action){if(delete this.inflight[r],clearTimeout(o.timeoutId),t.errors)return this.log.error("[@honeyscience/checkout-extension-messaging][Client][<-]["+(this.transport.getId()||"unknown")+"] ["+t.meta.action+"]",t.errors),t.errors[0]&&t.errors[0].message?o.reject(new Error(t.errors[0].message)):o.reject(new Error("An unknown error occurred."));this.log.debug("[@honeyscience/checkout-extension-messaging][Client][<-]["+(this.transport.getId()||"unknown")+"] ["+t.meta.action+"]",t.data),o.resolve(t.data)}}}},e}();t.Client=a},2712:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoggingDriverNoop=void 0;var r=n(2713),o=function(){function e(){}return e.createService=function(){return new r.LoggingService({driver:new e})},e.prototype.setLogLevel=function(e){this.logLevel=e},e.prototype.getLogLevel=function(){return this.logLevel},e.prototype.trace=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},e}();t.LoggingDriverNoop=o},2713:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoggingService=void 0;var r=function(){function e(e){var t=e.driver;this.driver=t}return e.prototype.setLogLevel=function(e){this.driver.setLogLevel(e)},e.prototype.getLogLevel=function(){return this.driver.getLogLevel()},e.prototype.debug=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];(e=this.driver).debug.apply(e,t)},e.prototype.info=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];(e=this.driver).info.apply(e,t)},e.prototype.warn=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];(e=this.driver).warn.apply(e,t)},e.prototype.error=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];(e=this.driver).error.apply(e,t)},e}();t.LoggingService=r},2714:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var a=n(2545),i=n(2444),s=n(1066),u=n(2444),c=n(2720),l=function(e){function t(n){var r=e.call(this)||this;return r.servers=[t.configureFromPageToBackgroundServer(n),t.configureFromBackgroundToPageServer(n)],r}return o(t,e),t.configureFromPageToBackgroundServer=function(e){var t=e.messages,n=e.allowedOrigins,r=e.store,o=new a.FrameTransportServer({allowedOrigins:n}),s=new i.HoneyMessagingTransportClient,u={postMessage:function(e){return t.send(e.meta.action,e.data,{ignoreResponse:!0,background:!0})}};return new c.FromPageToBackgroundServer({canPostMessage:u,serverTransport:o,clientTransport:s,store:r})},t.configureFromBackgroundToPageServer=function(e){var t=e.messages,n=e.executeScript,r=e.scriptPath,o=new u.HoneyMessagingTransportServer({target:t});return new c.FromBackgroundToPageServer({serverTransport:o,executeScript:n,scriptPath:r})},t}(s.ManagerBase);t.default=l},2715:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.HoneyMessagingTransportClient=void 0;var o=n(208),a=function(){function e(e){var t=(void 0===e?{}:e).id,n=void 0===t?o.v4().toString():t;this.id=n}return e.prototype.send=function(e){var t,n=e.message,o=e.options;if(!this.platform||!this.messageHandler)throw new Error("No platform available. Did you connect()");var a=o.src;a&&a.tabId&&(t=a.tabId);var i=this.platform.postMessage(n,t);this.messageHandler(r(r({},n),{data:i}))},e.prototype.getId=function(){return this.id},e.prototype.connect=function(e){var t=e.target,n=e.onMessage;if(this.platform)throw new Error("Already connected to platform, please disconnect() before attempting to connect()");this.platform=t,this.subscription=this.subscribe({callback:n})},e.prototype.disconnect=function(){this.platform=void 0},e.prototype.subscribe=function(e){var t=this,n=e.callback,r=!1;if(!this.platform)throw new Error("Unable to subscribe, no port set, did you call connect()?");return this.messageHandler=function(e){if(e&&e.meta&&t.platform){var r={message:e,source:t.platform};n(r)}},{dispose:function(){r||(r=!0,t.platform)}}},e}();t.HoneyMessagingTransportClient=a},2716:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{u(r.next(e))}catch(e){a(e)}}function s(e){try{u(r.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.HoneyMessagingTransportServer=void 0;var a=n(208),i=function(){function e(e){var t=e.id,n=void 0===t?a.v4().toString():t,r=e.target;this.id=n,this.platform=r,this.honeyMessagesListeners={}}return e.prototype.connect=function(){throw new Error("Not Implemented in Servers, please use Server.start()")},e.prototype.disconnect=function(){throw new Error("Not Implemented in Servers, please use Server.stop()")},e.prototype.send=function(e){var t=e.message,n=e.context;n&&(n.result=t.data)},e.prototype.start=function(e){this.messageEnvelopeHandler=e},e.prototype.stop=function(){for(var e=0,t=Object.keys(this.honeyMessagesListeners);e<t.length;e++){var n=t[e];this.honeyMessagesListeners[n].dispose()}this.honeyMessagesListeners={}},e.prototype.prepareHandle=function(e,t){var n=this;if(this.honeyMessagesListeners[e])throw new Error(e+" is already registered.");var i=function(e,t,i){return r(n,void 0,void 0,(function(){var n;return o(this,(function(r){switch(r.label){case 0:if(n={source:{postMessage:function(){return i}},context:{result:null,src:i},message:{meta:{messageId:a.v4().toString(),type:"request",action:e},data:t}},!this.messageEnvelopeHandler)throw new Error("Server was not started, please use Server.start()");return[4,this.messageEnvelopeHandler(n)];case 1:return r.sent(),[2,n.context.result]}}))}))};return this.platform.addListener(e,i),this.honeyMessagesListeners[e]={dispose:function(){return n.platform.removeListener(e,i)}},{actionType:e.toLowerCase(),handlerFunc:t}},e}();t.HoneyMessagingTransportServer=i},2717:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},2718:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.prototype.start=function(){for(var e=0,t=this.servers;e<t.length;e++){t[e].start()}},e.prototype.stop=function(){for(var e=0,t=this.servers;e<t.length;e++){t[e].stop()}},e}();t.default=r},2719:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(){}return e.prototype.start=function(){this.server&&this.server.start()},e.prototype.stop=function(){this.server&&this.server.stop()},e}();t.default=r},2720:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{u(r.next(e))}catch(e){a(e)}}function s(e){try{u(r.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.FromBackgroundToPageServer=t.FromPageToBackgroundServer=void 0;var s=n(2443),u=n(967),c=n(1065),l=n(1066),d=function(e){function t(n){var r=e.call(this)||this;return r.server=t.configureServer(n),r}return o(t,e),t.configureServer=function(e){var t=this,n=e.serverTransport,r=e.clientTransport,o=e.store,l=e.canPostMessage;try{var d=new s.Server({transport:n}),f=new s.Client({transport:r});return f.connect(l),d.handle(c.FRAME_TRANSPORT_ACTIONS.PAGE_TO_CONTENT_EVENT,(function(e){return a(t,void 0,void 0,(function(){var t,n,r,a,s,l,d,p;return i(this,(function(i){switch(i.label){case 0:u.logger.info("[CheckoutObservation] CONTENT: Frame Server: Got Message from PAGE",e),i.label=1;case 1:return i.trys.push([1,3,,4]),t=e.message,n=t.data,r=n.data,a=n.meta,s=a.platform,l=a.provider,d={data:r,meta:{source:s,destination:l,storeId:o.storeId,storeSessionId:o.sessionId,pageTitle:o.pageTitle,pageURL:o.pageURL}},u.logger.info("[CheckoutObservation] CONTENT -> BACKGROUND: Sending message to background",d),[4,f.invoke(c.MESSAGE_ACTIONS.CONTENT_TO_BG_EVENT,{data:d,options:{timeoutMilliseconds:3e4}})];case 2:return i.sent(),[3,4];case 3:return p=i.sent(),u.logger.info("[CheckoutObservation] Failed to invoke CONTENT_TO_BG_EVENT",{error:p}),[3,4];case 4:return[2]}}))}))})),d}catch(e){return u.logger.info("[CheckoutObservation] Failed to configure server",{error:e}),null}},t}(l.ServerBase);t.FromPageToBackgroundServer=d;var f=function(e){function t(n){var r=e.call(this)||this;return r.server=t.configureServer(n),r}return o(t,e),t.configureServer=function(e){var t=this,n=e.serverTransport,r=e.executeScript,o=e.scriptPath;try{var l=new s.Server({transport:n});return l.handle(c.MESSAGE_ACTIONS.COLLECT_DATA,(function(e){return a(t,void 0,void 0,(function(){var t,n,a;return i(this,(function(i){t=e.message;try{u.logger.info("[CheckoutObservation] CONTENT: Got message from background, triggering PAGE",t),n=t.data,a={id:c.SCRIPT_IDS.HONEY_ANALYTICS_CONFIG,data:n},r(o,a)}catch(e){u.logger.info("[CheckoutObservation] Failed to execute observation script",{error:e})}return[2]}))}))})),l}catch(e){return u.logger.info("[CheckoutObservation] Failed to configure server",{error:e}),null}},t}(l.ServerBase);t.FromBackgroundToPageServer=f},2721:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var i=n(2444),s=a(n(2722)),u=n(1066),c=n(2741),l=function(e){function t(n){var r=e.call(this)||this;return r.servers=[t.configureFromContentToBackendServer(n),t.configureFromContentToContentServer(n)],r}return o(t,e),t.configureFromContentToBackendServer=function(e){var t=e.analyticsMetaLoader,n=e.host,r=e.messages,o=e.request,a=new s.default({endpoint:n+"/eca",request:o,analyticsMetaLoader:t}),u=new i.HoneyMessagingTransportServer({target:r});return new c.FromContentToBackendServer({onMessageHandler:a.enqueue,transport:u})},t.configureFromContentToContentServer=function(e){var t=e.messages,n=e.analyticsSensorsFetcher,r=new i.HoneyMessagingTransportServer({target:t}),o=new i.HoneyMessagingTransportClient,a={postMessage:function(e,n){var r={ignoreResponse:!0,tab:n};return t.send(e.meta.action,e.data,r)}};return new c.FromContentToContentServer({onMessageHandler:n,serverTransport:r,clientTransport:o,canPostMessage:a})},t}(u.ManagerBase);t.default=l},2722:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{u(r.next(e))}catch(e){a(e)}}function s(e){try{u(r.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((r=r.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};Object.defineProperty(t,"__esModule",{value:!0});var i=n(208),s=n(2723),u=n(967),c=n(2729),l=function(){function e(e){var t=this,n=e.request,l=e.endpoint,d=e.analyticsMetaLoader;this.enqueue=function(e){return o(t,void 0,void 0,(function(){var t,n,o,s,c;return a(this,(function(a){switch(a.label){case 0:return[4,this.analyticsMetaLoader()];case 1:return t=a.sent(),n=e.data,o=e.meta,s={data:n,meta:r(r(r({},t),o),{timestamp:Date.now()})},c={name:i.v4(),value:s},u.logger.info("[CheckoutObservation] Enqueueing event:",c),this.checkpointStorage.save(c),[2]}}))}))},this.endpoint=l,this.analyticsMetaLoader=d;var f=new s.MemoryStorage,p=new s.JSONStorage({storage:f});this.checkpointStorage=new s.CheckpointJSONStorage({storage:p,checkpointIntervalMilliseconds:1e3,checkpoint:this.checkpoint.bind(this)}),this.saveObservationRepository=new c.RESTURLObservationRepository({endpoint:l,request:n})}return e.prototype.checkpoint=function(e){return o(this,void 0,void 0,(function(){var t,n;return a(this,(function(r){switch(r.label){case 0:if(0===e.length)return[2,[]];t=[],n=[],e.forEach((function(e){t.push(e.name),n.push(e.value)})),r.label=1;case 1:return r.trys.push([1,3,,4]),[4,this.saveObservationRepository.saveURLObservations(n)];case 2:return r.sent(),[2,t];case 3:return r.sent(),[2,[]];case 4:return[2]}}))}))},e}();t.default=l},2723:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(2724),t),o(n(2726),t)},2724:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MemoryStorage=void 0;var r=n(2725);Object.defineProperty(t,"MemoryStorage",{enumerable:!0,get:function(){return r.MemoryStorage}})},2725:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MemoryStorage=void 0;var r=function(){function e(){this.storage={}}return e.prototype.save=function(e){var t=e.name,n=e.value;return this.storage[t]=n,Promise.resolve()},e.prototype.open=function(e){var t=e.name,n=this.storage[t];return Promise.resolve(n)},e.prototype.list=function(){return Promise.resolve(Object.keys(this.storage))},e.prototype.delete=function(e){var t=e.name;return delete this.storage[t],Promise.resolve()},e}();t.MemoryStorage=r},2726:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CheckpointJSONStorage=t.JSONStorage=void 0;var r=n(2727);Object.defineProperty(t,"JSONStorage",{enumerable:!0,get:function(){return r.JSONStorage}});var o=n(2728);Object.defineProperty(t,"CheckpointJSONStorage",{enumerable:!0,get:function(){return o.CheckpointJSONStorage}})},2727:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{u(r.next(e))}catch(e){a(e)}}function s(e){try{u(r.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.JSONStorage=void 0;var a=function(){function e(e){var t=e.storage;this.storage=t}return e.prototype.save=function(e){var t=e.name,n=e.value;return void 0===n?Promise.resolve():this.storage.save({name:t,value:n})},e.prototype.open=function(e){var t=e.name;return r(this,void 0,void 0,(function(){return o(this,(function(e){return[2,this.storage.open({name:t})]}))}))},e.prototype.list=function(){return this.storage.list()},e.prototype.delete=function(e){var t=e.name;return this.storage.delete({name:t})},e}();t.JSONStorage=a},2728:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},o=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{u(r.next(e))}catch(e){a(e)}}function s(e){try{u(r.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((r=r.apply(e,t||[])).next())}))},a=this&&this.__generator||function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.CheckpointJSONStorage=void 0;var i=function(){function e(e){this.options=r({},e)}return e.prototype.start=function(){},e.prototype.stop=function(){this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=void 0)},e.prototype.startTimeout=function(){var e=this;this.options.checkpointIntervalMilliseconds&&(this.timeoutId=setTimeout((function(){e.timeoutId=void 0,e.flush()}),this.options.checkpointIntervalMilliseconds))},e.prototype.registerInterval=function(){this.timeoutId||this.startTimeout()},e.prototype.checkpointComplete=function(){return o(this,void 0,void 0,(function(){return a(this,(function(e){switch(e.label){case 0:return this.isCheckpointing=!1,[4,this.options.storage.list()];case 1:return e.sent().length>0&&this.registerInterval(),[2]}}))}))},e.prototype.flush=function(){return o(this,void 0,void 0,(function(){var e,t,n,r,i,s,u=this;return a(this,(function(c){switch(c.label){case 0:return this.isCheckpointing=!0,[4,(e=this.options.storage).list()];case 1:return t=c.sent(),n=t.map((function(t){return o(u,void 0,void 0,(function(){var n;return a(this,(function(r){switch(r.label){case 0:return[4,e.open({name:t})];case 1:return n=r.sent(),[2,{name:t,value:n}]}}))}))})),[4,Promise.all(n)];case 2:return r=c.sent(),[4,this.options.checkpoint(r)];case 3:i=c.sent(),s=0,c.label=4;case 4:return s<i.length?[4,e.delete({name:i[s]})]:[3,7];case 5:c.sent(),c.label=6;case 6:return s++,[3,4];case 7:return[4,this.checkpointComplete()];case 8:return c.sent(),[2]}}))}))},e.prototype.save=function(e){var t=e.name,n=e.value;return this.timeoutId||this.isCheckpointing||this.startTimeout(),this.options.storage.save({name:t,value:n})},e.prototype.open=function(e){var t=e.name;return this.options.storage.open({name:t})},e.prototype.list=function(){return this.options.storage.list()},e.prototype.delete=function(e){var t=e.name;return this.options.storage.delete({name:t})},e}();t.CheckpointJSONStorage=i},2729:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.HybridURLObservationRepository=t.RESTURLObservationRepository=t.EmbeddedURLObservationRepository=t.GraphQLURLObservationRepository=t.URLObservationService=void 0,o(n(2730),t);var a=n(2731);Object.defineProperty(t,"URLObservationService",{enumerable:!0,get:function(){return a.URLObservationService}});var i=n(2732);Object.defineProperty(t,"GraphQLURLObservationRepository",{enumerable:!0,get:function(){return i.GraphQLURLObservationRepository}});var s=n(2734);Object.defineProperty(t,"EmbeddedURLObservationRepository",{enumerable:!0,get:function(){return s.EmbeddedURLObservationRepository}});var u=n(2737);Object.defineProperty(t,"RESTURLObservationRepository",{enumerable:!0,get:function(){return u.RESTURLObservationRepository}});var c=n(2739);Object.defineProperty(t,"HybridURLObservationRepository",{enumerable:!0,get:function(){return c.HybridURLObservationRepository}})},2730:function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.ReversedURLObservationEncoding=t.URLObservationEncoding=void 0,function(e){e.Form="application/x-www-form-urlencoded",e.Json="application/json"}(r=t.URLObservationEncoding||(t.URLObservationEncoding={})),t.ReversedURLObservationEncoding=Object.keys(r).reduce((function(e,t){return e[r[t]]=t,e}),{})},2731:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.URLObservationService=void 0;var r=function(){function e(e){var t=e.repository;this.repository=t}return e.prototype.getURLPatterns=function(e){var t=e.storeId;return this.repository.getURLPatterns({storeId:t})},e.prototype.saveURLObservations=function(e){return this.repository.saveURLObservations(e)},e}();t.URLObservationService=r},2732:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GraphQLURLObservationRepository=void 0;var r=n(2733);Object.defineProperty(t,"GraphQLURLObservationRepository",{enumerable:!0,get:function(){return r.GraphQLURLObservationRepository}})},2733:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{u(r.next(e))}catch(e){a(e)}}function s(e){try{u(r.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.GraphQLURLObservationRepository=void 0;var a=function(){function e(e){var t=e.client;this.client=t}return e.prototype.getURLPatterns=function(e){var t=e.storeId;return r(this,void 0,void 0,(function(){var e,n,r,a;return o(this,(function(o){switch(o.label){case 0:e="checkout_getURLObservationPatterns",n={params:{storeId:t,enabled:!0}},o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.client.query(e,n)];case 2:return r=o.sent(),a=r.data,r.errors||!a?[2,[]]:[2,a.eventDetectionGetURLObservationPatterns||[]];case 3:return o.sent(),[2,[]];case 4:return[2]}}))}))},e.prototype.saveURLObservations=function(e){return r(this,void 0,void 0,(function(){var t,n,r;return o(this,(function(o){switch(o.label){case 0:t="checkout_eventDetectionReceiveURLObservations",n={params:{observations:e}},o.label=1;case 1:return o.trys.push([1,3,,4]),[4,this.client.mutate(t,n)];case 2:return o.sent(),[3,4];case 3:return r=o.sent(),console.error("[GraphQL] URL Save Observation",r),[2,Promise.resolve()];case 4:return[2]}}))}))},e}();t.GraphQLURLObservationRepository=a},2734:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EmbeddedURLObservationRepository=void 0;var r=n(2735);Object.defineProperty(t,"EmbeddedURLObservationRepository",{enumerable:!0,get:function(){return r.EmbeddedURLObservationRepository}})},2735:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.EmbeddedURLObservationRepository=void 0;var o=r(n(2736)),a=n(967),i=function(){function e(){}return e.prototype.getURLPatterns=function(e){var t=e.storeId;a.logger.info("Fetching URL Patterns for "+t);var n=o.default[t];if(!n)return Promise.resolve([]);var r=n.urls.filter((function(e){return e.enabled})).map((function(e){return{pattern:e.pattern,encoding:e.encoding,include:e.include,filter:e.filter}}));return Promise.resolve(r)},e.prototype.saveURLObservations=function(e){return a.logger.info("Sending Observations",e),Promise.resolve()},e}();t.EmbeddedURLObservationRepository=i},2736:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={"7703020760979500833":{storeName:"49th Coffee",urls:[{label:"Google Analytics",enabled:!0,pattern:"https://www.google-analytics.com/*",encoding:"application/x-www-form-urlencoded",include:[{key:"cu"},{key:"pa"},{key:"pr#nm"},{key:"pr#br"},{key:"pr#pr"},{key:"pr#id"},{key:"pr#qt"},{key:"tr"},{key:"tt"},{key:"ts"}],filter:{request:{method:"GET"},data:'$[?(@property === "data" && @.pa === "purchase")]'}}]},133:{storeName:"Nordstroms",urls:[{label:"Google Analytics",enabled:!0,pattern:"https://www.google-analytics.com/*",encoding:"application/x-www-form-urlencoded",include:[{key:"pa"},{key:"pr#id"},{key:"pr#nm"},{key:"pr#br"},{key:"pr#pr"},{key:"pr#qt"},{key:"tr"},{key:"tt"},{key:"ts"}],filter:{request:{method:"GET"},data:'$[?(@property === "data" && @.pa)]'}}]},30:{storeName:"BH Photo",urls:[{label:"Google Analytics",enabled:!0,pattern:"https://www.google-analytics.com/*",encoding:"application/x-www-form-urlencoded",include:[{key:"pa"},{key:"pr#id"},{key:"pr#nm"},{key:"pr#br"},{key:"pr#pr"},{key:"pr#qt"},{key:"tr"},{key:"tt"},{key:"ts"}],filter:{request:{method:"GET"},data:'$[?(@property === "data" && @.pa)]'}}]},"7512623001795621936":{storeName:"chewy.com",urls:[{label:"Google Analytics",enabled:!0,pattern:"https://www.google-analytics.com/*",encoding:"application/x-www-form-urlencoded",include:[{key:"pa"},{key:"pr#id"},{key:"pr#nm"},{key:"pr#br"},{key:"pr#pr"},{key:"pr#qt"},{key:"tr"},{key:"tt"},{key:"ts"}],filter:{data:'$[?(@property === "data" && @.pa === "purchase")]'}}]},185:{storeName:"Target",urls:[{label:"Target Analytics",enabled:!0,pattern:"https://api.target.com/web_analytics/v1",encoding:"application/json",filter:{request:{method:"POST"},data:"$..records[?(@.checkout)]"},include:[{key:"appState.globalPage"},{key:"appState.pageName"},{key:"appState.pageType"},{key:"appState.previousPageName"},{key:"appState.previousPageType"},{key:"appState.previousSearchTerm"},{key:"appState.referrer"},{key:"appState.cmsPageType"},{key:"checkout"},{key:"products"}]}]},"149870454361909889":{storeName:"Kylie Cosmetics",urls:[{label:"Google Analytics",enabled:!0,pattern:"https://www.google-analytics.com/*",encoding:"application/x-www-form-urlencoded",include:[{key:"pa"},{key:"pr#id"},{key:"pr#nm"},{key:"pr#br"},{key:"pr#pr"},{key:"pr#qt"},{key:"tr"},{key:"tt"},{key:"ts"}],filter:{request:{method:"GET"},data:'$[?(@property === "data" && @.pa)]'}}]}}},2737:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RESTURLObservationRepository=void 0;var r=n(2738);Object.defineProperty(t,"RESTURLObservationRepository",{enumerable:!0,get:function(){return r.RESTURLObservationRepository}})},2738:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{u(r.next(e))}catch(e){a(e)}}function s(e){try{u(r.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.RESTURLObservationRepository=void 0;var a=function(){function e(e){var t=e.endpoint,n=e.request;this.endpoint=t,this.request=n}return e.prototype.getURLPatterns=function(e){e.storeId;return r(this,void 0,void 0,(function(){return o(this,(function(e){throw new Error("Not Implemented")}))}))},e.prototype.saveURLObservations=function(e){return r(this,void 0,void 0,(function(){return o(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,this.request.post(this.endpoint).send(e)];case 1:return t.sent(),[3,3];case 2:return t.sent(),[2];case 3:return[2]}}))}))},e}();t.RESTURLObservationRepository=a},2739:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HybridURLObservationRepository=void 0;var r=n(2740);Object.defineProperty(t,"HybridURLObservationRepository",{enumerable:!0,get:function(){return r.HybridURLObservationRepository}})},2740:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HybridURLObservationRepository=void 0;var r=function(){function e(e){var t=e.saveObservationRepository,n=e.getPatternsRepository;this.saveObservationRepository=t,this.getPatternsRepository=n}return e.prototype.getURLPatterns=function(e){var t=e.storeId;return this.getPatternsRepository.getURLPatterns({storeId:t})},e.prototype.saveURLObservations=function(e){return this.saveObservationRepository.saveURLObservations(e)},e}();t.HybridURLObservationRepository=r},2741:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{u(r.next(e))}catch(e){a(e)}}function s(e){try{u(r.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((r=r.apply(e,t||[])).next())}))},i=this&&this.__generator||function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.FromContentToBackendServer=t.FromContentToContentServer=void 0;var s=n(2443),u=n(967),c=n(1065),l=n(1066),d=function(e){function t(n){var r=e.call(this)||this;return r.server=t.configureServer(n),r}return o(t,e),t.configureServer=function(e){var t=this,n=e.onMessageHandler,r=e.transport;try{var o=new s.Server({transport:r});return o.handle(c.MESSAGE_ACTIONS.CONTENT_TO_BG_EVENT,(function(e){return a(t,void 0,void 0,(function(){var t,r,o;return i(this,(function(a){switch(a.label){case 0:u.logger.info("[CheckoutObservation] CONTENT -> BACKGROUND: Port Server: Received req",e),t=e.message,r=t.data,u.logger.info("[CheckoutObservation] CONTENT -> BACKGROUND: Port Server: Received message",r),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,n(r)];case 2:return a.sent(),[3,4];case 3:return o=a.sent(),u.logger.info("[CheckoutObservation] Failed to handle message from content",{error:o}),[3,4];case 4:return[2]}}))}))})),o}catch(e){return u.logger.info("[CheckoutObservation] Failed configure server",{error:e}),null}},t}(l.ServerBase);t.FromContentToBackendServer=d;var f=function(e){function t(n){var r=e.call(this)||this;return r.server=t.configureServer(n),r}return o(t,e),t.configureServer=function(e){var t=this,n=e.canPostMessage,r=e.serverTransport,o=e.clientTransport,l=e.onMessageHandler;try{var d=new s.Client({transport:o});d.connect(n);var f=new s.Server({transport:r});return f.handle(c.MESSAGE_ACTIONS.ENABLE_BG_SERVER,(function(e){return a(t,void 0,void 0,(function(){var t,n,r,o,a,s;return i(this,(function(i){switch(i.label){case 0:t=e.message,n=e.context,i.label=1;case 1:return i.trys.push([1,4,,5]),(r=t.data)&&r.storeId?(o=r.storeId,[4,l(o)]):[2];case 2:return(a=i.sent())&&a.length?(u.logger.info("[CheckoutObservation] BACKGROUND -> CONTENT: Trigger content with provider",a),[4,d.invoke(c.MESSAGE_ACTIONS.COLLECT_DATA,{data:a,options:{timeoutMilliseconds:3e3,transport:n}})]):[2];case 3:return i.sent(),[3,5];case 4:return s=i.sent(),u.logger.info("[CheckoutObservation] Failed to trigger content",{error:s}),[3,5];case 5:return[2]}}))}))})),f}catch(e){return u.logger.info("[CheckoutObservation] Failed configure server",{error:e}),null}},t}(l.ServerBase);t.FromContentToContentServer=f},2742:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isObservationFeatureEnabled=s;var r,o=n(57),a=(r=o)&&r.__esModule?r:{default:r};var i=(0,n(74).makeDuration)({minutes:15});function s(){return a.default.getFeatureFlag("checkout_analytics_observation_v_2",{ttl:i})}t.default={isObservationFeatureEnabled:s}},2743:function(e,t,n){"use strict";var r,o=l(n(2547)),a=l(n(2445)),i=l(n(2544)),s=l(n(2762)),u=l(n(57)),c=l(n(1047));function l(e){return e&&e.__esModule?e:{default:e}}i.default.start(),o.default.start(),(r=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.default.getFeatureFlag("honey_checkout_spb_refactor_enabled");case 2:e.sent?c.default.start():(s.default.start(),a.default.start());case 4:case"end":return e.stop()}}),e,void 0)})),function(){var e=r.apply(this,arguments);return new Promise((function(t,n){return function r(o,a){try{var i=e[o](a),s=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(s).then((function(e){r("next",e)}),(function(e){r("throw",e)}));t(s)}("next")}))})()},2744:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(8),a=(r=o)&&r.__esModule?r:{default:r},i=n(574);var s={paypalCheckoutDetected:function(){throw new Error("checkoutEvents: not initialized")}};var u={initialize:function(){var e=new i.Observable({value:void 0,replay:!0});s.paypalCheckoutDetected=function(){return e}}};t.default={initialize:function(){u.initialize(),u.initialize=function(){a.default.warn("checkoutEvents: events: previously initialized")}},events:s}},2745:function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.LoggingDriverExtension=void 0;var o=n(1049),a=n(2746),i={100:a.LogLevel.Trace,200:a.LogLevel.Debug,300:a.LogLevel.Info,400:a.LogLevel.Warn,500:a.LogLevel.Error},s=((r={})[a.LogLevel.Trace]=100,r[a.LogLevel.Debug]=200,r[a.LogLevel.Info]=300,r[a.LogLevel.Warn]=400,r[a.LogLevel.Error]=500,r),u=function(){function e(e){var t=e.honeyLogger;this.honeyLogger=t}return e.createService=function(t){var n=t.honeyLogger;return new o.LoggingService({driver:new e({honeyLogger:n})})},e.prototype.setLogLevel=function(e){this.honeyLogger.setLevel(s[e])},e.prototype.getLogLevel=function(){return i[this.honeyLogger.getLevel()]},e.prototype.trace=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];(e=this.honeyLogger).trace.apply(e,t)},e.prototype.debug=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];(e=this.honeyLogger).debug.apply(e,t)},e.prototype.info=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];(e=this.honeyLogger).info.apply(e,t)},e.prototype.warn=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];(e=this.honeyLogger).warn.apply(e,t)},e.prototype.error=function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];(e=this.honeyLogger).error.apply(e,t)},e}();t.LoggingDriverExtension=u},2746:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LogLevel=void 0,function(e){e[e.None=-1]="None",e[e.Error=0]="Error",e[e.Warn=1]="Warn",e[e.Info=2]="Info",e[e.Debug=3]="Debug",e[e.Trace=4]="Trace"}(t.LogLevel||(t.LogLevel={}))},2747:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ContentCoordinator=void 0;var r=n(2548),o=n(2748),a=n(2749),i=function(){function e(e){var t=e.log,n=e.backgroundClient,r=e.honeyCheckoutServer,o=e.paypalCheckoutClient;this.paypalClientConnected=!1,this.log=t,this.backgroundClient=n,this.honeyCheckoutServer=this.configureHoneyCheckoutServer(r),this.paypalCheckoutClient=o}return e.prototype.connectPayPalFrame=function(e){var t=e.target;this.paypalCheckoutClient.connect(t),this.paypalClientConnected=!0},e.prototype.start=function(){this.log.debug("[CheckoutPaypal] Starting content coordinator"),this.honeyCheckoutServer.start()},e.prototype.stop=function(){this.paypalClientConnected=!1,this.paypalCheckoutClient.disconnect(),this.honeyCheckoutServer.stop()},e.prototype.configureHoneyCheckoutServer=function(e){var t=this;return e.handle(r.HoneyCheckoutAction.PayPalCreateOrder,(function(e){if(!t.paypalClientConnected)throw new Error("[CheckoutPaypal] Unable to invoke 'PayPal CreateOrder', PayPal client not connected. Did discovery fail?");return t.paypalCheckoutClient.invoke(o.PayPalCheckoutAction.CreateOrder,{options:{timeoutMilliseconds:a.config.paypal.createOrderTimeoutMilliseconds}})})),e.handle(r.HoneyCheckoutAction.PayPalApproveOrder,(function(e){if(!t.paypalClientConnected)throw new Error("[CheckoutPaypal] Unable to invoke 'PayPal Approve', PayPal client not connected. Did discovery fail?");return t.paypalCheckoutClient.invoke(o.PayPalCheckoutAction.ApproveOrder,{data:e.message.data})})),e.handle(r.HoneyCheckoutAction.PayPalCancelOrder,(function(e){if(!t.paypalClientConnected)throw new Error("[CheckoutPaypal] Unable to invoke 'PayPal Cancel', PayPal client not connected. Did discovery fail?");return t.paypalCheckoutClient.invoke(o.PayPalCheckoutAction.CancelOrder,{data:e.message.data})})),e.handle(r.HoneyCheckoutAction.PayPalErrorOrder,(function(e){if(!t.paypalClientConnected)throw new Error("[CheckoutPaypal] Unable to invoke 'PayPal Error', PayPal client not connected. Did discovery fail?");return t.paypalCheckoutClient.invoke(o.PayPalCheckoutAction.ErrorOrder,{data:e.message.data})})),e.handle(r.HoneyCheckoutAction.PayPalConfig,(function(e){if(!t.paypalClientConnected)throw new Error("Unable to invoke 'PayPal Config', PayPal client not connected. Did discovery fail?");return t.paypalCheckoutClient.invoke(o.PayPalCheckoutAction.PayPalConfig)})),e.handle(r.HoneyCheckoutAction.PayPalVersion,(function(e){if(!t.paypalClientConnected)throw new Error("Unable to invoke 'version', PayPal client not connected. Did discovery fail?");return t.paypalCheckoutClient.invoke(o.PayPalCheckoutAction.Version)})),e.handle(r.HoneyCheckoutAction.PayPalGuestEnabled,(function(e){if(console.log("server.handle HoneyCheckoutAction.PayPalGuestEnabled"),!t.paypalClientConnected)throw new Error("Unable to invoke 'guestEnabled', PayPal client not connected. Did discovery fail?");return t.paypalCheckoutClient.invoke(o.PayPalCheckoutAction.PayPalGuestEnabled,{data:e.message.data})})),e.handle(r.HoneyCheckoutAction.PayPalGetFacilitatorAccessToken,(function(e){if(console.log("server.handle HoneyCheckoutAction.PayPalGetFacilitatorAccessToken"),!t.paypalClientConnected)throw new Error("Unable to invoke 'getFacilitatorAccessToken', PayPal client not connected. Did discovery fail?");return t.paypalCheckoutClient.invoke(o.PayPalCheckoutAction.PayPalGetFacilitatorAccessToken)})),e.handle(r.HoneyCheckoutAction.HoneyCheckoutIFrameComplete,(function(e){return t.stop(),Promise.resolve()})),e},e}();t.ContentCoordinator=i},2748:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.PayPalCheckoutServer=t.PayPalCheckoutAction=void 0;var a=n(410);!function(e){e.CreateOrder="a5cf9562-f334-41c3-aa9c-cf07aaa24cbe/paypal/order/create",e.ApproveOrder="a5cf9562-f334-41c3-aa9c-cf07aaa24cbe/paypal/order/approve",e.CancelOrder="a5cf9562-f334-41c3-aa9c-cf07aaa24cbe/paypal/order/cancel",e.ErrorOrder="a5cf9562-f334-41c3-aa9c-cf07aaa24cbe/paypal/order/error",e.PayPalConfig="a5cf9562-f334-41c3-aa9c-cf07aaa24cbe/paypal/order/config",e.Version="a5cf9562-f334-41c3-aa9c-cf07aaa24cbe/paypal/order/version",e.PayPalGuestEnabled="a5cf9562-f334-41c3-aa9c-cf07aaa24cbe/paypal/order/guest",e.PayPalGetFacilitatorAccessToken="a5cf9562-f334-41c3-aa9c-cf07aaa24cbe/paypal/order/gfat"}(t.PayPalCheckoutAction||(t.PayPalCheckoutAction={}));var i=function(e){function t(t){return e.call(this,t)||this}return o(t,e),t}(a.Server);t.PayPalCheckoutServer=i},2749:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.config=void 0;t.config={honey:{clientTimeoutMilliseconds:5e3,discoveryTimeoutMilliseconds:5e3,createOrderTimeoutMilliseconds:3e4},paypal:{clientTimeoutMilliseconds:5e3,discoveryTimeoutMilliseconds:5e3,createOrderTimeoutMilliseconds:3e4}}},2750:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.PayPalCheckoutClient=void 0;var a=function(e){function t(t){return e.call(this,t)||this}return o(t,e),t}(n(410).Client);t.PayPalCheckoutClient=a},2751:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.BackgroundClient=void 0;var a=function(e){function t(t){return e.call(this,t)||this}return o(t,e),t}(n(410).Client);t.BackgroundClient=a},2752:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.HoneyMessagingTransportClient=t.dataSentinel=void 0;var o=n(208);t.dataSentinel={};var a=function(){function e(e){var t=(void 0===e?{}:e).id,n=void 0===t?o.v4().toString():t;this.id=n}return e.makeTransportInterop=function(e){var t=e.honeyMessages,n=e.options,r=n.ignoreResponse,o=n.background,a=n.frameId,i=n.tabId;return{postMessage:function(e){var n={ignoreResponse:r,background:o,frameId:a,tab:i};return t.send(e.meta.action,e.data,n)}}},e.prototype.send=function(e){var n,o=e.message,a=e.options;if(!this.platform||!this.messageHandler)throw new Error("No platform available. Did you connect()");var i=a.src;i&&i.tabId&&(n=i.tabId),void 0===o.data&&(o.data=t.dataSentinel);var s=this.platform.postMessage(o,n);this.messageHandler(r(r({},o),{data:s}))},e.prototype.getId=function(){return this.id},e.prototype.connect=function(e){var t=e.target,n=e.onMessage;if(this.platform)throw new Error("Already connected to platform, please disconnect() before attempting to connect()");this.platform=t,this.subscription=this.subscribe({callback:n})},e.prototype.disconnect=function(){this.platform=void 0},e.prototype.subscribe=function(e){var t=this,n=e.callback,r=!1;if(!this.platform)throw new Error("Unable to subscribe, no port set, did you call connect()?");return this.messageHandler=function(e){if(e&&e.meta&&t.platform){var r={message:e,source:t.platform};n(r)}},{dispose:function(){r||(r=!0,t.platform)}}},e}();t.HoneyMessagingTransportClient=a},2753:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,a){function i(e){try{u(r.next(e))}catch(e){a(e)}}function s(e){try{u(r.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(i,s)}u((r=r.apply(e,t||[])).next())}))},o=this&&this.__generator||function(e,t){var n,r,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}};Object.defineProperty(t,"__esModule",{value:!0}),t.HoneyMessagingTransportServer=void 0;var a=n(208),i=function(){function e(t){var n=t.id,r=void 0===n?a.v4().toString():n,o=t.target,i=t.responseTimeoutMilliseconds;this.honeyMessagesResponses={},this.id=r,this.platform=o,this.honeyMessagesListeners={},this.responseTimeoutMilliseconds=i||e.defaultResponseTimeoutMilliseconds}return e.prototype.connect=function(){throw new Error("Not Implemented in Servers, please use Server.start()")},e.prototype.disconnect=function(){throw new Error("Not Implemented in Servers, please use Server.stop()")},e.prototype.send=function(e){var t=e.message,n=e.context;n&&n.messageId&&(n.result=t.data,this.completeResponse(n))},e.prototype.completeResponse=function(e){var t=this.honeyMessagesResponses[e.messageId];t&&(t.resolve(e.result),this.flushResponse(e.messageId))},e.prototype.start=function(e){this.messageEnvelopeHandler=e},e.prototype.stop=function(){for(var e=0,t=Object.keys(this.honeyMessagesListeners);e<t.length;e++){var n=t[e];this.honeyMessagesListeners[n].dispose()}this.honeyMessagesListeners={}},e.prototype.flushResponse=function(e){var t=this.honeyMessagesResponses[e];if(t)return clearTimeout(t.timeoutId),delete this.honeyMessagesResponses[e],t},e.prototype.prepareHandle=function(e,t){var n=this;if(this.honeyMessagesListeners[e])throw new Error(e+" is already registered.");var i=function(e,t,i){return r(n,void 0,void 0,(function(){var n,r,s,u,c=this;return o(this,(function(o){switch(o.label){case 0:if(n=a.v4().toString(),r={source:{postMessage:function(){return i}},context:{result:null,src:i,messageId:n},message:{meta:{messageId:n,type:"request",action:e},data:t}},!this.messageEnvelopeHandler)throw new Error("Server was not started, please use Server.start()");return s={timeoutId:setTimeout((function(){var e=c.flushResponse(n);e&&e.reject(new Error("honey messaging transport: response timeout: exceeded "+c.responseTimeoutMilliseconds+"ms"))}),this.responseTimeoutMilliseconds),resolve:function(e){},reject:function(e){},promise:Promise.resolve(void 0)},u=new Promise((function(e,t){s.resolve=e,s.reject=t})),s.promise=u,this.honeyMessagesResponses[n]=s,r.context.messageId=n,this.messageEnvelopeHandler(r),[4,u];case 1:return[2,o.sent()]}}))}))};return this.platform.addListener(e,i),this.honeyMessagesListeners[e]={dispose:function(){return n.platform.removeListener(e,i)}},{actionType:e.toLowerCase(),handlerFunc:t}},e.defaultResponseTimeoutMilliseconds=3e5,e}();t.HoneyMessagingTransportServer=i},2754:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},2755:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FrameTransportServer=void 0;var r=function(){function e(e){var t=e.allowedOrigins,n=e.id;this.id=n;for(var r=!1,o=0,a=t;o<a.length;o++){if("*"===a[o]){r=!0,this.allowedOrigins=["*"];break}}r||(this.allowedOrigins=t)}return e.prototype.start=function(e){this.subscription=this.subscribe({callback:e})},e.prototype.stop=function(){this.subscription&&(this.subscription.dispose(),this.subscription=void 0)},e.prototype.send=function(e){var t=e.message,n=e.target,r=e.context;n&&r&&r.origin&&n.postMessage(t,r.origin)},e.prototype.prepareHandle=function(e,t){return{actionType:e,handlerFunc:t}},e.prototype.isEventOriginAllowed=function(e){if(void 0===e)return!0;for(var t=0,n=this.allowedOrigins;t<n.length;t++){var r=n[t];if("*"===r)return!0;if(r===e)return!0}return!1},e.prototype.subscribe=function(e){var t=this,n=e.callback,r=!1,o=function(e){t.isEventOriginAllowed(e.origin)&&e.data&&e.data.meta&&"response"!==e.data.meta.type&&n({message:e.data,source:e.source,context:{origin:e.origin}})};return window.addEventListener("message",o),{dispose:function(){r||(r=!0,window.removeEventListener("message",o))}}},e}();t.FrameTransportServer=r},2756:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={messaging:{clientTimeout:5e3,backgroundTimeout:5e3},discovery:{paypalDiscoveryTimeout:15e3},allowedOrigin:"https://www.paypal.com"}},2757:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(8),i=(r=a)&&r.__esModule?r:{default:r};function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var u=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};s(this,e);var r=n.resolve,o=void 0===r?null:r,a=n.flushPeriodMS,i=void 0===a?1e4:a;this.mutationsList=[],this.flushPeriodMS=i,this.resolve=o,this.handlers=[],this.mutationsFound=!1,this.observer=new MutationObserver((function(){t.mutationsFound=!0})),this.intervalId=null,this.store=null,this.started=!1,this.ready=!1}return o(e,[{key:"setReady",value:function(e){this.ready=e}},{key:"isReady",value:function(){return this.ready}},{key:"setResolve",value:function(e){this.resolve=e}},{key:"setObserver",value:function(e){this.observer=e}},{key:"setStore",value:function(e){this.store=e}},{key:"addHandler",value:function(e){this.handlers.push(e)}},{key:"reset",value:function(){this.mutationsFound=!1}},{key:"isInitialized",value:function(){return Boolean(this.handlers.length&&this.resolve&&this.store)}},{key:"start",value:function(){var e=this;if(!this.started){var t;this.started=!0,this.intervalId=setInterval((t=regeneratorRuntime.mark((function t(){var n,r,o,a,s,u,c,l,d,f;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.mutationsFound,e.reset(),!n){t.next=34;break}r=!0,o=!1,a=void 0,t.prev=6,s=e.handlers[Symbol.iterator]();case 8:if(r=(u=s.next()).done){t.next=20;break}return c=u.value,t.next=12,c(e.store);case 12:l=t.sent,d=l.shouldContinue,f=l.data,d||(e.observer.disconnect(),clearInterval(e.intervalId)),f&&(i.default.info("discovery service: discovered via observer"),e.resolve(f));case 17:r=!0,t.next=8;break;case 20:t.next=26;break;case 22:t.prev=22,t.t0=t.catch(6),o=!0,a=t.t0;case 26:t.prev=26,t.prev=27,!r&&s.return&&s.return();case 29:if(t.prev=29,!o){t.next=32;break}throw a;case 32:return t.finish(29);case 33:return t.finish(26);case 34:case"end":return t.stop()}}),t,e,[[6,22,26,34],[27,,29,33]])})),function(){var e=t.apply(this,arguments);return new Promise((function(t,n){return function r(o,a){try{var i=e[o](a),s=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(s).then((function(e){r("next",e)}),(function(e){r("throw",e)}));t(s)}("next")}))}),this.flushPeriodMS);try{var n=document.documentElement||document.body;this.observer.observe(n,{attributes:!1,childList:!0,characterData:!0})}catch(e){i.default.debug("discovery service: observer: failed to start mutation observer",e)}}}}]),e}();t.default=u},2758:function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=this,n=f[e];if(!n)return c.default.notFoundDontContinue;return r=regeneratorRuntime.mark((function e(r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n(r);case 3:return e.abrupt("return",e.sent);case 6:return e.prev=6,e.t0=e.catch(0),o.default.debug("discovery service: discovery handler: failed to discover",e.t0),e.abrupt("return",c.default.notFoundDontContinue());case 10:case"end":return e.stop()}}),e,t,[[0,6]])})),a=function(){var e=r.apply(this,arguments);return new Promise((function(t,n){return function r(o,a){try{var i=e[o](a),s=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(s).then((function(e){r("next",e)}),(function(e){r("throw",e)}));t(s)}("next")}))},function(e){return a.apply(this,arguments)};var r,a};var o=l(n(8)),a=n(74),i=l(n(2759)),s=l(n(2760)),u=l(n(2761)),c=l(n(1067));function l(e){return e&&e.__esModule?e:{default:e}}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=(d(r={},a.CheckoutTypes.VCC,u.default),d(r,a.CheckoutTypes.CartPresentment,i.default),d(r,a.CheckoutTypes.StaticPaypalButton,s.default),r)},2759:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o,a=c(n(19)),i=n(74),s=c(n(168)),u=c(n(1067));function c(e){return e&&e.__esModule?e:{default:e}}t.default=(r=regeneratorRuntime.mark((function e(t){var n,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=(0,s.default)(t,"metadata",{}),!((r=n.checkoutPaypalOptionSel)?u.default.getSingleElement(r):["button","input","div"].find((function(e){return u.default.findElementByTag(e,"paypal")})))){e.next=8;break}return e.next=6,a.default.getCurrent();case 6:return o=e.sent,e.abrupt("return",u.default.foundDontContinue({tabId:o.id,origin:i.CheckoutTypes.CartPresentment}));case 8:return e.abrupt("return",u.default.notFoundDontContinue());case 9:case"end":return e.stop()}}),e,this)})),o=function(){var e=r.apply(this,arguments);return new Promise((function(t,n){return function r(o,a){try{var i=e[o](a),s=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(s).then((function(e){r("next",e)}),(function(e){r("throw",e)}));t(s)}("next")}))},function(e){return o.apply(this,arguments)})},2760:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o,a=c(n(19)),i=n(74),s=c(n(168)),u=c(n(1067));function c(e){return e&&e.__esModule?e:{default:e}}t.default=(r=regeneratorRuntime.mark((function e(t){var n,r,o,c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=(0,s.default)(t,"metadata",{}),r=n.payPalBtnSel){e.next=3;break}return e.abrupt("return",u.default.notFoundDontContinue());case 3:if(o=u.default.getSingleClickableElement(r)){e.next=6;break}return e.abrupt("return",u.default.notFoundDoContinue());case 6:return c=function(){return o.click()},e.next=9,a.default.getCurrent();case 9:return l=e.sent,e.abrupt("return",u.default.foundDontContinue({tabId:l.id,target:c,origin:i.CheckoutTypes.StaticPaypalButton}));case 11:case"end":return e.stop()}}),e,this)})),o=function(){var e=r.apply(this,arguments);return new Promise((function(t,n){return function r(o,a){try{var i=e[o](a),s=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(s).then((function(e){r("next",e)}),(function(e){r("throw",e)}));t(s)}("next")}))},function(e){return o.apply(this,arguments)})},2761:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o,a=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=f(n(168)),s=f(n(23)),u=n(74),c=f(n(19)),l=n(103),d=f(n(1067));function f(e){return e&&e.__esModule?e:{default:e}}t.default=(r=regeneratorRuntime.mark((function e(t){var n,r,o,f,p,h,v;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=(0,i.default)(t,"metadata",{}),r=n.vccCheckoutPage,o=n.honeyPayCartPriceSelector,r&&o){e.next=3;break}return e.abrupt("return",d.default.notFoundDontContinue());case 3:if(0!==(0,s.default)(r).length){e.next=6;break}return e.abrupt("return",d.default.notFoundDoContinue());case 6:return e.next=8,Promise.all([(0,l.getPriceFromSelector)(o),c.default.getCurrent()]);case 8:return f=e.sent,p=a(f,2),h=p[0],v=p[1],e.abrupt("return",d.default.foundDontContinue({tabId:v.id,cartPrice:h,origin:u.CheckoutTypes.VCC}));case 13:case"end":return e.stop()}}),e,this)})),o=function(){var e=r.apply(this,arguments);return new Promise((function(t,n){return function r(o,a){try{var i=e[o](a),s=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(s).then((function(e){r("next",e)}),(function(e){r("throw",e)}));t(s)}("next")}))},function(e){return o.apply(this,arguments)})},2762:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getStoreConfig=void 0;var r,o,a,i,s,u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},c=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},l=(r=A(regeneratorRuntime.mark((function e(t,n){var r,o,a=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0!==window.MutationObserver){e.next=2;break}return e.abrupt("return");case 2:return r=new MutationObserver(A(regeneratorRuntime.mark((function e(){var r,o,i,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([(0,T.getPriceFromSelector)(n),w.default.getCurrent()]);case 2:return r=e.sent,o=c(r,2),i=o[0],s=o[1],e.next=8,I.checkoutAppPostMessenger.request(I.checkoutAppMessageKeys.checkoutCartPriceChange,{cartPrice:i,tabId:s.id,storeId:t.id,storeName:t.name});case 8:case"end":return e.stop()}}),e,a)})))),e.next=5,E.default.waitForElement(n,{timeout:3e3});case 5:try{o=document.querySelector(n),r.observe(o,{characterData:!0,attributes:!1,childList:!0,subtree:!0})}catch(e){m.default.error("Error attaching mutation observer for store",{storeId:t.id,selector:n})}case 6:case"end":return e.stop()}}),e,this)}))),function(e,t){return r.apply(this,arguments)}),d=(o=A(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(L){e.next=4;break}return e.next=3,x.default.initialize();case 3:L=e.sent;case 4:return e.abrupt("return",L);case 5:case"end":return e.stop()}}),e,this)}))),function(){return o.apply(this,arguments)}),f=t.getStoreConfig=(a=A(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,T.getCheckoutStoreConfig)(t);case 2:return r=e.sent,n&&"SUPPORTED"!==r.status&&(0,P.setCheckoutDevToolsExternalState)({isEligible:!1,eligibilityReason:"store-not-enabled",iframeLoaded:!1,storeCheckoutConfig:r}),e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,this)}))),function(e,t){return a.apply(this,arguments)}),p=(i=A(regeneratorRuntime.mark((function e(){var t,n,r,o,a,i,s,p,h,y,_,E,S,R;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([O.default.getInfo(),b.default.getCurrent(),w.default.getCurrent(),(0,T.getCheckoutSetting)(k.checkoutSettingKeys.devToolsEnabled)]);case 2:if(t=e.sent,n=c(t,4),r=n[0],o=n[1],a=n[2],i=n[3],o.id){e.next=10;break}return e.abrupt("return");case 10:return e.prev=10,e.t0=Boolean,e.next=14,(0,T.getExistingCheckoutSessionState)(o.id);case 14:if(e.t1=e.sent,s=(0,e.t0)(e.t1),p=void 0,h=null,y=null,_=[],s){e.next=39;break}return e.next=23,f(o.id,i);case 23:if("SUPPORTED"===(h=e.sent).status){e.next=27;break}return(0,P.setCheckoutDevToolsExternalState)({discovered:h.status}),e.abrupt("return");case 27:return _.push.apply(_,M(h.checkoutTypes)),e.next=30,x.default.startDiscovery(_,a.id);case 30:return y=e.sent,e.next=33,(0,T.honeyCheckoutEligibilityStarted)(o);case 33:if(i&&(0,P.setCheckoutDevToolsExternalState)({discovered:y.origin}),!y||y.origin!==k.CheckoutTypes.SPB){e.next=39;break}return e.next=37,d();case 37:N(p=e.sent,y);case 39:return y&&y.origin===k.CheckoutTypes.VCC&&l(o,o.metadata.honeyPayCartPriceSelector),E=function(e){if(i){var t=e?e.eligibilityReason:"none",n=!!e&&e.isEligible;(0,P.setCheckoutDevToolsExternalState)(u({},e,{eligibilityReason:t,isEligible:n,iframeLoaded:!0}))}},S=D("honeyCheckout"),e.next=44,(0,T.getCheckoutSetting)(k.checkoutSettingKeys.iFrameOriginUrl);case 44:R=e.sent,g.default.render(v.default.createElement(C.default,{SPBCheckoutCoordinator:p,onIFrameLoadedProp:E,iframeSrc:R,store:o,storeCheckoutConfig:h,user:r,discoveryData:y}),S),e.next=51;break;case 48:e.prev=48,e.t2=e.catch(10),m.default.error("Error loading Honey Checkout iframe: "+e.t2);case 51:case"end":return e.stop()}}),e,this,[[10,48]])}))),function(){return i.apply(this,arguments)}),h=(s=A(regeneratorRuntime.mark((function e(){var t,n,r,o,a,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([b.default.getCurrent(),(0,T.getCheckoutSettings)(),S.default.getFeatureFlag("honey_checkout_spb_refactor_enabled")]);case 2:if(t=e.sent,n=c(t,3),r=n[0],o=n[1],a=n[2],F(r)&&o[k.checkoutSettingKeys.devToolsEnabled]){e.next=9;break}return e.abrupt("return");case 9:i=D("honeyCheckoutDevTools"),g.default.render(v.default.createElement(R.default,{store:r,checkoutSettings:o,isRefactorEnabled:a}),i);case 11:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)}),v=j(n(0)),g=j(n(46)),y=n(2549),m=j(n(8)),b=j(n(12)),_=j(n(6)),w=j(n(19)),O=j(n(14)),E=j(n(13)),S=j(n(57)),x=j(n(2445)),k=n(74),T=n(103),C=j(n(2763)),P=n(1052),R=j(P),I=n(2446);function j(e){return e&&e.__esModule?e:{default:e}}function M(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function A(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,n){return function r(o,a){try{var i=t[o](a),s=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(s).then((function(e){r("next",e)}),(function(e){r("throw",e)}));e(s)}("next")}))}}var L=void 0;function D(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"body",n=document.querySelector("#"+e);if(!n){(n=document.createElement("div")).id=e;var r=document.querySelector(t);r.appendChild(n)}return n}function N(e,t){var n=y.HoneyMessagingTransportClient.makeTransportInterop({honeyMessages:_.default,options:{ignoreResponse:!1,background:!0,frameId:t.frameId,tabId:t.tabId}});e.connectPayPalFrame({target:n})}function F(e){return!(!e.id||["270883781864074943","229099436401559906"].includes(e.id))}t.default={start:function(){setTimeout(p,0),setTimeout(h,0)}}},2763:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=n(0),i=P(a),s=P(n(1051)),u=P(n(1)),c=P(n(6)),l=P(n(9)),d=P(n(4)),f=P(n(21)),p=P(n(73)),h=P(n(12)),v=P(n(30)),g=P(n(36)),y=P(n(28)),m=P(n(14)),b=P(n(85)),_=P(n(610)),w=n(17),O=P(n(2445)),E=n(74),S=P(n(19)),x=P(n(57)),k=P(n(2764)),T=n(2446),C=n(103);function P(e){return e&&e.__esModule?e:{default:e}}function R(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function I(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function j(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,n){return function r(o,a){try{var i=t[o](a),s=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(s).then((function(e){r("next",e)}),(function(e){r("throw",e)}));e(s)}("next")}))}}function M(e){var t,n,u=(t=j(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:U&&U.origin===E.CheckoutTypes.StaticPaypalButton&&U.target&&U.target();case 1:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)}),P=(n=j(regeneratorRuntime.mark((function e(){var t,n,r,a,i,c,k,P,N,G,q,W,V=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.checkoutAppPostMessenger.connect({targetWindow:B.current.contentWindow,targetOrigin:A});case 2:return n=null,H.current=T.checkoutAppPostMessenger.bindResponders((R(t={},T.checkoutAppMessageKeys.extensionInitPaypalCoordinator,function(){var e=j(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n&&(n.reject("Cancelled"),n=null),e.prev=1,(n=O.default.startHoneyDiscovery({timeout:t.timeout})).then((function(){M.start()})),e.abrupt("return",!0);case 7:return e.prev=7,e.t0=e.catch(1),e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e,V,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()),R(t,T.checkoutAppMessageKeys.extensionPaypalCoordinatorReady,j(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return",Promise.reject(new Error(T.checkoutAppMessageKeys.extensionInitPaypalCoordinator+" has not been called")));case 2:return e.abrupt("return",n);case 3:case"end":return e.stop()}}),e,V)})))),R(t,T.checkoutAppMessageKeys.parentSendSDataEvent,function(){var e=j(regeneratorRuntime.mark((function e(t){var n,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.requestData,r=n.eventName,o=I(n,["eventName"]),e.next=3,l.default.sendEvent(r,o);case 3:return e.abrupt("return",!0);case 4:case"end":return e.stop()}}),e,V)})));return function(t){return e.apply(this,arguments)}}()),R(t,T.checkoutAppMessageKeys.parentRemoveIFrame,Y),R(t,T.checkoutAppMessageKeys.parentUpdateStyles,K),R(t,T.checkoutAppMessageKeys.parentSetIFrameAttribute,(function(e){return B.current.setAttribute(e.attributeName,e.value),!0})),R(t,T.checkoutAppMessageKeys.parentOpenStaticPaypalButton,u),R(t,T.checkoutAppMessageKeys.parentRemoveIFrameAttribute,(function(e){return B.current.removeAttribute(e.attributeName),!0})),R(t,T.checkoutAppMessageKeys.extensionActivateStoreGold,j(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.default.setStoreTabStandDownStatus(L.id,!1,1);case 2:return e.next=4,h.default.activateStoreGold(L.id,{src:"HoneyCheckout",inPopover:!1});case 4:return t=e.sent,f.default._reduxStore&&f.default._reduxStore.dispatch((0,w.update)(t)),L.standDown&&l.default.sendEvent("ext300006"),e.abrupt("return",!0);case 8:case"end":return e.stop()}}),e,V)})))),R(t,T.checkoutAppMessageKeys.extensionGetIsInExperimentPopulation,(function(e){var t=e.experimentName;return g.default.getIsInExperimentPopulation(t)})),R(t,T.checkoutAppMessageKeys.extensionExperimentsGetVariant,(function(e){var t=e.experimentName;return g.default.getVariant(t)})),R(t,T.checkoutAppMessageKeys.extensionExperimentsTrackImpression,(function(e){var t=e.experimentName;return g.default.trackImpression(t)})),R(t,T.checkoutAppMessageKeys.extensionGetI18nMessage,(function(e){return d.default.getMessage(e.messageName)})),R(t,T.checkoutAppMessageKeys.extensionGetFeatureFlags,(function(e){return Promise.all(e.featureFlags.map(x.default.getFeatureFlag))})),R(t,T.checkoutAppMessageKeys.extensionGetI18nMessages,function(){var e=j(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={},e.next=3,Promise.all(t.messageNames.map(function(){var e=j(regeneratorRuntime.mark((function e(t){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.default.getMessage(t);case 2:r=e.sent,n[t]=r;case 4:case"end":return e.stop()}}),e,V)})));return function(t){return e.apply(this,arguments)}}()));case 3:return e.abrupt("return",n);case 4:case"end":return e.stop()}}),e,V)})));return function(t){return e.apply(this,arguments)}}()),R(t,T.checkoutAppMessageKeys.extensionOpenContentUILocation,(function(e){var t=e.pathname,n=e.query,r=void 0===n?{}:n,o=e.state,a=void 0===o?{}:o,i=e.force,s=void 0===i||i,u=e.feature,c=void 0===u?"honey-checkout":u,l=e.surface,d=void 0===l?"popup":l;return f.default.open({pathname:t,query:r,state:a,force:s,feature:c,surface:d})})),R(t,T.checkoutAppMessageKeys.extensionGetContentUILocation,(function(){return f.default.getLocation()})),R(t,T.checkoutAppMessageKeys.extensionGetContentUIVisible,(function(){return f.default.visible()})),R(t,T.checkoutAppMessageKeys.extensionShowContentUI,(function(){return f.default.show()})),R(t,T.checkoutAppMessageKeys.extensionHideContentUI,(function(){return f.default.hide()})),R(t,T.checkoutAppMessageKeys.extensionGetCurrentStore,function(){var e=j(regeneratorRuntime.mark((function e(t){var n,r=t.filterProps;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=L,r&&(n=(0,_.default)(L,r)),e.abrupt("return",n);case 3:case"end":return e.stop()}}),e,V)})));return function(t){return e.apply(this,arguments)}}()),R(t,T.checkoutAppMessageKeys.extensionGetCurrentPageTypes,(function(){return p.default.getCurrentPageTypes()})),R(t,T.checkoutAppMessageKeys.extensionGetLru,(function(e){var t=e.key,n=e.options;return y.default.get(t,n)})),R(t,T.checkoutAppMessageKeys.extensionSetLru,function(){var e=j(regeneratorRuntime.mark((function e(t){var n,r,o,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.requestData,r=n.key,o=n.value,a=n.maxAge,e.abrupt("return",y.default.set(r,o,a));case 2:case"end":return e.stop()}}),e,V)})));return function(t){return e.apply(this,arguments)}}()),R(t,T.checkoutAppMessageKeys.extensionGetBgLocalStorageItem,(function(e){var t=e.key;return(0,C.getLocalStorageItem)(t)})),R(t,T.checkoutAppMessageKeys.extensionSetBgLocalStorageItem,(function(e){var t=e.key,n=e.value;return(0,C.setLocalStorageItem)(t,n)})),R(t,T.checkoutAppMessageKeys.extensionDeleteBgLocalStorageItem,(function(e){var t=e.key;return(0,C.deleteLocalStorageItem)(t)})),R(t,T.checkoutAppMessageKeys.extensionDeleteLru,(function(e){var t=e.key,n=e.options;return y.default.del(t,n)})),R(t,T.checkoutAppMessageKeys.extensionGQLQuery,function(){var e=j(regeneratorRuntime.mark((function e(t){var n,r,o,a,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.requestData,r=n.operationName,o=n.variables,a=n.config,e.next=3,(0,C.checkoutToBgMessage)(E.checkoutToBgActions.gqlQuery,{operationName:r,variables:o,config:a});case 3:return i=e.sent,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e,V)})));return function(t){return e.apply(this,arguments)}}()),R(t,T.checkoutAppMessageKeys.extensionGQLMutation,function(){var e=j(regeneratorRuntime.mark((function e(t){var n,r,o,a,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.requestData,r=n.operationName,o=n.variables,a=n.config,e.next=3,(0,C.checkoutToBgMessage)(E.checkoutToBgActions.gqlMutation,{operationName:r,variables:o,config:a});case 3:return i=e.sent,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e,V)})));return function(t){return e.apply(this,arguments)}}()),R(t,T.checkoutAppMessageKeys.extensionAuthFetch,(function(e){var t=e.url,n=e.options;return(0,C.checkoutToBgMessage)(E.checkoutToBgActions.authFetch,{url:t,options:n})})),R(t,T.checkoutAppMessageKeys.extensionNativeFetch,(function(e){var t=e.url,n=e.options;return(0,C.checkoutToBgMessage)(E.checkoutToBgActions.fetch,{url:t,options:n})})),R(t,T.checkoutAppMessageKeys.extensionGetUserInfo,(function(){return m.default.getInfo()})),R(t,T.checkoutAppMessageKeys.extensionGetUserOffers,j(regeneratorRuntime.mark((function e(){var t,n,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.default.getInfo();case 2:return t=e.sent,n=t.id,e.next=6,h.default.getCurrent();case 6:return r=e.sent,o=r.id,e.abrupt("return",b.default.getProductOfferActivations(n,o));case 9:case"end":return e.stop()}}),e,V)})))),R(t,T.checkoutAppMessageKeys.extensionGetAllFrameRequestsByTabId,(function(){return(0,C.checkoutToBgMessage)(E.checkoutToBgActions.getAllFrameRequests)})),R(t,T.checkoutAppMessageKeys.extensionClearFrameRequestsForTab,(function(e){var t=e.tabId;return(0,C.checkoutToBgMessage)(E.checkoutToBgActions.clearFrameRequestsForTab,{tabId:t})})),R(t,T.checkoutAppMessageKeys.extensionGetParentTab,(function(){return S.default.getCurrent()})),R(t,T.checkoutAppMessageKeys.extensionExecuteHoneySPBScript,function(){var e=j(regeneratorRuntime.mark((function e(t){var n=t.tabId,r=t.frameId;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,C.checkoutToBgMessage)(E.checkoutToBgActions.executeHoneySPBContentScript,{tabId:n,frameId:r}));case 1:case"end":return e.stop()}}),e,V)})));return function(t){return e.apply(this,arguments)}}()),t)),e.next=6,Promise.all([v.default.getDeviceId(),v.default.getSessionId(),v.default.getSessionId(),S.default.getCurrent()]);case 6:return r=e.sent,a=o(r,4),i=a[0],c=a[1],k=a[2],P=a[3],N=d.default.getCountryCode(),G=d.default.getUILanguage(),q=p.default.getCurrentPageTypes(),e.next=17,T.checkoutAppPostMessenger.request(T.checkoutAppMessageKeys.checkoutInit,{paypalEnv:"production",deviceId:i,deviceSessionId:c,deviceCountryCode:N,deviceLanguage:G,discoveryData:(0,s.default)(U),sessionId:k,storeCheckoutConfig:{config:D},offers:{offers:J,cartProductsWithOffer:Q,productOffersInCartSum:$},iframeUrl:A,storeId:L.id,storeName:L.name,storeApplyCodesComplete:L.applyCodesComplete,storeNumCoupons:L.numCoupons,storeGold:L.gold,pageTypes:q,browser:"ch",extVersion:"14.11.0",parentHref:window.location.href,parentPathname:window.location.pathname,parentOrigin:window.location.origin,tabId:P.id});case 17:W=e.sent,z(!0),(0,C.setHoneyCheckoutEligibilityState)(L.id,W,12e4),F(W);case 21:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)}),M=e.SPBCheckoutCoordinator,A=e.iframeSrc,L=e.store,D=e.storeCheckoutConfig,N=e.user,F=e.onIFrameLoadedProp,U=e.discoveryData,B=(0,a.useRef)(),H=(0,a.useRef)((function(){})),G=(0,a.useRef)(document.querySelector("body")),q=(0,a.useState)(!1),W=o(q,2),V=W[0],z=W[1];function Y(){B.current.remove()}function K(e){var t=e.visible,n=e.lockScrolling,o=e.bodyStyle,a=void 0===o?{}:o,i=e.iframeStyle,s=void 0===i?{}:i;return Object.assign(G.current.style,r({overflow:n?"hidden":"auto"},a)),Object.assign(B.current.style,r({visibility:t?"visible":"hidden"},s)),!0}var X=(0,k.default)(N,L,V),J=X.offers,Q=X.cartProductsWithOffer,$=X.productOffersInCartSum;return(0,a.useEffect)((function(){return H.current()}),[]),(0,a.useEffect)((function(){var e,t,n=(e=j(regeneratorRuntime.mark((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=n&&n.action,e.next=e.t0===E.checkoutToContentActions.openCheckoutModalFS?3:e.t0===E.checkoutToContentActions.openCheckoutModalPSB?5:e.t0===E.checkoutToContentActions.frameRequestComplete?7:8;break;case 3:return f.default.hide(),e.abrupt("return",T.checkoutAppPostMessenger.request(T.checkoutAppMessageKeys.checkoutOpenFromFS));case 5:return f.default.hide(),e.abrupt("return",T.checkoutAppPostMessenger.request(T.checkoutAppMessageKeys.checkoutOpenFromPSB));case 7:return e.abrupt("return",T.checkoutAppPostMessenger.request(T.checkoutAppMessageKeys.checkoutFrameRequestComplete,n.data));case 8:return e.abrupt("return",null);case 9:case"end":return e.stop()}}),e,this)}))),function(t){return e.apply(this,arguments)}),r=(t=j(regeneratorRuntime.mark((function e(t,n){var r,o=n.user;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.checkoutAppPostMessenger.request(T.checkoutAppMessageKeys.checkoutUserUpdate,{user:o,parentHref:window.location.href,parentPathname:window.location.pathname,parentOrigin:window.location.origin});case 2:r=e.sent,(0,C.setHoneyCheckoutEligibilityState)(L.id,r,12e4);case 4:case"end":return e.stop()}}),e,this)}))),function(e,n){return t.apply(this,arguments)});function o(e,t){var n=t.action,r=t.pathname;"location-change"===n&&T.checkoutAppPostMessenger.request(T.checkoutAppMessageKeys.checkoutRouteChange,{pathname:r})}return V?(c.default.addListener(E.checkoutToContent,n),c.default.addListener("user:current:update",r),c.default.addListener("ui:action",o),function(){c.default.removeListener(E.checkoutToContent,n),c.default.removeListener("user:current:update",r),c.default.removeListener("ui:action",o)}):function(){}}),[V]),i.default.createElement("iframe",{ref:B,id:"honeyCheckoutIFrame",title:"Honey Checkout",src:A+"?extVersion=14.11.0",style:{visibility:"hidden"},onLoad:P,scrolling:"no"})}M.propTypes={SPBCheckoutCoordinator:u.default.object.isRequired,iframeSrc:u.default.string.isRequired,store:u.default.object.isRequired,storeCheckoutConfig:u.default.object.isRequired,user:u.default.object.isRequired,onIFrameLoadedProp:u.default.func.isRequired,discoveryData:u.default.object.isRequired},t.default=M},2764:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=n(0),i=l(n(6)),s=l(n(85)),u=l(n(28)),c=n(2446);function l(e){return e&&e.__esModule?e:{default:e}}function d(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,n){return function r(o,a){try{var i=t[o](a),s=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(s).then((function(e){r("next",e)}),(function(e){r("throw",e)}));e(s)}("next")}))}}t.default=function(e,t,n){var l,f=this,p=(0,a.useState)([]),h=o(p,2),v=h[0],g=h[1],y=(0,a.useState)([]),m=o(y,2),b=m[0],_=m[1],w=(0,a.useState)(0),O=o(w,2),E=O[0],S=O[1],x=(0,a.useMemo)((function(){return{offers:v,cartProductsWithOffer:b,productOffersInCartSum:E}}),[v,b,E]),k=(l=d(regeneratorRuntime.mark((function n(r){var o,a,i;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return o=r.updatedCartProductsWithOffer,a=r.updatedProductOffersInCartSum,n.next=3,s.default.getProductOfferActivations(e.id,t.id);case 3:i=n.sent,g(i),_(o),S(a);case 7:case"end":return n.stop()}}),n,f)}))),function(e){return l.apply(this,arguments)});n&&c.checkoutAppPostMessenger.request(c.checkoutAppMessageKeys.checkoutCartContentsDetected,r({},x)),(0,a.useEffect)((function(){d(regeneratorRuntime.mark((function n(){var r,o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=[],o=0,n.prev=2,n.next=5,u.default.get("offers:"+e.id+":"+t.id+":cart");case 5:return r=n.sent,n.next=8,u.default.get("offerGoldBonus:"+t.id);case 8:o=n.sent,n.next=13;break;case 11:n.prev=11,n.t0=n.catch(2);case 13:k({cartProductsWithOfferFromCache:r,productOffersInCartSumFromCache:o});case 14:case"end":return n.stop()}}),n,f,[[2,11]])})))()}),[]);var T,C=(T=d(regeneratorRuntime.mark((function e(t,n){var r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.action,o=n.data,e.t0=r,e.next="cartContentsDetected"===e.t0?4:5;break;case 4:return e.abrupt("return",k({updatedCartProductsWithOffer:o.cartProductsWithOffer,updatedProductOffersInCartSum:o.productOffersInCartSum}));case 5:return e.abrupt("return",null);case 6:case"end":return e.stop()}}),e,f)}))),function(e,t){return T.apply(this,arguments)});return(0,a.useEffect)((function(){return i.default.addListener("offers:action",C),function(){i.default.removeListener("offers:action",C)}}),[i.default,C]),x}},2765:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o,a=(r=regeneratorRuntime.mark((function e(t,n,r){var o,a,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n,e.t0){e.next=5;break}return e.next=4,s.default.getCurrent();case 4:e.t0=e.sent;case 5:return o=e.t0,a=[c,l,d],r&&(a=r),e.next=10,Promise.all(a.map((function(e){return e(t,o)})));case 10:return i=e.sent,e.abrupt("return",i.some((function(e){return e}))&&f(o));case 12:case"end":return e.stop()}}),e,this)})),o=function(){var e=r.apply(this,arguments);return new Promise((function(t,n){return function r(o,a){try{var i=e[o](a),s=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(s).then((function(e){r("next",e)}),(function(e){r("throw",e)}));t(s)}("next")}))},function(e,t,n){return o.apply(this,arguments)}),i=u(n(32)),s=u(n(12));function u(e){return e&&e.__esModule?e:{default:e}}var c=function(e,t){return e.GOLD_REWARDS&&(!t.gold||t.gold&&t.gold.activated)},l=function(e,t){return e&&(e.FIND_SAVINGS||e.GOLD_REWARDS)&&i.default.unix(t.applyCodesComplete).isAfter((0,i.default)().subtract(2,"hours"))},d=function(e){return e&&!e.FIND_SAVINGS},f=function(e){return!e.standDown};t.default={isFsOrGoldAndMoreThanTwoHrs:l,isNotOnFs:d,isOnGoldRewardsOrActivated:c,isPaymentsViewPrioritized:a}},2766:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o,a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},s=(r=R(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,crypto.subtle.generateKey({name:"AES-CBC",length:256},!0,["encrypt","decrypt"]);case 2:M=e.sent,A=crypto.getRandomValues(new Uint8Array(16)),L={name:"AES-CBC",iv:A};case 5:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)}),u=(o=R(regeneratorRuntime.mark((function e(t){var n,r,o,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=j(t),e.next=3,crypto.subtle.decrypt(L,M,n);case 3:return r=e.sent,o=new TextDecoder,a=o.decode(r),e.abrupt("return",a);case 7:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)}),c=n(0),l=k(c),d=k(n(1)),f=k(n(6)),p=k(n(9)),h=k(n(80)),v=n(561),g=k(n(36)),y=k(n(4)),m=k(n(57)),b=k(n(14)),_=k(n(21)),w=k(n(12)),O=n(2550),E=k(n(2767)),S=n(2551),x=k(S);function k(e){return e&&e.__esModule?e:{default:e}}function T(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function P(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}function R(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,n){return function r(o,a){try{var i=t[o](a),s=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(s).then((function(e){r("next",e)}),(function(e){r("throw",e)}));e(s)}("next")}))}}var I="https://cdn.joinhoney.com/gift-cards/index.html";function j(e){for(var t=new ArrayBuffer(2*e.length),n=new Uint16Array(t),r=0,o=e.length;r<o;r+=1)n[r]=e.charCodeAt(r);return t}var M=void 0,A=void 0,L=void 0;function D(e){var t,n=this,r=(t=R(regeneratorRuntime.mark((function e(){var t,n,r,i=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s();case 2:return x.default.setTarget(k.current.contentWindow,I),x.default.beginListening((function(e){return I.match(new RegExp("^("+e+")"))})),j.current=x.default.bindResponders((C(t={},S.gcMessageNames.giftCardsReady,(function(){f.default.send("gift-cards-app:ready",{})})),C(t,S.gcMessageNames.extensionSendSDataEvent,function(){var e=R(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.eventName,r=P(t,["eventName"]),e.next=3,p.default.sendEvent(n,r);case 3:return e.abrupt("return",!0);case 4:case"end":return e.stop()}}),e,i)})));return function(t){return e.apply(this,arguments)}}()),C(t,S.gcMessageNames.extensionRemoveIFrame,ne),C(t,S.gcMessageNames.extensionUpdateStyles,re),C(t,S.gcMessageNames.extensionExperimentsGetVariant,(function(e){return g.default.getVariant(e.variantName)})),C(t,S.gcMessageNames.extensionGetI18nMessage,(function(e){return y.default.getMessage(e.messageName)})),C(t,S.gcMessageNames.extensionSetIFrameAttribute,(function(e){return k.current.setAttribute(e.attributeName,e.value),!0})),C(t,S.gcMessageNames.extensionRemoveIFrameAttribute,(function(e){return k.current.removeAttribute(e.attributeName),!0})),C(t,S.gcMessageNames.extensionSetGiftCardsEnabledForUser,(function(e){return b.default.updateSetting("honeyWallet",e.enabled?1:0)})),C(t,S.gcMessageNames.extensionOpenLoginPrompt,(function(){return _.default.open({pathname:"/gift-cards-auth",query:{},state:{},force:!0,feature:"gift-cards-auth",surface:"popup"})})),C(t,S.gcMessageNames.extensionHideContentUI,(function(){return _.default.hide()})),C(t,S.gcMessageNames.extensionGetCartPrice,R(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.default.getCurrent();case 2:return t=e.sent,e.next=5,(0,O.getCartPrice)(t);case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e,i)})))),C(t,S.gcMessageNames.extensionSetHoneyStorageItem,function(){var e=R(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.key,r=t.value,e.next=3,h.default.local.set(n,r);case 3:case"end":return e.stop()}}),e,i)})));return function(t){return e.apply(this,arguments)}}()),C(t,S.gcMessageNames.extensionGetHoneyStorageItem,function(){var e=R(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.key,e.next=3,h.default.local.get(n).catch((function(){return null}));case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,i)})));return function(t){return e.apply(this,arguments)}}()),C(t,S.gcMessageNames.extensionRemoveHoneyStorageItem,function(){var e=R(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.key,e.next=3,h.default.local.del(n).catch((function(){return null}));case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,i)})));return function(t){return e.apply(this,arguments)}}()),C(t,S.gcMessageNames.extensionSetWindowLocalStorageItem,function(){var e=R(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.key,r=t.value,e.next=3,f.default.send("honey-pay-now:action:local-storage",{action:v.HONEY_PAY_NOW_MESSAGES.SET_LOCAL_STORAGE_ITEM,data:{key:n,value:r}},{background:!0});case 3:case"end":return e.stop()}}),e,i)})));return function(t){return e.apply(this,arguments)}}()),C(t,S.gcMessageNames.extensionGetWindowLocalStorageItem,function(){var e=R(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.key,e.next=3,f.default.send("honey-pay-now:action:local-storage",{action:v.HONEY_PAY_NOW_MESSAGES.GET_LOCAL_STORAGE_ITEM,data:{key:n}},{background:!0});case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,i)})));return function(t){return e.apply(this,arguments)}}()),C(t,S.gcMessageNames.extensionRemoveWindowLocalStorageItem,function(){var e=R(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.key,e.next=3,f.default.send("honey-pay-now:action:local-storage",{action:v.HONEY_PAY_NOW_MESSAGES.REMOVE_LOCAL_STORAGE_ITEM,data:{key:n}},{background:!0});case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e,i)})));return function(t){return e.apply(this,arguments)}}()),C(t,S.gcMessageNames.extensionGQLQuery,function(){var e=R(regeneratorRuntime.mark((function e(t){var n,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.requestData,!t.encrypted){e.next=6;break}return e.next=4,u(t.requestData);case 4:r=e.sent,n=JSON.parse(r);case 6:return e.next=8,f.default.send("honey-pay-now:action:gql-query",{action:v.HONEY_PAY_NOW_MESSAGES.GQL_QUERY,data:n},{background:!0});case 8:return o=e.sent,e.abrupt("return",o);case 10:case"end":return e.stop()}}),e,i)})));return function(t){return e.apply(this,arguments)}}()),C(t,S.gcMessageNames.extensionGQLMutation,function(){var e=R(regeneratorRuntime.mark((function e(t){var n,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.requestData,!t.encrypted){e.next=6;break}return e.next=4,u(t.requestData);case 4:r=e.sent,n=JSON.parse(r);case 6:return e.next=8,f.default.send("honey-pay-now:action:gql-query",{action:v.HONEY_PAY_NOW_MESSAGES.GQL_MUTATION,data:n},{background:!0});case 8:return o=e.sent,e.abrupt("return",o);case 10:case"end":return e.stop()}}),e,i)})));return function(t){return e.apply(this,arguments)}}()),C(t,S.gcMessageNames.extensionAuth,function(){var e=R(regeneratorRuntime.mark((function e(t){var n,r,o,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.authProvider,r=t.isLoginMode,o=t.isOptOut,e.t0=n,e.next="google"===e.t0?4:"apple"===e.t0?6:"paypal"===e.t0?8:"facebook"===e.t0?10:(e.t0,12);break;case 4:return r?b.default.loginGoogle():b.default.registerGoogle(o),e.abrupt("break",14);case 6:return r?b.default.loginApple():b.default.registerApple(o),e.abrupt("break",14);case 8:return r?b.default.loginPaypal():b.default.registerPaypal(o),e.abrupt("break",14);case 10:return r?b.default.loginFacebook():b.default.registerFacebook(o),e.abrupt("break",14);case 12:a=r?"login":"join",b.default.openEmailAuth(a,"ext",!1,!1);case 14:return e.abrupt("return",null);case 15:case"end":return e.stop()}}),e,i)})));return function(t){return e.apply(this,arguments)}}()),C(t,S.gcMessageNames.extensionGetUserABGroup,R(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.default.getUserABGroup("auth");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e,i)})))),C(t,S.gcMessageNames.extensionGetI18nCountryCode,R(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=y.default.getCountryCode(),e.abrupt("return",t);case 2:case"end":return e.stop()}}),e,i)})))),C(t,S.gcMessageNames.extensionSetIsMinimized,function(){var e=R(regeneratorRuntime.mark((function e(t){var n=t.isMinimized,r=t.savings,o=t.goldAward,a=t.autoPopType;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:te(a),r&&Y(r),o&&Q(o),q(n);case 4:case"end":return e.stop()}}),e,i)})));return function(t){return e.apply(this,arguments)}}()),C(t,S.gcMessageNames.extensionOpenGiftCardDealModal,R(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.default.getCurrent();case 2:t=e.sent,w.default.tag(t.id,"extension_links",null,{forceHidden:!0,src:"GiftCardDealOpenModal"});case 4:case"end":return e.stop()}}),e,i)})))),t)),e.next=7,crypto.subtle.exportKey("jwk",M);case 7:return n=e.sent,e.next=10,x.default.request(S.gcMessageNames.giftCardsInit,a({},o,{jsonRequestKey:n,requestIV:[].concat(T(A)),parentOrigin:window.location.origin}));case 10:r=e.sent,d.current=r;case 12:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)}),o=e.data,d=(0,c.useRef)(!1),k=(0,c.useRef)(),j=(0,c.useRef)((function(){})),L=(0,c.useRef)(document.querySelector("body")),D=(0,c.useState)(null),N=i(D,2),F=N[0],U=N[1],B=(0,c.useState)(!1),H=i(B,2),G=H[0],q=H[1],W=(0,c.useState)(null),V=i(W,2),z=V[0],Y=V[1],K=(0,c.useState)(null),X=i(K,2),J=X[0],Q=X[1],$=(0,c.useState)(null),Z=i($,2),ee=Z[0],te=Z[1];function ne(){j.current(),x.default.stopListening(),k.current.remove()}function re(e){var t=e.visible,n=e.lockScrolling,r=e.bodyStyle,o=void 0===r?{}:r,i=e.iframeStyle,s=void 0===i?{}:i;return Object.assign(L.current.style,a({overflow:n?"hidden":"auto"},o)),Object.assign(k.current.style,a({visibility:t?"visible":"hidden"},s)),!0}(0,c.useEffect)((function(){R(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.default.getFeatureFlag("gift_cards_use_remote_iframe");case 2:t=e.sent,U(t);case 4:case"end":return e.stop()}}),e,n)})))()}),[]),(0,c.useEffect)((function(){return function(){return ne()}}),[]),(0,c.useEffect)((function(){var e,t=(e=R(regeneratorRuntime.mark((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=n&&n.action,e.next=e.t0===v.HONEY_PAY_NOW_MESSAGES.SET_PAY_NOW_MODAL_VISIBILITY?3:e.t0===v.HONEY_PAY_NOW_MESSAGES.REMOVE_PAY_NOW_IFRAME?5:7;break;case 3:return re({visible:n.data.isVisible,lockScrolling:n.data.isVisible}),e.abrupt("break",8);case 5:return ne(),e.abrupt("break",8);case 7:return e.abrupt("break",8);case 8:case"end":return e.stop()}}),e,this)}))),function(t){return e.apply(this,arguments)});function n(e,t){var n=t.user;x.default.request(S.gcMessageNames.giftCardsUserUpdate,n)}return f.default.addListener("honey-pay-now:action:ui",t),f.default.addListener("user:current:update",n),function(){f.default.removeListener("honey-pay-now:action:ui",t),f.default.removeListener("user:current:update",n)}}),[]);return null===F?null:l.default.createElement(c.Fragment,null,G&&l.default.createElement(E.default,{autoPopType:ee,handleUnMinimize:function(){x.default.request(S.gcMessageNames.giftCardsSetIsMinimized,!1),q(!1,ee)},goldAward:J,savings:z}),l.default.createElement("iframe",{ref:k,id:"giftcardsIFrame",title:"Honey Pay Now",src:I,className:null,style:{visibility:"hidden"},onLoad:r,scrolling:"no"}))}D.propTypes={data:d.default.object},D.defaultProps={data:{}},t.default=D},2767:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=n(0),a=d(o),i=d(n(1)),s=n(3),u=n(2),c=n(83),l=d(n(4));function d(e){return e&&e.__esModule?e:{default:e}}var f={root:{display:"flex",position:"fixed",right:"0px",top:"80px",zIndex:2147483647},container:{backgroundColor:u.Colors.white,width:"280px",right:function(e){return e.isExpanded?"0px":"-202px"},transition:"all 400ms ease-in-out",height:"56px",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start",borderRadius:"5px 0px 0px 5px",position:"relative",boxShadow:"0px 2px 35px rgba(0, 0, 0, 0.25)"},icon:{cursor:"pointer",width:"18px",height:"18px",marginLeft:"9px"},dotsContainer:{alignItems:"center",cursor:"move",display:"flex",height:"100%",paddingRight:"9px"},dots:{display:"flex",flexDirection:"column",height:"17px",width:"10px",justifyContent:"space-between",marginLeft:"16px"},dotRow:{width:"100%",display:"flex",justifyContent:"space-between"},dot:{height:"3px",width:"3px",display:"inline-block",borderRadius:"50%",backgroundColor:u.Colors.grey600},content:{cursor:"pointer",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"flex-start",width:"100%"},savingsText:{marginLeft:"18px"},giftCardInfo:{fontSize:"12px"},title:{color:u.Colors.grey900,fontSize:"12px",fontWeight:"600"},savings:{color:u.Colors.green500,fontWeight:"700"},goldAward:{color:u.Colors.gold900,fontWeight:"700"},seeSavings:{color:u.Colors.grey800,composes:"link1"}},p=(0,s.createUseStyles)(f),h=function(e){var t=e.handleUnMinimize,n=e.savings,i=e.goldAward,s=e.autoPopType,u=(0,o.useState)(!1),d=r(u,2),f=d[0],h=d[1],v=p({isExpanded:f}),g=(0,o.createRef)(),y=function(e){return function(){h(e)}},m=function(e){var t=e.changedTouches&&e.changedTouches[0].clientY||e.clientY;(t<0||t>window.innerHeight-56)&&(t=t<0?0:window.innerHeight-56),g.current.style.top=t+"px"};function b(){window.removeEventListener("mousemove",m),window.removeEventListener("mouseup",b)}var _=function(){return n&&!i},w=Number(i).toLocaleString(),O="$"+i/100,E=function(){return!n&&i?l.default.getMessageAndReplace("Get_GOLDINCURRENCY_GOLDPOINTS",{GOLDINCURRENCY:a.default.createElement("span",{className:v.goldAward},O),GOLDPOINTS:a.default.createElement("span",null,w)}):_()?l.default.getMessageAndReplace("Save_SAVINGS_with_a_gift_card",{SAVINGS:a.default.createElement("span",{className:v.savings},(0,c.centsToDollars)(n))}):l.default.getMessageAndReplace("Save_SAVINGS_and_get_Gold",{SAVINGS:a.default.createElement("span",{className:v.savings},(0,c.centsToDollars)(n))})};return a.default.createElement("div",{ref:g,className:v.root},a.default.createElement("div",{className:v.container},a.default.createElement("div",{className:v.dotsContainer,onMouseDown:function(){window.addEventListener("mousemove",m),window.addEventListener("mouseup",b)},onMouseUp:b,onTouchMove:m},a.default.createElement("div",{className:v.dots},a.default.createElement("div",{className:v.dotRow},a.default.createElement("div",{className:v.dot}),a.default.createElement("div",{className:v.dot})),a.default.createElement("div",{className:v.dotRow},a.default.createElement("div",{className:v.dot}),a.default.createElement("div",{className:v.dot})),a.default.createElement("div",{className:v.dotRow},a.default.createElement("div",{className:v.dot}),a.default.createElement("div",{className:v.dot})))),a.default.createElement("div",{className:v.content,onClick:t,onMouseEnter:y(!0),onMouseLeave:y(!1)},a.default.createElement("img",{className:v.icon,src:"https://cdn.honey.io/images/finance/honey-icon-orange.svg",alt:"Open Honey"}),a.default.createElement("div",{className:v.savingsText},"HOOK"===s?a.default.createElement(o.Fragment,null,a.default.createElement("div",{className:v.title},E()),a.default.createElement("div",{className:v.seeSavings},_()?l.default.getMessage("Click_to_see_savings"):l.default.getMessage("Click_to_see_Gift_Card_Deal"))):a.default.createElement("div",{className:v.giftCardInfo},l.default.getMessage("Click_for_gift_card_info"))))))};h.propTypes={handleUnMinimize:i.default.func.isRequired,savings:i.default.number.isRequired,goldAward:i.default.number.isRequired,autoPopType:i.default.string.isRequired},t.default=h},2773:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(1009),a=(r=o)&&r.__esModule?r:{default:r};t.default={getExtensionID:function(){return a.default.getExtensionID()},connect:function(e,t){return a.default.connect(e,t)},addOnConnectListener:function(e){return a.default.addOnConnectListener(e)},removeOnConnnectListener:function(e){return a.default.removeOnConnnectListener(e)}}},2774:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unMountApp=function(e){(0,i.unmountComponentAtNode)(e)};var r,o,a=v(n(0)),i=n(46),s=n(5),u=n(50),c=n(3),l=v(n(170)),d=v(n(2775)),f=v(n(161)),p=v(n(146)),h=n(863);function v(e){return e&&e.__esModule?e:{default:e}}t.default=(r=regeneratorRuntime.mark((function e(){var t,n,r,o,i,v,g,y,m,b;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,l.default)(),n=t.plugins,(r=document.createElement("div")).style="z-index: 2147483647 !important; display:block !important",document.body.appendChild(r),o=r,(i=new MutationObserver((function(e){var t=!0,n=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(t=(a=s.next()).done);t=!0){var u=a.value;"attributes"===u.type&&"style"===u.attributeName&&(i.disconnect(),r.style="z-index: 2147483647 !important; display:block !important")}}catch(e){n=!0,o=e}finally{try{!t&&s.return&&s.return()}finally{if(n)throw o}}}))).observe(o,{attributes:!0,attributeFilter:["style"]}),v="closed",e.next=11,(0,p.default)(r,null,{mode:v,dontInjectFonts:!0});case 11:return g=e.sent,y=new c.SheetsRegistry,(m=(0,u.create)()).setup({plugins:n,insertionPoint:g.getElementById("honey")}),b=a.default.createElement(c.JssProvider,{registry:y,jss:m},a.default.createElement(s.Provider,{store:f.default},a.default.createElement(h.Provider,{value:{shadowContainer:r}},a.default.createElement(d.default,null)))),e.next=18,(0,p.default)(r,b,{mode:v,dontInjectFonts:!0,feature:"honey-tips",surface:"badge"});case 18:return e.abrupt("return",{shadowRoot:g});case 19:case"end":return e.stop()}}),e,this)})),o=function(){var e=r.apply(this,arguments);return new Promise((function(t,n){return function r(o,a){try{var i=e[o](a),s=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(s).then((function(e){r("next",e)}),(function(e){r("throw",e)}));t(s)}("next")}))},function(){return o.apply(this,arguments)})},2775:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=c(r),a=c(n(2776)),i=c(n(2816)),s=c(n(2834)),u=c(n(2835));function c(e){return e&&e.__esModule?e:{default:e}}t.default=function(){return o.default.createElement(r.Fragment,null,o.default.createElement(s.default,null,o.default.createElement(u.default,null,o.default.createElement(a.default,null)),o.default.createElement(i.default,null)))}},2776:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=y(n(0)),a=y(n(8)),i=n(5),s=y(n(2777)),u=y(n(2810)),c=y(n(2814)),l=n(243),d=y(n(386)),f=y(n(2815)),p=n(135),h=n(22),v=n(15),g=n(623);function y(e){return e&&e.__esModule?e:{default:e}}var m={movable:s.default,teaser:u.default,sticky_teaser:s.default,launchpad:c.default,launchpadTeaser:u.default,launchpadBadge:s.default},b="teaser",_="sticky_teaser",w="movable",O="launchpadTeaser",E="launchpadBadge",S="none";t.default=function(){var e=(0,l.useTeaser)(),t=e.teaserDisabled,n=e.showTeaser,s=void 0,u=(0,d.default)()||[],c=(0,f.default)()||!1,y=c.hasValidLaunchpadTips,x=c.hasValidLaunchpadBadgeTips,k=(0,p.useIsStickyTeaser)(),T=r(k,1)[0],C=(0,i.useSelector)(h.selectCurrentContainerId),P=((0,i.useSelector)((0,v.selectUniversalContainerById)(C))||{}).isLaunchpad;if(P&&(!u||!u.length))return null;P?y?x?s=n&&!t?O:E:(a.default.debug("\n        "+g.UNIVERSAL_CONTAINER_LOG_PREFIX+"containerFactory: Could not find tips "+Array.from(g.VALID_LAUNCHPAD_BADGE_TIPS).join(", ")+" so not showing launchpad badge"),s=S):(a.default.debug(g.UNIVERSAL_CONTAINER_LOG_PREFIX+"containerFactory: Could not find tips "+Array.from(g.VALID_LAUNCHPAD_TIPS).join(", ")+" so not showing launchpad"),s=S):s=n&&!t?T?_:b:w;var R=m[s];return R?o.default.createElement(R,{isMini:!0,isLaunchpad:P,isTeaser:n&&!t,isMiniTeaser:!0,isNotification:!1,isFullyExpandedPdp:!0,isMiniEngagement:!0}):null}},2777:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=n(0),a=Z(o),i=Z(n(1)),s=n(5),u=n(3),c=n(37),l=Z(n(71)),d=Z(n(820)),f=Z(n(30)),p=Z(n(4)),h=Z(n(6)),v=Z(n(14)),g=n(219),y=Z(n(325)),m=Z(n(24)),b=Z(n(68)),_=Z(n(135)),w=n(241),O=Z(n(619)),E=n(2),S=Z(n(614)),x=Z(n(1018)),k=n(15),T=Z(n(181)),C=n(18),P=n(243),R=Z(n(1068)),I=Z(n(386)),j=Z(n(244)),M=Z(n(1027)),A=Z(n(841)),L=Z(n(2778)),D=Z(n(2783)),N=Z(n(433)),F=Z(n(2784)),U=Z(n(2785)),B=Z(n(2448)),H=n(16),G=Z(n(2449)),q=Z(n(2450)),W=Z(n(2451)),V=Z(n(2557)),z=Z(n(2791)),Y=Z(n(2559)),K=Z(n(2797)),X=Z(n(2799)),J=Z(n(2560)),Q=Z(n(2801)),$=Z(n(2802));function Z(e){return e&&e.__esModule?e:{default:e}}function ee(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,n){return function r(o,a){try{var i=t[o](a),s=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(s).then((function(e){r("next",e)}),(function(e){r("throw",e)}));e(s)}("next")}))}}var te=[w.TIPS_EXP_ENUM.hover_static_current,w.TIPS_EXP_ENUM.click_static_new,w.TIPS_EXP_ENUM.offer_click_static_new,w.TIPS_EXP_ENUM.any_click_static_new],ne=(0,u.createUseStyles)({middleHeader:{composes:"title1",color:E.Colors.grey900},contentLoading:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},containerLoader:{paddingTop:"60px",backgroundColor:E.Colors.white,display:"flex",justifyContent:"center",alignItems:"center"}}),re=function(){var e=ne();return a.default.createElement("div",{className:e.contentLoading})},oe=function(e){var t=e.isMini,n=e.isMiniTeaser,i=e.isNotification,u=e.isFullyExpandedPdp,Z=e.isTeaser,oe=e.isLaunchpad,ae=(0,s.useDispatch)(),ie=(0,o.createRef)(),se=(0,o.useRef)(),ue=(0,o.useRef)(),ce=(0,o.useRef)(),le=(0,P.useContainerState)(),de=r(le,3),fe=de[0],pe=de[1],he=de[2],ve=(0,P.useContainerOpen)(),ge=r(ve,4),ye=ge[0],me=ge[1],be=ge[2],_e=ge[3],we=(0,Q.default)().enableCloseContainerOnMouseOut,Oe=(0,M.default)(),Ee=r(Oe,2)[1],Se=(0,o.useRef)(!0),xe=(0,j.default)()||{},ke=(0,H.useFeedbackMode)(),Te=r(ke,3),Ce=Te[0],Pe=Te[2],Re=(0,D.default)(),Ie=r(Re,2),je=Ie[0],Me=Ie[1],Ae=(0,I.default)()||[],Le=l.default.getTipsConfigSync().storeIds,De=void 0===Le?[]:Le,Ne=xe.id,Fe=(0,o.useMemo)((function(){return De.every((function(e){return e!==Ne}))}),[Ne,De]),Ue=(0,A.default)(),Be=Ue.showBanner,He=void 0!==Be&&Be,Ge=Ue.copy,qe=Ue.color,We=Ue.ctaAction,Ve=Ue.ctaCopy,ze=(0,o.useState)(),Ye=r(ze,2),Ke=Ye[0],Xe=Ye[1],Je=(0,o.useState)(!1),Qe=r(Je,2),$e=Qe[0],Ze=Qe[1],et=(0,o.useState)(0),tt=r(et,2),nt=tt[0],rt=tt[1],ot=(0,H.useBadgeSnoozed)(),at=(0,H.useFullscreenTipInstance)(),it=ne(),st=(0,o.useState)(),ut=r(st,2),ct=ut[0],lt=ut[1],dt=(0,Y.default)(ie),ft=dt.scrollToCategory,pt=dt.addTipRef,ht=dt.scrollToTop,vt=dt.isScrolling,gt=[],yt=(0,V.default)().startAnimation,mt=(0,_.default)(),bt=r(mt,1)[0],_t=(0,s.useSelector)((0,k.selectCategoryIdsByTipInstanceIds)(Ae)),wt=te.includes(bt),Ot=(0,o.useState)(!0),Et=r(Ot,2),St=Et[0],xt=Et[1];(0,o.useEffect)((function(){ee(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.default.getSetting("hoveredSafariUpdateTooltip");case 2:t=e.sent,xt(t);case 4:case"end":return e.stop()}}),e,void 0)})))()}),[]),(0,o.useEffect)((function(){0!==Ae.length&&(0,C.incrementSessionCount)()}),[Ae]),(0,o.useEffect)((function(){if(oe){var e=m.default.INCREMENT_LAUNCHPAD_TIP_SHOWN_BY_STORE,t={background:!0};he&&Ne&&Se.current&&ye&&ee(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return Se.current=!1,n.next=3,f.default.getSessionId();case 3:return r=n.sent,n.next=6,h.default.send("honeyTips:tips",{action:e,sessionId:r,storeId:Ne},t);case 6:case"end":return n.stop()}}),n,void 0)})))()}}),[he,Ne,Se,me,oe,ye]),(0,o.useEffect)((function(){oe&&ee(regeneratorRuntime.mark((function e(){var t,n,o,a,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!xe.id){e.next=11;break}return e.next=3,Promise.all([v.default.getInfo(),v.default.getUserFollow(),v.default.getStoreSessionCount(xe.id)]);case 3:t=e.sent,n=r(t,3),o=n[0],a=n[1],i=n[2],Xe(o),Ze(a.includes(xe.id)),rt(i);case 11:case"end":return e.stop()}}),e,void 0)})))()}),[xe.id,xe.storeIcon,oe]),(0,o.useEffect)((function(){var e;(e=ee(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ee();case 2:e.sent&&be();case 4:case"end":return e.stop()}}),e,this)}))),function(){return e.apply(this,arguments)})()}),[be,Ee]),(0,o.useLayoutEffect)((function(){var e=setInterval((function(){Ce||at||ie.current&&(ue.current=ie.current.clientHeight)}),100);return function(){e&&clearInterval(e)}}));var kt,Tt=(0,H.useTipInstanceFullscreen)(at),Ct=r(Tt,2)[1],Pt=(0,H.useBottomSheet)(),Rt=r(Pt,2),It=Rt[0],jt=void 0===It?{}:It,Mt=Rt[1],At=(0,H.useTipInstanceBottomSheet)(jt.tipInstanceId),Lt=r(At,1)[0],Dt=void 0===Lt?"":Lt,Nt=b.default.AMAZON_STORES.includes(xe.id),Ft=function(e){var t=e.touches&&e.touches[0].clientY||e.clientY;se.current=!1,Me({dragging:!0,mouseTop:t})},Ut=function(){Me({dragging:!1})},Bt=function(e){var t=e.changedTouches[0].clientY;se.current=t!==je.mouseTop,e.preventDefault()},Ht=(kt=ee(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ke&&Ke.isLoggedIn||v.default.openEmailAuth("login","launchpad-ext",!0),"FOLLOW"==(t=$e?"UNFOLLOW":"FOLLOW")?ae((0,C.storeFollow)()):"UNFOLLOW"===t&&ae((0,C.storeUnfollow)()),e.next=5,v.default.updateUserFollow(xe.id,Ke.id,t);case 5:n=e.sent,Ze(n.includes(xe.id));case 7:case"end":return e.stop()}}),e,void 0)}))),function(){return kt.apply(this,arguments)}),Gt=function(){Pe()};if((0,o.useEffect)((function(){var e=function(){Me({dragging:!1})},t=function(e){se.current=e.clientY!==je.mouseTop};return je.dragging?(wt&&window.addEventListener("mousemove",t),window.addEventListener("mouseup",e)):(wt&&window.removeEventListener("mousemove",t),window.removeEventListener("mouseup",e)),function(){wt&&window.removeEventListener("mousemove",t),window.removeEventListener("mouseup",e)}}),[je.dragging,je.mouseTop,Me,wt]),!pe)return a.default.createElement(o.Fragment,null);var qt,Wt=(qt=(0,z.default)(),a.default.createElement("div",{className:it.containerLoader},a.default.createElement(c.ContainerLoader,{loadingImage:"https://cdn.honey.io/images/tips/coiny_happy_scientist_beakers_transparent.gif",loadingPhrases:qt,marqueeDelay:2e3}))),Vt=oe?!!Ke&&!Ce&&a.default.createElement(g.StoreFollowUI,{inPopover:!1,store:xe,storeFollowButton:a.default.createElement("div",{className:it.followBtnOverrides},a.default.createElement(y.default,{allowTooltip:!1,isFollowing:$e,isHeaderButton:!0,store:{storeId:xe.id,storeName:xe.name},storeSessionCount:nt,subSrc:"launchpad",updateUserFollow:Ht,user:Ke}))}):null,zt=a.default.createElement(o.Fragment,null,Vt,0!==Ae.length?Ae.map((function(e,t){var n=Nt&&t===Ae.length-1,r=Nt?"1px":"0px";return a.default.createElement(W.default,{isFullyExpandedPdp:u,key:""+e,tipInstanceId:e,fullScreenTipInstanceId:at},a.default.createElement("div",{key:e,style:{marginBottom:n?r:"8px"}},a.default.createElement(B.default,null,a.default.createElement("div",{ref:function(t){t&&pt(_t[e],t)}},a.default.createElement(R.default,{hideCaret:!0,isSecondary:t>0,tipInstanceId:e,templateType:"card",scrollToCard:ft,scrollToTop:ht})))))})):Wt),Yt=at&&a.default.createElement("div",{style:{minHeight:ue.current}},at?a.default.createElement(W.default,{key:""+at,tipInstanceId:at},a.default.createElement(R.default,{tipInstanceId:at,templateType:"fullscreen"})):a.default.createElement(c.LoaderGroup,null))||null,Kt=a.default.createElement(B.default,null,a.default.createElement(d.default,{id:Dt,open:jt.isOpen,onClose:Mt,onTransitionEnd:function(){jt.isOpen||ae((0,C.resetBottomSheet)())}},a.default.createElement(R.default,{tipInstanceId:jt.tipInstanceId,templateType:"bottomSheet"}))),Xt=fe?a.default.createElement(re,null):!Ce&&!at&&zt||null,Jt=Ce&&a.default.createElement("div",{style:{minHeight:ue.current}},a.default.createElement(G.default,{isLaunchpad:oe}))||null,Qt=i&&a.default.createElement("div",{style:{position:"absolute",left:10,top:-5,zIndex:1}},a.default.createElement(x.default,null))||null,$t=a.default.createElement(E.NotificationBanner,{show:He,copy:Ge,color:qe,ctaAction:We,ctaCopy:Ve,onClose:function(){return ae((0,C.resetNotificationBanner)())},src:"UniversalContainer-ConnectedMovableContainer",short:!0,stackAbove:!0,zIndex:3}),Zt=void 0;Zt=w.BIG_BADGE_VARIANTS.includes(bt)?a.default.createElement($.default,{openContainer:function(e){wt&&Me({dragging:!1}),ae((0,X.default)(e))&&lt(e),me()},dragging:je.dragging,onClose:function(){return ae((0,C.setBadgeSnooze)())},onMouseOutClose:_e,onDragMouseDown:Ft,onDragMouseUp:Ut,snoozed:ot}):t?a.default.createElement(U.default,{dragging:je.dragging,dragged:se,onMouseDown:Ft,onMouseUp:Ut,onTouchMove:Bt,snoozed:ot,openContainer:function(e){wt&&Me({dragging:!1}),ae((0,X.default)(e))&&lt(e),me()},closeContainer:be,closeContainerOnMouseOut:_e,isStaticContainer:wt,isMiniTeaser:n,isTeaser:Z,notificationBadge:Qt}):a.default.createElement(F.default,{dragging:je.dragging,dragged:se,onMouseDown:Ft,onMouseUp:Ut,onTouchMove:Bt,snoozed:ot,openContainer:me,closeContainer:be});var en=Ae.length>0?Zt:null,tn=Fe?en:Zt;return a.default.createElement(T.default.Provider,{value:{isScrolling:vt,isBadge:!0}},a.default.createElement(L.default,{position:je,isContainerOpen:ye,dragging:je.dragging,onInjectionError:function(e){ae((0,C.sdataTipBadgeInjectionError)(e))},isStaticContainer:wt,container:a.default.createElement("div",{onMouseOver:wt?function(){}:function(){return we(),me()},onMouseLeave:wt?function(){}:function(){at&&at.split(":")[1].includes("DL")?_e(8e3):_e()},ref:function(e){return e&&e.firstChild&&e.firstChild.firstChild&&e.firstChild.firstChild.firstChild&&e.firstChild.firstChild.firstChild.firstChild&&2===e.firstChild.firstChild.firstChild.firstChild.childNodes.length&&gt.push(e.firstChild.firstChild.firstChild.firstChild.childNodes[1]),ce},style:{}},a.default.createElement(K.default,{show:ye&&!ot,onVisible:function(){if(ct&&"string"==typeof ct&&!ct.includes("Main")){var e=ae((0,C.getTipByTipInstanceId)(ct)).categoryId;ft(e)}}},a.default.createElement(c.UniversalContainer,{open:ye&&!ot,"aria-expanded":"true"},a.default.createElement(c.UniversalContainerLayout,{ref:{refContent:ie},header:a.default.createElement(O.default,{leftContainer:a.default.createElement((function(){return Ce?a.default.createElement("span",{onClick:Gt},a.default.createElement(S.default,null)):at?a.default.createElement("span",{onClick:Ct(!1)},a.default.createElement(S.default,null)):a.default.createElement(J.default,{hasUserHovered:St})}),null),middleContainer:a.default.createElement((function(){return at?a.default.createElement("span",{className:it.middleHeader},p.default.getMessage("Droplist")):null}),null),rightContainer:a.default.createElement(q.default,{onClick:function(){ae((0,C.tipContainerActionsClose)())},onSettingsClick:function(){}})}),footer:Nt&&a.default.createElement(N.default,{isContainerOpen:ye})},fe&&Wt,$t,Yt,Xt,Jt,Kt)))),badge:tn,startBadgeAnimation:yt}))};oe.propTypes={isMini:i.default.bool,isLaunchpad:i.default.bool,isMiniTeaser:i.default.bool,isNotification:i.default.bool,isFullyExpandedPdp:i.default.bool,isTeaser:i.default.bool},oe.defaultProps={isMini:!1,isLaunchpad:!1,isMiniTeaser:!1,isNotification:!1,isFullyExpandedPdp:!1,isTeaser:!1},t.default=oe},2778:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=n(0),i=v(a),s=n(264),u=v(n(1)),c=v(n(2779)),l=v(n(2447)),d=v(n(1041)),f=v(n(2781)),p=v(n(834)),h=v(n(2782));function v(e){return e&&e.__esModule?e:{default:e}}var g=void 0,y={transition:"opacity 500ms ease-in-out",opacity:1},m={transition:"opacity 0ms ease-in-out",opacity:0},b={entering:{opacity:1},entered:{opacity:1},exiting:{opacity:0},exited:{opacity:0}},_={entering:{transform:"translateX(57px)"},entered:{transform:"translateX(0px)"},exiting:{transform:"translateX(0px)"},exited:{transform:"translateX(57px)"}},w={transition:"transform 200ms ease-in-out",transform:"translateX(57px)"},O=function(e){var t=e.container,n=e.position,u=e.badge,v=e.isContainerOpen,O=e.dragging,E=e.isStaticContainer,S=e.startBadgeAnimation,x=(0,p.default)(),k=x.movableBadgeSettings,T=x.movableBadgeDefaults,C="bottomRight"===(k&&k.orientation||T&&T.orientation),P=(0,f.default)(C),R=o(P,2),I=R[0],j=R[1],M=i.default.createRef(),A=(0,a.useState)(),L=o(A,2),D=L[0],N=L[1],F=(0,a.useState)(!1),U=o(F,2),B=U[0],H=U[1],G=(0,a.useState)(!1),q=o(G,2),W=q[0],V=q[1],z=(0,a.useState)(!1),Y=o(z,2),K=Y[0],X=Y[1],J=(0,a.useState)(!1),Q=o(J,2),$=Q[0],Z=Q[1],ee=(0,a.useState)(!1),te=o(ee,2),ne=te[0],re=te[1];if((0,a.useEffect)((function(){var e=void 0;return v&&!O?E?X(!0):e=setTimeout((function(){V(!0)}),400):E?X(!1):V(!1),function(){e&&clearTimeout(e)}}),[v,O,E]),(0,a.useEffect)((function(){var e=document.createElement("div");document.body.appendChild(e),N(e)}),[]),(0,a.useEffect)((function(){var e=setInterval((function(){var e=M&&M.current&&M.current.getBoundingClientRect();I?e&&e.y<16?H(!0):H(!1):e&&e.bottom-16>window.innerHeight-16?H(!0):H(!1)}),10);return function(){clearInterval(e)}})),!D)return i.default.createElement(a.Fragment,null);var oe=i.default.createElement(s.Transition,{appear:!0,exit:!1,onEntered:function(){g=!0},onEntering:function(){return setTimeout(S,200)},in:!(v||!u),timeout:200},(function(e){return i.default.createElement("div",{style:r({},w,_[e])},u)})),ae=i.default.createElement(s.Transition,{enter:!1,in:!v,timeout:500,onEntered:function(){re(!0)},onExiting:function(){re(!1)}},(function(e){return i.default.createElement("div",{style:r({},y,b[e],{visibility:$?"hidden":"visible"})},u)})),ie=(!E&&W||E&&K)&&B;return i.default.createElement(a.Fragment,null,i.default.createElement(d.default,{outsideDomNode:D},i.default.createElement("div",{style:{position:"fixed",top:I?16:"unset",bottom:I?"unset":0,zIndex:"2147483647",right:"16px",display:ie?"flex":"none"}},t)),i.default.createElement(c.default,{isStaticContainer:E,setIsBottom:j,isBottom:I,position:n,ref:M},i.default.createElement("div",{style:{display:"flex",flexDirection:I?"column-reverse":"column",alignItems:"end"}},!E&&u,E&&(g?ae:oe),i.default.createElement("div",{style:{opacity:!E&&!W||E&&!K||B?0:1,visibility:!E&&!W||E&&!K||B?"hidden":"visible",zIndex:2,position:"relative",top:I?"unset":16,bottom:I?16:"unset",right:"16px"}},!E&&t))),E&&i.default.createElement(i.default.Fragment,null,i.default.createElement(s.Transition,{in:v,timeout:500,exit:!1,onEntered:function(){Z(!0)},onExited:function(){Z(!1)}},(function(e){return i.default.createElement("div",{style:r({position:"fixed",top:73,zIndex:"2147483647",right:360,display:"flex"},m,b[e],{visibility:ne?"hidden":"visible"})},i.default.createElement(h.default,null))})),i.default.createElement(l.default,{container:t,badge:u})))};t.default=O,O.propTypes={isContainerOpen:u.default.bool.isRequired,position:u.default.object,container:u.default.node,badge:u.default.node,dragging:u.default.bool,isStaticContainer:u.default.bool,startBadgeAnimation:u.default.func},O.defaultProps={position:{},container:void 0,badge:void 0,dragging:!0,isStaticContainer:!1,startBadgeAnimation:function(){}}},2779:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=n(0),a=c(o),i=c(n(1)),s=c(n(2780)),u=c(n(834));function c(e){return e&&e.__esModule?e:{default:e}}var l=a.default.forwardRef((function(e,t){var n=e.position,i=e.isBottom,c=e.setIsBottom,l=e.children,d=(0,o.useRef)(!1),f=(0,o.useState)(),p=r(f,2),h=p[0],v=p[1],g=(0,u.default)(),y=g.movableBadgeSettings,m=g.updateBadgeSettings,b=g.movableBadgeDefaults,_=n.dragging,w=n.mouseTop,O=y&&y.top||b&&b.top||16,E=y&&y.bottom||b&&b.bottom||0,S=(0,o.useState)({top:O,bottom:E}),x=r(S,2),k=x[0],T=x[1],C=(0,o.useState)({diff:0}),P=r(C,2),R=P[0],I=P[1],j=(window.innerHeight-56-16)/2;(0,o.useEffect)((function(){var e=(0,s.default)((function(){var e=i?window.innerHeight-k.bottom-16-56>=j:k.top>=j;i?(T({top:window.innerHeight-k.bottom-16-56,bottom:k.bottom}),e&&c(!1)):e&&(T({top:k.top,bottom:window.innerHeight-k.top-16-56}),c(!0))}),500);return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[k.top,k.bottom,i,c,j]),(0,o.useEffect)((function(){var e=function(e){if(_){var t=void 0;if(i){var n=e.changedTouches&&e.changedTouches[0].clientY||e.clientY,r=window.innerHeight-n-(window.innerHeight-w),o=r+k.bottom;t=o>=16?o+56<=window.innerHeight-16?r:window.innerHeight-56-k.bottom-16:-1*k.bottom+16}else{var a=(e.changedTouches&&e.changedTouches[0].clientY||e.clientY)-w,s=a+k.top;t=s>=16?s+56<=window.innerHeight-16?a:window.innerHeight-56-k.top-16:-1*k.top+16}I({diff:t})}},t=function(t){e(t),t.preventDefault()};if(_)window.addEventListener("mousemove",e),window.addEventListener("touchmove",t);else{window.removeEventListener("mousemove",e),window.removeEventListener("touchmove",t);var n=i?k.bottom+R.diff:k.top+R.diff,r=n!==h;v(n);var o=i?window.innerHeight-n-56-16:n,a=i?n:window.innerHeight-n-56-16,s=i?window.innerHeight-a-16-56>=j:o>=j;c(s),T({top:o,bottom:a}),d.current!==_&&m({top:o,bottom:a,orientation:s?"bottomRight":"topRight",sendSdata:r}),I({diff:0})}return d.current!==_&&(d.current=_),function(){window.removeEventListener("mousemove",e),window.removeEventListener("touchmove",t)}}),[_,k.top,k.bottom,R.diff,w,c,m,i,j]);var M=i?-1*R.diff:R.diff;return a.default.createElement("div",{style:{position:"fixed",top:i?"unset":k.top,bottom:i?k.bottom:"unset",right:"0px",transform:"translate(0px, "+M+"px)",zIndex:2147483647},ref:t},l)}));t.default=l,l.propTypes={isBottom:i.default.bool,setIsBottom:i.default.func,children:i.default.any,position:i.default.object},l.defaultProps={isBottom:!1,setIsBottom:function(){},children:void 0,position:{}}},2780:function(e,t,n){var r=n(324),o=n(100);e.exports=function(e,t,n){var a=!0,i=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return o(n)&&(a="leading"in n?!!n.leading:a,i="trailing"in n?!!n.trailing:i),r(e,t,{leading:a,maxWait:t,trailing:i})}},2781:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(0,r.useState)(e)};var r=n(0)},2782:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s(n(0)),o=s(n(379)),a=n(5),i=n(18);function s(e){return e&&e.__esModule?e:{default:e}}t.default=function(){var e=(0,a.useDispatch)();return r.default.createElement("div",{style:{cursor:"pointer "},onMouseUp:function(){e((0,i.tipContainerActionsClose)())}},r.default.createElement(o.default,null))}},2783:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return(0,r.useState)({mouseTop:0,dragging:!1})};var r=n(0)},2784:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=n(0),a=j(o),i=j(n(1)),s=n(5),u=n(2),c=j(n(807)),l=j(n(1015)),d=j(n(1016)),f=j(n(1017)),p=j(n(1014)),h=j(n(615)),v=j(n(1013)),g=j(n(1021)),y=j(n(1020)),m=j(n(30)),b=j(n(4)),_=j(n(14)),w=j(n(71)),O=j(n(1024)),E=n(838),S=n(622),x=n(243),k=j(n(2555)),T=j(n(837)),C=n(18),P=n(856),R=n(2556),I=j(R);function j(e){return e&&e.__esModule?e:{default:e}}function M(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,n){return function r(o,a){try{var i=t[o](a),s=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(s).then((function(e){r("next",e)}),(function(e){r("throw",e)}));e(s)}("next")}))}}var A={openContainer:i.default.func,closeContainer:i.default.func,snoozed:i.default.bool,dragging:i.default.bool,dragged:i.default.object,onMouseDown:i.default.func,onMouseUp:i.default.func,onTouchMove:i.default.func,isStaticContainer:i.default.bool},L=function(e){var t=e.openContainer,n=e.closeContainer,i=e.onMouseDown,j=e.dragging,A=e.dragged,L=e.isStaticContainer,D=(0,o.createRef)(),N=(0,s.useDispatch)(),F=(0,o.useState)(),U=r(F,2),B=U[0],H=U[1],G=(0,o.useState)(),q=r(G,2),W=q[0],V=q[1],z=(0,o.useState)(!1),Y=r(z,2),K=Y[0],X=Y[1],J=(0,I.default)({isStaticContainer:L}),Q=r(J,2),$=Q[0],Z=Q[1],ee=(0,o.useState)(!1),te=r(ee,2),ne=te[0],re=te[1],oe=(0,o.useState)("https://www.joinhoney.com/settings/feature-settings"),ae=r(oe,2),ie=ae[0],se=ae[1],ue=(0,o.useState)(!1),ce=r(ue,2),le=ce[0],de=ce[1],fe=(0,o.useState)(""),pe=r(fe,2),he=pe[0],ve=pe[1],ge=(0,x.useContainerState)(),ye=r(ge,3)[2],me=(0,o.useState)(!1),be=r(me,2),_e=be[0],we=be[1],Oe=(0,k.default)(),Ee=Oe.shouldShowTooltip,Se=Oe.forceHideTooltip,xe=Oe.startClickBadgeTooltip,ke=Oe.endClickBadgeTooltip,Te=(0,T.default)({isStaticContainer:L}).shouldShowToolTip,Ce=(0,O.default)().id,Pe=(0,S.useTip)(Ce),Re=r(Pe,1)[0].badge,Ie=void 0===Re?{}:Re,je=Ie.title,Me=Ie.subtitle,Ae=(0,E.useCategoryData)(Ce),Le=r(Ae,1)[0],De=function(){var e=(0,o.useState)(!1),t=r(e,2),n=t[0],a=t[1],i=(0,o.useState)(!1),s=r(i,2),u=s[0],c=s[1],l=(0,o.useRef)(!1);return[n,function(){n||a(!0),c(!0),clearTimeout(l.current)},function(){u&&(c(!1),l.current=setTimeout((function(){a(!1)}),600))}]}(),Ne=r(De,3),Fe=Ne[0],Ue=Ne[1],Be=Ne[2],He=Fe&&!j;(0,o.useEffect)((function(){j||de(!1)}),[j]),(0,o.useEffect)((function(){var e=setInterval((function(){var e=D&&D.current&&D.current.getBoundingClientRect();(e?e.y+e.height/2:0)>=window.innerHeight/2?we(!0):we(!1)}),10);return function(){clearInterval(e)}})),(0,o.useEffect)((function(){N((0,C.badgeShown)())}),[N]),(0,o.useEffect)((function(){var e;(e=M(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.default.getTipsConfig();case 2:t=e.sent,n=t.badgeTooltipText,ve(n||a.default.createElement("div",{style:{width:"176px"}},a.default.createElement("div",{style:{fontSize:"12px",lineHeight:"16px"}},b.default.getMessage("New_Shop_smarter_with_Honey_Tips_Badge_blocking_your_view_Just_drag_it_up_or_down"),a.default.createElement("div",null,a.default.createElement("img",{style:{width:"100%"},src:"https://cdn.honey.io/images/tips/movable-badge-example.gif",alt:"Gif of example"})))));case 5:case"end":return e.stop()}}),e,this)}))),function(){return e.apply(this,arguments)})()}),[]),(0,o.useEffect)((function(){var e;(e=M(regeneratorRuntime.mark((function e(){var t,n,r,o,a,i,s,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.default.getTipsConfig();case 2:return t=e.sent,n=t.hasExtraSnoozeSettings,r=void 0!==n&&n,o=t.links,a=void 0===o?{}:o,e.next=9,_.default.getInfo();case 9:i=e.sent,s=i.isLoggedIn,u=void 0!==s&&s,r&&X(!0),re(u),se(a.featureSettings||ie);case 15:case"end":return e.stop()}}),e,this)}))),function(){return e.apply(this,arguments)})()}),[ie]);var Ge=function(){L&&xe(),B||e.dragging||(m.default.updateSetting("movable_badge:first_time_hovered","true"),N((0,C.badgeHover)()),t(),H(!0))},qe=function(){if(!A.current){if(W)return n(),void V(!1);Se(),m.default.updateSetting("movable_badge:first_time_clicked","true"),N((0,C.badgeClick)()),t(),V(!0)}};if((0,o.useEffect)((function(){Ee&&ye&&N((0,C.clickBadgeTooltipShown)())}),[N,Ee,ye]),(0,o.useEffect)((function(){if(null!==Z&&L){var t=Z.event;t===R.hoverOrClickEvents.MOUSEUP?(qe(),e.onMouseUp()):t===R.hoverOrClickEvents.MOUSEOVER&&Ge()}}),[Z]),e.snoozed)return a.default.createElement(o.Fragment,null);var We=function(t){e.onMouseUp(t),qe(),t.preventDefault()},Ve=a.default.createElement("span",null,b.default.getMessageAndReplace("NOTIPS_for_this_item",{NOTIPS:a.default.createElement("b",null,b.default.getMessage("No_tips"))})),ze=j&&le?"Click to pin this badge":("function"==typeof je?je(Le):je)||Ve,Ye=j&&le?"Move your cursor to position":("function"==typeof Me?Me(Le):Me)||b.default.getMessage("But_were_working_on_it"),Ke=[{copy:"Reposition this",key:"reposition_this",onClick:function(e){de(!0),i(e),N((0,C.setClickMove)())}},{copy:b.default.getMessage("Snooze_for_24_hours"),key:"snooze_24",onClick:function(){N((0,C.setBadgeSnoozeOneDay)())}}],Xe=ne?{copy:b.default.getMessage("Go_to_settings"),key:"go_to_settings",onClick:function(){N((0,P.setBadgeSnoozeAllLoggedIn)()),window.open(ie)}}:{copy:b.default.getMessage("Dont_show_on_any_store"),key:"snooze_all",onClick:function(){N((0,C.setBadgeSnoozeAll)())}};K&&Ke.push({copy:b.default.getMessage("Dont_show_on_this_site"),key:"snooze_store",onClick:function(){N((0,C.setBadgeSnoozeOneStore)())}},Xe);var Je=-10-24*Ke.length,Qe=_e?Je+"px":"64px";if(e.snoozed)return a.default.createElement(o.Fragment,null);var $e=b.default.getMessage("Droplist_this_item"),Ze=b.default.getMessage("Get_price_drop_alerts");return a.default.createElement("div",{ref:D},a.default.createElement(y.default,{showDropDown:He,settingsOptions:Ke,onMouseOver:Ue,onMouseLeave:Be,offset:Qe},a.default.createElement(g.default,null,a.default.createElement("div",{style:{position:"relative",top:"-0px"}},Te&&a.default.createElement(c.default,{copy:he})),ye&&!Te&&Ee&&a.default.createElement("div",{style:{position:"relative",top:"-0px"}},a.default.createElement(c.default,{copy:b.default.getMessage("Click_the_Honey_button_to_reveal_our_deal_insights_for_this_store")})),a.default.createElement("div",{ref:$},a.default.createElement(l.default,{onFocus:function(){},onMouseOver:L?function(){}:Ge,onMouseLeave:function(){ke(),L&&n(),H(!1)},onTouchStart:L?function(t){e.onMouseDown(t),t.preventDefault()}:function(){},onTouchEnd:L?We:function(){},onTouchCancel:L?We:function(){},onTouchMove:L?e.onTouchMove:function(){},onMouseDown:e.onMouseDown},a.default.createElement(d.default,null,a.default.createElement(u.Icon,{icon:"honey-18",color:u.Colors.white})),a.default.createElement(f.default,{firstLine:ye?ze:$e,secondLine:ye?Ye:Ze}))),a.default.createElement(p.default,{onMouseOver:Ue,onMouseLeave:Be,onClick:function(){N((0,C.setBadgeSnooze)())}},a.default.createElement(h.default,null)),a.default.createElement(v.default,null))))};L.propTypes=A,L.defaultProps={dragging:!1,dragged:{},onMouseDown:function(){},onMouseUp:function(){},onTouchMove:function(){},openContainer:function(){},closeContainer:function(){},snoozed:!1,isStaticContainer:!1},t.default=L},2785:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=n(0),i=L(a),s=L(n(1)),u=n(5),c=n(3),l=L(n(4)),d=L(n(71)),f=n(2),p=L(n(807)),h=L(n(616)),v=L(n(617)),g=L(n(30)),y=L(n(379)),m=n(838),b=L(n(244)),_=n(622),w=n(243),O=L(n(1026)),E=L(n(1023)),S=L(n(837)),x=n(381),k=n(56),T=L(n(2555)),C=L(n(1068)),P=L(n(2786)),R=n(537),I=L(n(2787)),j=n(2556),M=L(j),A=n(16);function L(e){return e&&e.__esModule?e:{default:e}}function D(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,n){return function r(o,a){try{var i=t[o](a),s=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(s).then((function(e){r("next",e)}),(function(e){r("throw",e)}));e(s)}("next")}))}}var N={isMiniTeaser:s.default.bool.isRequired,openContainer:s.default.func,closeContainer:s.default.func,closeContainerOnMouseOut:s.default.func,isStaticContainer:s.default.bool,isTeaser:s.default.bool,snoozed:s.default.bool,dragging:s.default.bool,dragged:s.default.object,onMouseDown:s.default.func,onMouseUp:s.default.func,onTouchMove:s.default.func,notificationBadge:s.default.node},F=(0,c.createUseStyles)({root:{width:"100%",display:"flex",justifyContent:"flex-end",userSelect:"none",border:"none",margin:0,padding:0,background:"transparent"},loader:{width:"128px",height:"9px",display:"inline-block",background:"linear-gradient(92.25deg, #E6E6E6 2.21%, rgba(238, 238, 238, 0) 107.89%)",borderRadius:"1px"},container:function(e){var t=e.showMovableBadge;return{position:"relative",display:"flex",transition:"margin-right 300ms cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:"0px 4px 20px rgba(0, 0, 0, 0.18)",borderRadius:"5px 0px 0px 5px",alignItems:"center",cursor:e.isStaticContainer?"pointer":"move",marginRight:t?"0px":"-28px",touchAction:"none",background:f.Colors.white}},teaserAnimateIn:function(e){return{right:"1px",maxWidth:e.animateTeaserIn?"1000px":"0",transition:"max-width 800ms cubic-bezier(0.4, 0, 0.2, 1)",textAlign:"left"}}}),U=function(e){var t=e.openContainer,n=e.closeContainer,s=e.isMiniTeaser,c=e.notificationBadge,L=e.isStaticContainer,N=e.isTeaser,U=e.closeContainerOnMouseOut,B=(0,a.useRef)({}),H=(0,a.useRef)(!0),G=(0,u.useDispatch)(),q=(0,a.useState)(),W=o(q,2),V=W[0],z=W[1],Y=(0,M.default)({isStaticContainer:L}),K=o(Y,2),X=K[0],J=K[1],Q=(0,w.useContainerOpen)(),$=o(Q,1)[0],Z=(0,a.useState)(),ee=o(Z,2),te=ee[0],ne=ee[1],re=(0,a.useState)(""),oe=o(re,2),ae=oe[0],ie=oe[1],se=(0,a.useState)(!1),ue=o(se,2),ce=ue[0],le=ue[1],de=(0,w.useContainerState)(),fe=o(de,3)[2],pe=(0,a.useState)(!1),he=o(pe,2),ve=he[0],ge=he[1],ye=(0,a.useState)(!1),me=o(ye,2),be=me[0],_e=me[1],we=(0,A.useCashback)(),Oe=(0,O.default)(),Ee=(0,S.default)({isStaticContainer:L}),Se=Ee.shouldShowTooltip,xe=Ee.incrementTooltipCount,ke=Ee.forceCloseTooltip,Te=(0,T.default)(),Ce=Te.shouldShowTooltip,Pe=Te.forceHideTooltip,Re=Te.startClickBadgeTooltip,Ie=Te.endClickBadgeTooltip,je=(0,b.default)(),Me=F({animateTeaserIn:ve,showMovableBadge:V||e.dragging,isStaticContainer:L}),Ae=(0,A.useHighestRankedTipInstance)().id,Le=(0,_.useTip)(Ae),De=o(Le,1)[0],Ne=De.badge,Fe=void 0===Ne?{}:Ne,Ue=De.teaser,Be=void 0===Ue?{}:Ue,He=Fe.title,Ge=Fe.subtitle,qe=Be.title,We=Be.CTA,Ve=(0,m.useCategoryData)(Ae),ze=o(Ve,1)[0],Ye=je&&je.standDown&&je.standDownValue>2,Ke=(0,E.default)(Ae),Xe=o(Ke,1)[0],Je=i.default.createElement("span",null,l.default.getMessageAndReplace("NOTIPS_for_this_item",{NOTIPS:i.default.createElement("b",null,l.default.getMessage("No_tips"))})),Qe=("function"==typeof He?He(ze):He)||Je,$e=("function"==typeof Ge?Ge(ze):Ge)||l.default.getMessage("But_were_working_on_it"),Ze=("function"==typeof qe?qe(r({},ze,{isCashback:we})):qe)||Qe,et=("function"==typeof We?We(r({},ze,{isCashback:we})):We)||$e;(0,a.useEffect)((function(){return function(){H.current=!1}}),[]),(0,a.useEffect)((function(){if(Oe&&c&&H.current){var e=Object.values(Oe).includes("unread");_e(e)}}),[Oe]),(0,a.useEffect)((function(){!Se&&Ce&&fe&&G((0,x.clickBadgeTooltipShown)())}),[G,Ce,fe,Se]),(0,a.useEffect)((function(){if(fe&&Ye){var e={type:"standdown",standDownType:je.standDown,standDownValue:je.standDownValue};G((0,k.sdataTipBadgeTeaserSuppressedEvent)({suppressedReason:e}))}}),[je.standDown,je.standDownValue,Ye,fe,G]),(0,a.useEffect)((function(){le(!1)}),[Ae]),(0,a.useEffect)((function(){var e;(e=D(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(H.current){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,P.default)();case 4:if(t=e.sent,n=o(t,1),r=n[0],fe&&!$){e.next=9;break}return e.abrupt("return");case 9:if(!ce){e.next=12;break}return r&&le(!1),e.abrupt("return");case 12:if(!N){e.next=17;break}return G((0,x.stickyTeaserShown)()),G((0,R.tipShown)(Ae,!0)),le(!r),e.abrupt("return");case 17:!Ye&&Xe&&!Se&&!ce&&!r&&(le(!0),G((0,x.miniBadgeTeaserShown)()));case 19:case"end":return e.stop()}}),e,this)}))),function(){return e.apply(this,arguments)})()}),[fe,ce,$,Ye,Xe,Se,G,N,Ae]),(0,a.useEffect)((function(){var e;(e=D(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.default.getTipsConfig();case 2:t=e.sent,n=t.badgeTooltipText,ie(i.default.createElement("div",{style:{width:"176px"}},i.default.createElement("div",{style:{fontSize:"12px",color:f.Colors.white,lineHeight:"16px",textAlign:"left"}},n||l.default.getMessage("Check_Honey_Tips_before_you_buy_See_deal_insights_price_changes_and_add_items_to_your_Droplist"))));case 5:case"end":return e.stop()}}),e,this)}))),function(){return e.apply(this,arguments)})()}),[]),(0,a.useEffect)((function(){fe&&ge(!0)}),[fe]),(0,a.useEffect)((function(){G((0,x.badgeShown)())}),[G]),(0,a.useEffect)((function(){return fe&&!N&&(ve?B.current=setTimeout((function(){ge(!1)}),5e3):clearTimeout(B.current)),function(){clearTimeout(B.current)}}),[ve,fe,N]),(0,a.useEffect)((function(){ne(L?$:void 0)}),[$,L]);var tt=function(){B&&B.current&&clearTimeout(B.current)},nt=(0,a.useCallback)((function(){xe(!1),ke()}),[xe,ke]),rt=(0,a.useCallback)((function(n){nt(),L&&!$&&Re(),tt(),V||e.dragging||(g.default.updateSetting("movable_badge:first_time_hovered","true"),G((0,x.badgeHover)()),t(n),z(!0))}),[nt,G,V,$,L,t,e.dragging,Re]),ot=(0,a.useCallback)((function(){Ie(),e.dragging||ge(!1),!L&&U(2e3),z(!1)}),[U,Ie,L,e.dragging]),at=function(){if(clearTimeout(B.current),!e.dragged.current){if(te)return n(L?0:null),void ne(!1);ge(!1),ne(!0),Pe(),requestAnimationFrame(t),G((0,x.badgeClick)()),g.default.updateSetting("movable_badge:first_time_clicked","true")}},it=function(t){e.onMouseUp(t),at(),t.preventDefault()};if((0,a.useEffect)((function(){if(null!==J&&L){var t=J.event;t===j.hoverOrClickEvents.MOUSEUP?(at(),e.onMouseUp()):t===j.hoverOrClickEvents.DELAYED_MOUSEENTER?rt():t===j.hoverOrClickEvents.MOUSEENTER&&tt()}}),[J]),e.snoozed)return i.default.createElement(a.Fragment,null);var st=i.default.createElement("div",{className:Me.loader}),ut=ce&&fe&&Ae?i.default.createElement(C.default,{isTeaser:!0,onMouseOver:function(e){rt(e)},onClose:function(){return ge(!1)},tipInstanceId:Ae,templateType:"teaser"}):null,ct=(ce&&i.default.createElement(v.default,{firstLine:fe?i.default.createElement("div",{style:{fontWeight:"700"}},Ze):st,secondLine:fe?i.default.createElement("div",{style:{fontWeight:"500"}},et):st}),ut);return i.default.createElement("button",{className:Me.root,tabIndex:0,"aria-label":Ze,"aria-expanded":$,onClick:rt},i.default.createElement("div",{ref:X,className:Me.container,onMouseOver:L?function(){}:rt,onMouseLeave:ot,onTouchStart:L?function(t){nt(),e.onMouseDown(t),t.preventDefault()}:function(){},onTouchEnd:L?it:function(){},onTouchCancel:L?it:function(){},onTouchMove:L?e.onTouchMove:function(){},onMouseDown:e.onMouseDown},fe&&Ce&&i.default.createElement("div",{style:{position:"absolute",zIndex:1}},i.default.createElement(p.default,{copy:l.default.getMessage("Click_the_Honey_button_to_reveal_our_deal_insights_for_this_store")})),i.default.createElement("div",{style:{position:"absolute",zIndex:1}},Se&&i.default.createElement(p.default,{copy:ae})),be&&c,L?i.default.createElement(I.default,null):i.default.createElement(y.default,null),s&&!(L&&$)&&i.default.createElement("div",{className:Me.teaserAnimateIn}," ",ct," "),i.default.createElement(h.default,null)))};U.propTypes=N,U.defaultProps={dragging:!1,dragged:{},onMouseDown:function(){},onMouseUp:function(){},onTouchMove:function(){},openContainer:function(){},closeContainer:function(){},closeContainerOnMouseOut:function(){},isStaticContainer:!1,isTeaser:!1,snoozed:!1,notificationBadge:null},t.default=U},2786:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(178)),o=n(302),a=i(n(62));function i(e){return e&&e.__esModule?e:{default:e}}var s,u,c=void 0,l=void 0,d=void 0,f=!1,p=(s=regeneratorRuntime.mark((function e(){var t,n,a,i,s,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((0,o.getIsProductPage)()){e.next=2;break}return e.abrupt("return",[!1]);case 2:return e.next=4,(0,r.default)();case 4:if(e.t0=e.sent,e.t0){e.next=7;break}e.t0={};case 7:if(t=e.t0,n=t.parentId,a=new URL(document.URL),i=a.pathname,s=a.search,u=void 0!==l&&l===n&&(c!==i||d!==s),!f){e.next=13;break}return e.abrupt("return",[!0]);case 13:if(!u){e.next=16;break}return f=!0,e.abrupt("return",[!0]);case 16:return c=i,d=s,l=n,e.abrupt("return",[!1]);case 20:case"end":return e.stop()}}),e,void 0)})),u=function(){var e=s.apply(this,arguments);return new Promise((function(t,n){return function r(o,a){try{var i=e[o](a),s=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(s).then((function(e){r("next",e)}),(function(e){r("throw",e)}));t(s)}("next")}))},function(){return u.apply(this,arguments)});(0,a.default)("honeyTips:resetCurrent")((function(){f=!1})),(0,a.default)("honeyTips:newPage")((function(){f=!1})),(0,a.default)("honeyTips:turnOff")((function(){f=!1})),(0,a.default)("honeyTips:updateLaunchpad")((function(){f=!1})),(0,a.default)("honeyTips:updateProduct")((function(){f=!1})),t.default=p},2787:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=n(0),i=f(a),s=f(n(1)),u=n(3),c=n(264),l=n(2557),d=f(l);function f(e){return e&&e.__esModule?e:{default:e}}var p=(0,u.createUseStyles)({root:{display:"flex"},container:{width:"58px",height:"56px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"5px 0px 0px 5px",position:"relative",background:"linear-gradient(90deg, #FF7227 0%, #FC973B 100%)"},logoContainer:{display:"inherit"},icon:{width:"24px",height:"24px"},mask:{position:"absolute",top:"0px",bottom:"0px",left:"0px",right:"0px"}}),h=function(e){var t=e.duration,n=p(),s=(0,a.useState)(!1),u=o(s,2),f=u[0],h=u[1],v=(0,a.useRef)(!0),g=(0,d.default)(),y=g.animate,m=g.endAnimation,b=l.BadgeAnimationState.END===y?0:t,_={transition:"opacity "+b+"ms ease-in-out",opacity:0},w={entering:{opacity:0},entered:{opacity:1},exiting:{opacity:0},exited:{opacity:0}};(0,a.useEffect)((function(){(y===l.BadgeAnimationState.START||y===l.BadgeAnimationState.END&&v.current)&&(h(!0),v.current=!1)}),[y]);var O=i.default.createElement(i.default.Fragment,null,i.default.createElement("div",{className:n.mask}),i.default.createElement("img",{src:"https://cdn.honey.io/images/tips/honey-24.svg",alt:"Open Honey"})),E=i.default.createElement(c.Transition,{onEntered:function(){return setTimeout(m,b)},exit:!1,in:f,timeout:b},(function(e){return i.default.createElement("div",{className:n.logoContainer,style:r({},_,w[e])},O)}));return i.default.createElement("div",{ref:v,className:n.root},i.default.createElement("div",{className:n.container},E))};h.propTypes={duration:s.default.number},h.defaultProps={duration:400},t.default=h},2788:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(27),o=n(29),a=n(33);t.default=function(e){return function(t,n){var i=n(),s={id:i&&i.universalContainer&&i.universalContainer.currentContainerId,badgeAnimationState:e},u=(0,r.normalize)(s,o.UNIVERSAL_CONTAINER);t({type:a.BADGE_ANIMATION_STATE,data:u})}}},2789:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(94);t.default=function(e){var t=e.containerId,n=e.productId,o=e.debugProductLink,a=void 0===o?"":o;return function(e){var o=a.replace("{PRODUCT_ID}",n);window.open(o,"_blank"),e((0,r.sdataTipsDebugProductClicked)(t))}}},2790:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(2558),a=(r=o)&&r.__esModule?r:{default:r};t.default=function(){var e=(0,a.default)(),t=e.currentProduct,n=e.isDebugProductFeatureEnabled,r=e.user,o=(r&&r.email||"").endsWith("@joinhoney.com");return n&&o&&t}},2791:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){i||(i=o.default.loadingPhrases.map((function(e){return r.default.getMessage(e)})));return i};var r=a(n(4)),o=a(n(2792));function a(e){return e&&e.__esModule?e:{default:e}}var i=void 0},2792:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={loadingPhrases:["Stand_by_for_some_serious_deal_science","Cooking_up_coupons_rewards_and_tips","Dropping_some_savings_knowledge_in_3_2_1","Channeling_our_savings_superpowers","Our_secret_formula_of_deals_rewards_and_tips_coming_up","Were_whipping_up_todays_deals_and_tips","Were_working_our_deal_finding_magic","Finding_deals_is_a_science","Todays_batch_of_store_deals_and_tips_coming_up","Coiny_is_working_some_shopping_genius","Adding_our_secret_deal_finding_ingredients","Coiny_says_an_informed_shopper_is_a_smart_shopper","Were_working_our_deal_searching_magic","Doing_what_we_do_best_whipping_up_deals_and_tips","Whos_ready_to_save_Q_Stand_by_for_deals","Shopping_wisdom_is_worth_waiting_for","Searching_every_corner_of_the_internet_for_deals","Good_deals_come_to_those_who_wait","Doing_what_we_do_best_finding_you-deals_and_tips","Warming_up_our_shopping_muscles","Were_consulting_our_crystal_ball_for deals","Making_you_a_savings_mixtape","Stick_with_us_P_Were_a_magnet_for_deals","You_find_the_cool_stuff_well_find_the_savings"]}},2793:function(e,t,n){"use strict";(function(t){e.exports=y;var r,o=n(2794),a=n(133),i=n(2796),s=(r="function"==typeof Symbol&&"1"!==t.env._nodeLRUCacheForceNoSymbol?function(e){return Symbol(e)}:function(e){return"_"+e})("max"),u=r("length"),c=r("lengthCalculator"),l=r("allowStale"),d=r("maxAge"),f=r("dispose"),p=r("noDisposeOnSet"),h=r("lruList"),v=r("cache");function g(){return 1}function y(e){if(!(this instanceof y))return new y(e);"number"==typeof e&&(e={max:e}),e||(e={});var t=this[s]=e.max;(!t||"number"!=typeof t||t<=0)&&(this[s]=1/0);var n=e.length||g;"function"!=typeof n&&(n=g),this[c]=n,this[l]=e.stale||!1,this[d]=e.maxAge||0,this[f]=e.dispose,this[p]=e.noDisposeOnSet||!1,this.reset()}function m(e,t,n,r){var o=n.value;_(e,o)&&(O(e,n),e[l]||(o=void 0)),o&&t.call(r,o.value,o.key,e)}function b(e,t,n){var r=e[v].get(t);if(r){var o=r.value;_(e,o)?(O(e,r),e[l]||(o=void 0)):n&&e[h].unshiftNode(r),o&&(o=o.value)}return o}function _(e,t){if(!t||!t.maxAge&&!e[d])return!1;var n=Date.now()-t.now;return t.maxAge?n>t.maxAge:e[d]&&n>e[d]}function w(e){if(e[u]>e[s])for(var t=e[h].tail;e[u]>e[s]&&null!==t;){var n=t.prev;O(e,t),t=n}}function O(e,t){if(t){var n=t.value;e[f]&&e[f](n.key,n.value),e[u]-=n.length,e[v].delete(n.key),e[h].removeNode(t)}}function E(e,t,n,r,o){this.key=e,this.value=t,this.length=n,this.now=r,this.maxAge=o||0}Object.defineProperty(y.prototype,"max",{set:function(e){(!e||"number"!=typeof e||e<=0)&&(e=1/0),this[s]=e,w(this)},get:function(){return this[s]},enumerable:!0}),Object.defineProperty(y.prototype,"allowStale",{set:function(e){this[l]=!!e},get:function(){return this[l]},enumerable:!0}),Object.defineProperty(y.prototype,"maxAge",{set:function(e){(!e||"number"!=typeof e||e<0)&&(e=0),this[d]=e,w(this)},get:function(){return this[d]},enumerable:!0}),Object.defineProperty(y.prototype,"lengthCalculator",{set:function(e){"function"!=typeof e&&(e=g),e!==this[c]&&(this[c]=e,this[u]=0,this[h].forEach((function(e){e.length=this[c](e.value,e.key),this[u]+=e.length}),this)),w(this)},get:function(){return this[c]},enumerable:!0}),Object.defineProperty(y.prototype,"length",{get:function(){return this[u]},enumerable:!0}),Object.defineProperty(y.prototype,"itemCount",{get:function(){return this[h].length},enumerable:!0}),y.prototype.rforEach=function(e,t){t=t||this;for(var n=this[h].tail;null!==n;){var r=n.prev;m(this,e,n,t),n=r}},y.prototype.forEach=function(e,t){t=t||this;for(var n=this[h].head;null!==n;){var r=n.next;m(this,e,n,t),n=r}},y.prototype.keys=function(){return this[h].toArray().map((function(e){return e.key}),this)},y.prototype.values=function(){return this[h].toArray().map((function(e){return e.value}),this)},y.prototype.reset=function(){this[f]&&this[h]&&this[h].length&&this[h].forEach((function(e){this[f](e.key,e.value)}),this),this[v]=new o,this[h]=new i,this[u]=0},y.prototype.dump=function(){return this[h].map((function(e){if(!_(this,e))return{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}}),this).toArray().filter((function(e){return e}))},y.prototype.dumpLru=function(){return this[h]},y.prototype.inspect=function(e,t){var n="LRUCache {",r=!1;this[l]&&(n+="\n  allowStale: true",r=!0);var o=this[s];o&&o!==1/0&&(r&&(n+=","),n+="\n  max: "+a.inspect(o,t),r=!0);var i=this[d];i&&(r&&(n+=","),n+="\n  maxAge: "+a.inspect(i,t),r=!0);var f=this[c];f&&f!==g&&(r&&(n+=","),n+="\n  length: "+a.inspect(this[u],t),r=!0);var p=!1;return this[h].forEach((function(e){p?n+=",\n  ":(r&&(n+=",\n"),p=!0,n+="\n  ");var o=a.inspect(e.key).split("\n").join("\n  "),s={value:e.value};e.maxAge!==i&&(s.maxAge=e.maxAge),f!==g&&(s.length=e.length),_(this,e)&&(s.stale=!0),s=a.inspect(s,t).split("\n").join("\n  "),n+=o+" => "+s})),(p||r)&&(n+="\n"),n+="}"},y.prototype.set=function(e,t,n){var r=(n=n||this[d])?Date.now():0,o=this[c](t,e);if(this[v].has(e)){if(o>this[s])return O(this,this[v].get(e)),!1;var a=this[v].get(e).value;return this[f]&&(this[p]||this[f](e,a.value)),a.now=r,a.maxAge=n,a.value=t,this[u]+=o-a.length,a.length=o,this.get(e),w(this),!0}var i=new E(e,t,o,r,n);return i.length>this[s]?(this[f]&&this[f](e,t),!1):(this[u]+=i.length,this[h].unshift(i),this[v].set(e,this[h].head),w(this),!0)},y.prototype.has=function(e){return!!this[v].has(e)&&!_(this,this[v].get(e).value)},y.prototype.get=function(e){return b(this,e,!0)},y.prototype.peek=function(e){return b(this,e,!1)},y.prototype.pop=function(){var e=this[h].tail;return e?(O(this,e),e.value):null},y.prototype.del=function(e){O(this,this[v].get(e))},y.prototype.load=function(e){this.reset();for(var t=Date.now(),n=e.length-1;n>=0;n--){var r=e[n],o=r.e||0;if(0===o)this.set(r.k,r.v);else{var a=o-t;a>0&&this.set(r.k,r.v,a)}}},y.prototype.prune=function(){var e=this;this[v].forEach((function(t,n){b(e,n,!1)}))}}).call(this,n(108))},2794:function(e,t,n){(function(t){"pseudomap"===t.env.npm_package_name&&"test"===t.env.npm_lifecycle_script&&(t.env.TEST_PSEUDOMAP="true"),"function"!=typeof Map||t.env.TEST_PSEUDOMAP?e.exports=n(2795):e.exports=Map}).call(this,n(108))},2795:function(e,t){var n=Object.prototype.hasOwnProperty;function r(e){if(!(this instanceof r))throw new TypeError("Constructor PseudoMap requires 'new'");if(this.clear(),e)if(e instanceof r||"function"==typeof Map&&e instanceof Map)e.forEach((function(e,t){this.set(t,e)}),this);else{if(!Array.isArray(e))throw new TypeError("invalid argument");e.forEach((function(e){this.set(e[0],e[1])}),this)}}function o(e,t){return e===t||e!=e&&t!=t}function a(e,t,n){this.key=e,this.value=t,this._index=n}function i(e,t){for(var r=0,a="_"+t,i=a;n.call(e,i);i=a+r++)if(o(e[i].key,t))return e[i]}e.exports=r,r.prototype.forEach=function(e,t){t=t||this,Object.keys(this._data).forEach((function(n){"size"!==n&&e.call(t,this._data[n].value,this._data[n].key)}),this)},r.prototype.has=function(e){return!!i(this._data,e)},r.prototype.get=function(e){var t=i(this._data,e);return t&&t.value},r.prototype.set=function(e,t){!function(e,t,r){for(var i=0,s="_"+t,u=s;n.call(e,u);u=s+i++)if(o(e[u].key,t))return void(e[u].value=r);e.size++,e[u]=new a(t,r,u)}(this._data,e,t)},r.prototype.delete=function(e){var t=i(this._data,e);t&&(delete this._data[t._index],this._data.size--)},r.prototype.clear=function(){var e=Object.create(null);e.size=0,Object.defineProperty(this,"_data",{value:e,enumerable:!1,configurable:!0,writable:!1})},Object.defineProperty(r.prototype,"size",{get:function(){return this._data.size},set:function(e){},enumerable:!0,configurable:!0}),r.prototype.values=r.prototype.keys=r.prototype.entries=function(){throw new Error("iterators are not implemented in this version")}},2796:function(e,t){function n(e){var t=this;if(t instanceof n||(t=new n),t.tail=null,t.head=null,t.length=0,e&&"function"==typeof e.forEach)e.forEach((function(e){t.push(e)}));else if(arguments.length>0)for(var r=0,o=arguments.length;r<o;r++)t.push(arguments[r]);return t}function r(e,t){e.tail=new a(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function o(e,t){e.head=new a(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function a(e,t,n,r){if(!(this instanceof a))return new a(e,t,n,r);this.list=r,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}e.exports=n,n.Node=a,n.create=n,n.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,n=e.prev;t&&(t.prev=n),n&&(n.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=n),e.list.length--,e.next=null,e.prev=null,e.list=null},n.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}},n.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}},n.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)r(this,arguments[e]);return this.length},n.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)o(this,arguments[e]);return this.length},n.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}},n.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}},n.prototype.forEach=function(e,t){t=t||this;for(var n=this.head,r=0;null!==n;r++)e.call(t,n.value,r,this),n=n.next},n.prototype.forEachReverse=function(e,t){t=t||this;for(var n=this.tail,r=this.length-1;null!==n;r--)e.call(t,n.value,r,this),n=n.prev},n.prototype.get=function(e){for(var t=0,n=this.head;null!==n&&t<e;t++)n=n.next;if(t===e&&null!==n)return n.value},n.prototype.getReverse=function(e){for(var t=0,n=this.tail;null!==n&&t<e;t++)n=n.prev;if(t===e&&null!==n)return n.value},n.prototype.map=function(e,t){t=t||this;for(var r=new n,o=this.head;null!==o;)r.push(e.call(t,o.value,this)),o=o.next;return r},n.prototype.mapReverse=function(e,t){t=t||this;for(var r=new n,o=this.tail;null!==o;)r.push(e.call(t,o.value,this)),o=o.prev;return r},n.prototype.reduce=function(e,t){var n,r=this.head;if(arguments.length>1)n=t;else{if(!this.head)throw new TypeError("Reduce of empty list with no initial value");r=this.head.next,n=this.head.value}for(var o=0;null!==r;o++)n=e(n,r.value,o),r=r.next;return n},n.prototype.reduceReverse=function(e,t){var n,r=this.tail;if(arguments.length>1)n=t;else{if(!this.tail)throw new TypeError("Reduce of empty list with no initial value");r=this.tail.prev,n=this.tail.value}for(var o=this.length-1;null!==r;o--)n=e(n,r.value,o),r=r.prev;return n},n.prototype.toArray=function(){for(var e=new Array(this.length),t=0,n=this.head;null!==n;t++)e[t]=n.value,n=n.next;return e},n.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,n=this.tail;null!==n;t++)e[t]=n.value,n=n.prev;return e},n.prototype.slice=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var r=new n;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var o=0,a=this.head;null!==a&&o<e;o++)a=a.next;for(;null!==a&&o<t;o++,a=a.next)r.push(a.value);return r},n.prototype.sliceReverse=function(e,t){(t=t||this.length)<0&&(t+=this.length),(e=e||0)<0&&(e+=this.length);var r=new n;if(t<e||t<0)return r;e<0&&(e=0),t>this.length&&(t=this.length);for(var o=this.length,a=this.tail;null!==a&&o>t;o--)a=a.prev;for(;null!==a&&o>e;o--,a=a.prev)r.push(a.value);return r},n.prototype.reverse=function(){for(var e=this.head,t=this.tail,n=e;null!==n;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=t,this.tail=e,this}},2797:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=s(r),a=s(n(1)),i=s(n(2798));function s(e){return e&&e.__esModule?e:{default:e}}var u=function(e){var t=e.children,n=e.show,a=e.onVisible,s=void 0===a?function(){}:a,u=(0,i.default)(),c=u.isVisible,l=u.ref;return(0,r.useEffect)((function(){c&&setTimeout(s,1e3)}),[c]),n?o.default.createElement("div",{ref:l}," ",t):null};u.propTypes={show:a.default.bool,onVisible:a.default.func.isRequired,children:a.default.node},u.defaultProps={show:!1,children:null},t.default=u},2798:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=n(0);t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"0px",t=(0,o.useState)(!1),n=r(t,2),a=n[0],i=n[1],s=(0,o.createRef)();return(0,o.useEffect)((function(){var t=new IntersectionObserver((function(e){var t=r(e,1)[0];i(1===t.intersectionRatio)}),{rootMargin:e}),n=s.current;return n&&t.observe(n),function(){return n&&t.unobserve(n)}}),[s]),{isVisible:a,ref:s}}},2799:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(15),o=new Set(["StoreSavings"]);t.default=function(e){return function(t,n){if("string"!=typeof e)return!1;var a=((0,r.selectTipByTipInstanceId)(e)(n())||{}).categoryId;return!o.has(a)}}},2800:function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"BrowserInfo",(function(){return o})),n.d(t,"NodeInfo",(function(){return a})),n.d(t,"SearchBotDeviceInfo",(function(){return i})),n.d(t,"BotInfo",(function(){return s})),n.d(t,"ReactNativeInfo",(function(){return u})),n.d(t,"detect",(function(){return f})),n.d(t,"browserName",(function(){return h})),n.d(t,"parseUserAgent",(function(){return v})),n.d(t,"detectOS",(function(){return g})),n.d(t,"getNodeVersion",(function(){return y}));var r=function(e,t,n){if(n||2===arguments.length)for(var r,o=0,a=t.length;o<a;o++)!r&&o in t||(r||(r=Array.prototype.slice.call(t,0,o)),r[o]=t[o]);return e.concat(r||Array.prototype.slice.call(t))},o=function(e,t,n){this.name=e,this.version=t,this.os=n,this.type="browser"},a=function(t){this.version=t,this.type="node",this.name="node",this.os=e.platform},i=function(e,t,n,r){this.name=e,this.version=t,this.os=n,this.bot=r,this.type="bot-device"},s=function(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null},u=function(){this.type="react-native",this.name="react-native",this.version=null,this.os=null},c=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,l=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/]],d=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function f(e){return e?v(e):"undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"===navigator.product?new u:"undefined"!=typeof navigator?v(navigator.userAgent):y()}function p(e){return""!==e&&l.reduce((function(t,n){var r=n[0],o=n[1];if(t)return t;var a=o.exec(e);return!!a&&[r,a]}),!1)}function h(e){var t=p(e);return t?t[0]:null}function v(e){var t=p(e);if(!t)return null;var n=t[0],a=t[1];if("searchbot"===n)return new s;var u=a[1]&&a[1].split(".").join("_").split("_").slice(0,3);u?u.length<3&&(u=r(r([],u,!0),function(e){for(var t=[],n=0;n<e;n++)t.push("0");return t}(3-u.length),!0)):u=[];var l=u.join("."),d=g(e),f=c.exec(e);return f&&f[1]?new i(n,l,d,f[1]):new o(n,l,d)}function g(e){for(var t=0,n=d.length;t<n;t++){var r=d[t],o=r[0];if(r[1].exec(e))return o}return null}function y(){return void 0!==e&&e.version?new a(e.version.slice(1)):null}}.call(this,n(108))},2801:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(5),a=n(22),i=n(15),s=n(18);t.default=function(){var e=(0,o.useSelector)(a.selectCurrentContainerId),t=(0,o.useDispatch)(),n=((0,o.useSelector)((0,i.selectUniversalContainerById)(e))||{}).disableCloseContainerOnMouseOut;return{enableCloseContainerOnMouseOut:(0,r.useCallback)((function(){n&&t((0,s.enableCloseContainerOnMouseOut)(e))}),[e,t,n]),disableCloseContainerOnMouseOut:(0,r.useCallback)((function(){n||t((0,s.disableCloseContainerOnMouseOut)(e))}),[e,t,n])}}},2802:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=n(0),a=O(o),i=n(3),s=n(5),u=O(n(1)),c=O(n(2803)),l=O(n(2804)),d=n(15),f=O(n(2805)),p=O(n(2806)),h=O(n(135)),v=O(n(2807)),g=O(n(2808)),y=O(n(2809)),m=n(18),b=n(243),_=n(56),w=n(22);function O(e){return e&&e.__esModule?e:{default:e}}var E={openContainer:u.default.func,onClose:u.default.func,onMouseOutClose:u.default.func,onDragMouseDown:u.default.func,onDragMouseUp:u.default.func,dragging:u.default.bool,snoozed:u.default.bool},S=(0,i.createUseStyles)({"@keyframes pulsing":{"0%":{transform:"scale(1)"},"50%":{transform:"scale(0.5)"},"100%":{transform:"scale(1)"}},"@keyframes shake":{"0%":{transform:"translate(0, 1px)"},"10%":{transform:"translate(0, -2px)"},"20%":{transform:"translate(0, 3px)"},"30%":{transform:"translate(0, -2px)"},"40%":{transform:"translate(0, 1px)"},"50%":{transform:"translate(0, -2px)"},"60%":{transform:"translate(0, 1px)"},"70%":{transform:"translate(0, -1px)"},"80%":{transform:"translate(0, 1px)"},"90%":{transform:"translate(0, -2px)"},"100%":{transform:"translate(0, 2px)"}},root:{display:"flex",cursor:function(e){var t=e.isClickToOpen;return e.dragging?"move":t?"pointer":"initial"}},teaserAnimateIn:function(e){return{right:"1px",marginRight:e.animateTeaserIn?"0":"-200px",transition:"margin-right 800ms cubic-bezier(0.4, 0, 0.2, 1)",textAlign:"left"}},logoAnimation:function(e){var t=e.hasNotification;return{height:e.isReady&&t?"28px":"64px",display:"flex",justifyContent:"center",flexDirection:"column",flexGrow:1,transition:"height 500ms cubic-bezier(0.4, 0, 0.2, 1), transform 300ms cubic-bezier(0.4, 0, 0.2, 1)",pointerEvents:"none"}},loadAnimation:function(e){var t=e.hasNotification;return{height:"164px",display:"flex",justifyContent:"center",alignItems:"center",animation:e.isContainerLoading?"$pulsing 1s infinite":"none",transform:e.isReady&&t?"scale(66.65%)":"scale(100%)",transition:"transform 500ms cubic-bezier(0.4, 0, 0.2, 1)",pointerEvents:"none"}},shake:function(e){var t=e.doNotBump,n=e.hasBumpAnimation,r=e.hasNotification;return{animation:n&&r&&!t?"$shake 0.82s forwards":"none"}}}),x=function(e){var t=e.dragging,n=e.onClose,i=e.onMouseOutClose,u=e.onDragMouseDown,O=e.onDragMouseUp,E=e.openContainer,x=e.snoozed,k=(0,s.useDispatch)(),T=(0,o.useState)(!1),C=r(T,2),P=C[0],R=C[1],I=(0,o.useState)(!1),j=r(I,2),M=j[0],A=j[1],L=(0,o.useState)(),D=r(L,2),N=D[0],F=D[1],U=(0,o.useState)(!1),B=r(U,2),H=B[0],G=B[1],q=(0,b.useContainerState)(),W=r(q,3),V=W[0],z=W[1],Y=W[2],K=(0,b.useContainerOpen)(),X=r(K,1)[0],J=(0,b.useTeaser)().hasShownTeaser,Q=(0,s.useSelector)(w.selectCurrentContainerId),$=(0,o.useState)(!1),Z=r($,2),ee=Z[0],te=Z[1],ne=(0,h.default)(),re=r(ne,1)[0],oe=(0,v.default)(re),ae=oe.isClickToOpen,ie=oe.isHoverToOpen,se=oe.isHoverOutToClose,ue=oe.showInnerButtonsOnHover,ce=oe.showRightDragHandleOnHover,le=(0,s.useSelector)((0,d.selectBadgeNotificationData)()),de=le.text,fe=le.tipInstanceId;(0,o.useEffect)((function(){k((0,m.badgeShown)())}),[k]),(0,o.useEffect)((function(){var e=void 0;return z&&(e=setTimeout((function(){return te(!0)}),0)),function(){clearTimeout(e)}}),[z]),(0,o.useEffect)((function(){return X&&Y||J?G(!0):Y&&!N&&F(setTimeout((function(){return A(!0)}),15e3)),function(){clearTimeout(N)}}),[Y,N,X,H,J]),(0,o.useEffect)((function(){de&&k((0,m.miniBadgeTeaserShown)())}),[k,de]);var pe=(0,o.useState)(!1),he=r(pe,2),ve=he[0],ge=he[1];(0,o.useEffect)((function(){setTimeout((function(){return ge(!t)}),0)}),[t]);var ye=(0,o.useCallback)((function(){P||(R(!0),clearTimeout(N),ie&&E(fe),t||(k((0,m.badgeHover)()),ae&&k((0,_.sdataTipBadgeHoverWithoutOpenEvent)(Q))))}),[ae,P,N,ie,E,fe,t,k,Q]),me=(0,o.useCallback)((function(){R(!1),se&&i(2e3)}),[R,se,i]),be=(0,o.useCallback)((function(){ae&&ve&&(E(fe),k((0,m.badgeClick)()))}),[ve,k,ae,fe,E]),_e=(0,o.useCallback)((function(e){n(),k((0,m.badgeXClicked)()),e.stopPropagation()}),[k,n]),we=(0,o.useCallback)((function(e){u(e),e.stopPropagation()}),[u]),Oe=(0,o.useCallback)((function(e){O(e),e.stopPropagation()}),[O]),Ee=P&&ue,Se=P&&ce,xe={animateTeaserIn:ee,dragging:t,hasBumpAnimation:M,hasNotification:!!de,isClickToOpen:ae,isContainerLoading:V,isReady:Y,doNotBump:H},ke=S(xe);return x?a.default.createElement(o.Fragment,null):a.default.createElement("div",{className:ke.shake},a.default.createElement("div",{className:ke.teaserAnimateIn},a.default.createElement("div",{className:ke.root,onMouseOver:ye,onMouseLeave:me,onClick:be},a.default.createElement(c.default,{topLeftContainer:Ee&&a.default.createElement(f.default,{onMouseDown:we,onMouseUp:Oe}),topRightContainer:Ee&&a.default.createElement(p.default,{onClick:_e})},a.default.createElement("div",{className:ke.logoAnimation},a.default.createElement("div",{className:ke.loadAnimation},a.default.createElement(y.default,{styleVars:xe}))),Y&&de&&a.default.createElement(g.default,{text:de})),Se&&a.default.createElement(l.default,{onMouseDown:we,onMouseUp:Oe}))))};x.propTypes=E,x.defaultProps={openContainer:function(){},onClose:function(){},onMouseOutClose:function(){},onDragMouseDown:function(){},onDragMouseUp:function(){},dragging:!1,snoozed:!1},t.default=x},2803:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n(0)),o=n(3),a=i(n(1));function i(e){return e&&e.__esModule?e:{default:e}}var s={children:a.default.node,topLeftContainer:a.default.node,topMiddleContainer:a.default.node,topRightContainer:a.default.node},u=(0,o.createUseStyles)({root:{width:"80px",minHeight:"64px",borderRadius:"6px 0px 0px 6px",boxShadow:"0px 2px 35px rgba(0, 0, 0, 0.25);",position:"relative",background:"linear-gradient(180deg, #F26C25 0%, #CC4B06 100%);"},topRow:{position:"absolute",top:0,width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center"}}),c=function(e){var t=e.children,n=e.topLeftContainer,o=e.topMiddleContainer,a=e.topRightContainer,i=u();return r.default.createElement("div",{className:i.root},r.default.createElement("div",{className:i.topRow},r.default.createElement("div",null,n),r.default.createElement("div",null,o),r.default.createElement("div",null,a)),t)};c.propTypes=s,c.defaultProps={children:null,topLeftContainer:null,topMiddleContainer:null,topRightContainer:null};var l=c;t.default=l},2804:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=u(n(0)),o=n(3),a=u(n(1)),i=n(2),s=u(n(529));function u(e){return e&&e.__esModule?e:{default:e}}var c={onMouseDown:a.default.func,onMouseUp:a.default.func},l={root:{display:"flex"},container:{width:"27px",height:"100%",backgroundColor:i.Colors.main600,display:"flex",alignItems:"center",justifyContent:"center"}},d=(0,o.createUseStyles)(l),f=function(e){var t=e.onMouseDown,n=e.onMouseUp,o=d();return r.default.createElement("div",{className:o.root,onMouseDown:t,onMouseUp:n,role:"button",tabIndex:"0"},r.default.createElement("div",{className:o.container},r.default.createElement(s.default,{color:i.Colors.white})))};f.propTypes=c,f.defaultProps={onMouseDown:function(){},onMouseUp:function(){}};var p=f;t.default=p},2805:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s(n(0)),o=n(3),a=s(n(1)),i=s(n(529));function s(e){return e&&e.__esModule?e:{default:e}}var u={onMouseDown:a.default.func,onMouseUp:a.default.func},c=(0,o.createUseStyles)({root:{padding:"8px 4px 0 10px"}}),l=function(e){var t=e.onMouseDown,n=e.onMouseUp,o=c();return r.default.createElement("div",{className:o.root,onMouseDown:t,onMouseUp:n,onClick:function(e){return e.stopPropagation()}},r.default.createElement(i.default,{color:"white"}))};l.propTypes=u,l.defaultProps={onMouseDown:function(){},onMouseUp:function(){}},t.default=l},2806:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s(n(0)),o=n(3),a=s(n(1)),i=n(2);function s(e){return e&&e.__esModule?e:{default:e}}var u={onClick:a.default.func},c=(0,o.createUseStyles)({root:{padding:"8px 8px 0 0",lineHeight:0},hoverButton:{opacity:1,transition:"opacity 300ms","&:hover":{opacity:.5}}}),l=function(e){var t=e.onClick,n=c();return r.default.createElement("div",{className:n.root},r.default.createElement(i.Button,{buttonType:"unstyled",className:n.hoverButton,copy:r.default.createElement(i.Icon,{icon:"close-16",color:i.Colors.white}),onClick:t}))};l.propTypes=u,l.defaultProps={onClick:function(){}},t.default=l},2807:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(241),o=[r.TIPS_EXP_ENUM.click_static_new,r.TIPS_EXP_ENUM.offer_click_static_new,r.TIPS_EXP_ENUM.any_click_static_new],a=function(e){return o.includes(e)},i=function(e){return e===r.TIPS_EXP_ENUM.hover_static_new},s=function(e){return e===r.TIPS_EXP_ENUM.hover_static_new},u=function(e){return e===r.TIPS_EXP_ENUM.hover_static_new};t.default=function(e){return{isClickToOpen:a(e),isHoverToOpen:i(e),isHoverOutToClose:s(e),showInnerButtonsOnHover:a(e),showRightDragHandleOnHover:u(e)}}},2808:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s(n(0)),o=n(3),a=s(n(1)),i=n(2);function s(e){return e&&e.__esModule?e:{default:e}}var u={text:a.default.string},c={"@keyframes fade":{"0%":{opacity:0},"100%":{opacity:1}},bottomText:{composes:"price2",textAlign:"center",padding:"8px 2px",color:i.Colors.white,animation:"$fade 1s forwards"}},l=(0,o.createUseStyles)(c),d=function(e){var t=e.text,n=l();return r.default.createElement("div",{className:n.bottomText},t)};d.propTypes=u,d.defaultProps={text:null},t.default=d},2809:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s(n(0)),o=s(n(1)),a=n(3),i=n(2);function s(e){return e&&e.__esModule?e:{default:e}}var u={styleVars:o.default.object},c=(0,a.createUseStyles)({root:function(e){var t=e.hasNotification;return{paddingTop:e.isReady&&t?"8px":"0px",transition:"paddingTop 500ms cubic-bezier(0.4, 0, 0.2, 1)"}}}),l=function(e){var t=e.styleVars,n=c(t);return r.default.createElement("div",{className:n.root},r.default.createElement(i.Logo,{clickable:!1,color:i.Colors.white,size:30,h:!0}))};l.propTypes=u,l.defaultProps={styleVars:{}},t.default=l},2810:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=n(0),a=K(o),i=n(5),s=n(3),u=K(n(1)),c=n(37),l=K(n(2811)),d=K(n(57)),f=K(n(820)),p=K(n(30)),h=K(n(4)),v=K(n(6)),g=K(n(8)),y=K(n(24)),m=K(n(14)),b=n(219),_=K(n(325)),w=K(n(68)),O=K(n(619)),E=n(2),S=K(n(614)),x=n(15),k=n(18),T=K(n(43)),C=n(243),P=K(n(1068)),R=K(n(386)),I=K(n(244)),j=K(n(1029)),M=K(n(2559)),A=K(n(2447)),L=K(n(2448)),D=K(n(2562)),N=K(n(535)),F=n(16),U=K(n(841)),B=K(n(840)),H=K(n(2449)),G=K(n(2450)),q=K(n(2451)),W=K(n(2813)),V=K(n(181)),z=K(n(2560)),Y=K(n(433));function K(e){return e&&e.__esModule?e:{default:e}}function X(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,n){return function r(o,a){try{var i=t[o](a),s=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(s).then((function(e){r("next",e)}),(function(e){r("throw",e)}));e(s)}("next")}))}}var J=(0,s.createUseStyles)({middleHeader:{composes:"title1",color:E.Colors.grey900},contentLoading:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},seeMore:{marginTop:"1px"},seeDealSummary:{borderTop:"1px solid "+T.default.grey300}}),Q=function(){var e=J();return a.default.createElement("div",{className:e.contentLoading},a.default.createElement(E.LoadingIcon,null))},$=function(e){var t=e.isFullyExpandedPdp,n=e.isLaunchpad,s=e.isMiniEngagement,u=e.isTeaser,T=(0,i.useDispatch)(),K=(0,o.useRef)(),$=(0,o.useRef)(),Z=(0,o.useState)(!1),ee=r(Z,2),te=ee[0],ne=ee[1],re=T(F.useTeaserContainerShown),oe=r(re,2),ae=oe[0],ie=oe[1],se=(0,C.useContainerState)(),ue=r(se,1)[0],ce=(0,C.useContainerOpen)(),le=r(ce,2),de=le[0],fe=le[1],pe=(0,N.default)(),he=r(pe,3),ve=he[0],ge=he[2],ye=(0,C.useHasMainTip)(),me=(0,o.useState)(!0),be=r(me,2),_e=be[0],we=be[1],Oe=(0,R.default)()||[],Ee=(0,F.useShowMoreTips)(),Se=(0,i.useSelector)((0,x.selectCategoryIdsByTipInstanceIds)(Oe)),xe=(0,F.useHighestRankedTipInstance)(),ke=xe.id,Te=xe.categoryId,Ce=n||Ee?Oe:[ke],Pe=(0,j.default)(),Re=(0,U.default)(),Ie=Re.showBanner,je=void 0!==Ie&&Ie,Me=Re.copy,Ae=Re.color,Le=Re.ctaAction,De=Re.ctaCopy,Ne=(0,o.useState)(),Fe=r(Ne,2),Ue=Fe[0],Be=Fe[1],He=(0,o.useState)(!1),Ge=r(He,2),qe=Ge[0],We=Ge[1],Ve=(0,o.useState)(0),ze=r(Ve,2),Ye=ze[0],Ke=ze[1],Xe=(0,B.default)(),Je=(0,F.useTipInstanceFullscreen)(Xe),Qe=r(Je,2)[1],$e=!Ee&&!n&&Oe.length>1,Ze=(0,F.useBottomSheet)(),et=r(Ze,2),tt=et[0],nt=void 0===tt?{}:tt,rt=et[1],ot=(0,F.useTipInstanceBottomSheet)(nt.tipInstanceId),at=r(ot,1)[0],it=void 0===at?"":at,st=(0,I.default)()||{},ut=w.default.AMAZON_STORES.includes(st.id),ct=J(),lt=(0,o.useRef)(!0),dt=(0,o.useRef)(!0),ft=(0,o.useState)(!0),pt=r(ft,2),ht=pt[0],vt=pt[1],gt=(0,o.useState)(!1),yt=r(gt,2),mt=yt[0],bt=yt[1];(0,o.useEffect)((function(){X(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.default.getFeatureFlag("maybe_later_autopop_cta");case 2:t=e.sent,bt(t);case 4:case"end":return e.stop()}}),e,void 0)})))()}),[]),(0,o.useEffect)((function(){X(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.default.getSetting("hoveredSafariUpdateTooltip");case 2:t=e.sent,vt(t);case 4:case"end":return e.stop()}}),e,void 0)})))()}),[]),(0,o.useEffect)((function(){var e=setTimeout((function(){ye||we(!1)}),1e4);return function(){clearTimeout(e)}}),[ye]),(0,o.useEffect)((function(){"Main"===Te&&we(!1)}),[Te]),(0,o.useEffect)((function(){n&&X(regeneratorRuntime.mark((function e(){var t,n,o,a,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!st.id){e.next=11;break}return e.next=3,Promise.all([m.default.getInfo(),m.default.getUserFollow(),m.default.getStoreSessionCount(st.id)]);case 3:t=e.sent,n=r(t,3),o=n[0],a=n[1],i=n[2],Be(o),We(a.includes(st.id)),Ke(i);case 11:case"end":return e.stop()}}),e,void 0)})))()}),[st.id,st.storeIcon,n]),(0,o.useEffect)((function(){var e=function(e,t){var n=t.action,r=t.closePromptShown;n!==y.default.RESET_TEASER_CLOSED_WITHOUT_CTA_COUNT_DONE||r||ne(!0)};return v.default.addListener("honeyTips:tips",e),function(){v.default.removeListener("honeyTips:tips",e)}}),[]),(0,o.useEffect)((function(){if(lt.current&&!ue){if(n){var e=y.default.INCREMENT_LAUNCHPAD_TIP_SHOWN_BY_STORE,t=st&&st.id,r={background:!0};dt.current&&X(regeneratorRuntime.mark((function n(){var o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return dt.current=!1,n.next=3,p.default.getSessionId();case 3:return o=n.sent,n.next=6,v.default.send("honeyTips:tips",{action:e,sessionId:o,storeId:t},r);case 6:case"end":return n.stop()}}),n,void 0)})))()}fe(),n||ae||ie()}lt.current=!1}),[ue,de,n,fe,ie,st,ae]);var _t,wt,Ot=(_t=X(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s){e.next=4;break}return g.default.debug("honeyTips:connectedTeaserContainer: closed teaser in non-prompt variant"),T((0,k.closeTeaser)()),e.abrupt("return");case 4:g.default.debug("honeyTips:connectedTeaserContainer: closed teaser in prompt variant"),te||v.default.send("honeyTips:tips",{action:y.default.INCREMENT_TEASER_CLOSED_WITHOUT_CTA_COUNT},{background:!0}),T((0,k.closeTeaser)());case 7:case"end":return e.stop()}}),e,void 0)}))),function(){return _t.apply(this,arguments)}),Et=(wt=X(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ue&&Ue.isLoggedIn||m.default.openEmailAuth("login","launchpad-ext",!0),"FOLLOW"==(t=qe?"UNFOLLOW":"FOLLOW")?T((0,k.storeFollow)()):"UNFOLLOW"===t&&T((0,k.storeUnfollow)()),e.next=5,m.default.updateUserFollow(st.id,Ue.id,t);case 5:n=e.sent,We(n.includes(st.id));case 7:case"end":return e.stop()}}),e,void 0)}))),function(){return wt.apply(this,arguments)});(0,o.useEffect)((function(){void 0!==Pe&&Pe&&T((0,k.updateShowMoreTips)({showMoreTips:!0}))}),[Pe]);var St=(0,M.default)(K),xt=St.scrollToCategory,kt=St.addTipRef,Tt=St.scrollToTop,Ct=function(e){Ee||T((0,k.updateShowMoreTips)({showMoreTips:!0})),setTimeout((function(){xt(e)}),500)},Pt=function(){ge()},Rt=ue&&a.default.createElement(c.LoaderGroup,null)||null,It=n?!!Ue&&!ve&&a.default.createElement(b.StoreFollowUI,{inPopover:!1,store:st,storeFollowButton:a.default.createElement("div",{className:ct.followBtnOverrides},a.default.createElement(_.default,{allowTooltip:!1,isFollowing:qe,isHeaderButton:!0,store:{storeId:st.id,storeName:st.name},storeSessionCount:Ye,subSrc:"launchpad",updateUserFollow:Et,user:Ue}))}):null,jt=a.default.createElement(o.Fragment,null,It,0!==Ce.length&&Ce.map((function(e,r){var o=!Ee&&!n||ut&&r===Ce.length-1,i=ut?"1px":"0px";return a.default.createElement(q.default,{isFullyExpandedPdp:t,key:""+e,tipInstanceId:e},a.default.createElement("div",{key:e,style:{marginBottom:o?i:"8px"}},a.default.createElement(L.default,null,a.default.createElement("div",{ref:function(t){t&&kt(Se[e],t)}},a.default.createElement(P.default,{isTeaser:!0,isCurrentlyAutopopped:$e||u&&1===Oe.length,maybeLaterFeatureFlag:mt,hideCaret:!0,isSecondary:r>0,tipInstanceId:e,templateType:"card",scrollToTop:Tt,scrollToCard:Ct})))))}))),Mt=Xe&&a.default.createElement("div",{style:{minHeight:$.current}},Xe?a.default.createElement(q.default,{key:""+Xe,tipInstanceId:Xe},a.default.createElement(P.default,{tipInstanceId:Xe,templateType:"fullscreen"})):a.default.createElement(D.default,{yOffset:"45%"}))||null,At=ue?a.default.createElement(Q,null):!ve&&!Xe&&jt||null,Lt=ve&&a.default.createElement("div",{style:{minHeight:$.current}},a.default.createElement(H.default,{isLaunchpad:n}))||null,Dt=a.default.createElement(L.default,null,a.default.createElement(f.default,{id:it,open:nt.isOpen,onClose:rt,onTransitionEnd:function(){nt.isOpen||T((0,k.resetBottomSheet)())}},a.default.createElement(P.default,{tipInstanceId:nt.tipInstanceId,templateType:"bottomSheet"}))),Nt=a.default.createElement(E.NotificationBanner,{show:je,copy:Me,color:Ae,ctaAction:Le,ctaCopy:De,onClose:function(){return T((0,k.resetNotificationBanner)())},src:"UniversalContainer-ConnectedTeaserContainer",short:!0,stackAbove:!0,zIndex:3}),Ft=a.default.createElement("div",{className:ct.seeMore},a.default.createElement(W.default,{onClick:function(){return T((0,k.updateShowMoreTips)({showMoreTips:!Ee}))}})),Ut=a.default.createElement("div",{className:ct.seeDealSummary},a.default.createElement(l.default,{onClick:function(){T((0,k.updateShowMoreTips)({showMoreTips:!Ee})),T((0,k.clickSeeMoreTips)())}})),Bt=ut&&a.default.createElement(Y.default,{isContainerOpen:de}),Ht=_e?{flexBasis:0}:{},Gt=$e?_e?Ut:Ft:Bt;return a.default.createElement(V.default.Provider,null,a.default.createElement(A.default,{container:a.default.createElement("div",{style:{marginBottom:"16px "}},a.default.createElement(c.UniversalContainer,{open:de,"aria-expanded":!!Ee},a.default.createElement(c.UniversalContainerLayout,{ref:{refContent:K},styles:{footer:Ht,header:{flexBasis:"48px"}},header:a.default.createElement(O.default,{leftContainer:a.default.createElement((function(){return ve?a.default.createElement("span",{onClick:Pt},a.default.createElement(S.default,null)):Xe?a.default.createElement("span",{onClick:Qe(!1)},a.default.createElement(S.default,null)):a.default.createElement(z.default,{hasUserHovered:ht})}),null),middleContainer:a.default.createElement((function(){return Xe?a.default.createElement("span",{className:ct.middleHeader},h.default.getMessage("Droplist")):null}),null),rightContainer:a.default.createElement(G.default,{onClick:Ot}),style:{root:{height:"48px"}}}),footer:Gt},Rt,Nt,Mt,At,Lt,Dt)))}))};$.propTypes={isFullyExpandedPdp:u.default.bool,isLaunchpad:u.default.bool,isMiniEngagement:u.default.bool,isTeaser:u.default.bool},$.defaultProps={isFullyExpandedPdp:!1,isLaunchpad:!1,isMiniEngagement:!1,isTeaser:!1},t.default=$},2811:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DealSummaryNavigationButton=t.DealSummartNavigationDirection=t.DealSummartNavigationButtonTypes=void 0;var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=u(n(0)),a=u(n(1)),i=u(n(2812)),s=u(n(4));function u(e){return e&&e.__esModule?e:{default:e}}var c=t.DealSummartNavigationButtonTypes={ROUND:"round",STANDARD:"standard"},l=t.DealSummartNavigationDirection={UP:"up-line-16",DOWN:"down-line-16",RIGHT:"right-line-16",LEFT:"left-line-16"},d={rootRound:{maxWidth:200,borderRadius:100,padding:"9px 27px",boxShadow:"0px 6px 12px rgba(0, 0, 0, 0.08)"}},f=function(e){var t=e.type,n=e.direction,a=e.copy,s=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["type","direction","copy"]);return t===c.ROUND?o.default.createElement(i.default,r({text:a,"aria-label":a,classes:{root:d.rootRound},icon:n},s)):o.default.createElement(i.default,r({text:a,"aria-label":a,icon:n},s))};t.DealSummaryNavigationButton=f,f.propTypes={type:a.default.oneOf(Object.values(c)),copy:a.default.oneOfType([a.default.node,a.default.string]),direction:a.default.oneOf(Object.values(l))},f.defaultProps={type:c.STANDARD,copy:s.default.getMessage("See_Deal_Summary"),direction:l.RIGHT},t.default=f},2812:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.NavigationButton=void 0;var r=s(n(0)),o=s(n(1)),a=n(3),i=s(n(59));function s(e){return e&&e.__esModule?e:{default:e}}function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function c(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=(0,a.createUseStyles)({root:function(e){var t=e.background,n=e.classes;return d({height:"48px",display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer",border:"none",width:"100%",textAlign:"center",padding:"10px",flexDirection:"row"},(void 0===n?{}:n).root||{},{background:t})},text:function(e){var t=e.classes;return d({composes:"title1",paddingRight:6},(void 0===t?{}:t).text||{},{verticalAlign:"middle"})}}),h=function(e){var t,n=e.text,o=(e.classes,e.icon),a=e.children,s=c(e,["text","classes","icon","children"]),l=p(e);t=a?"string"==typeof a?r.default.createElement("div",{className:l.text}," ",a," "):a:"string"==typeof n?r.default.createElement("div",{className:l.text}," ",n," "):n;var d="string"==typeof o?r.default.createElement(i.default,{icon:o}):o;return r.default.createElement("button",u({tabIndex:0,"aria-label":"honey-tips-navigation-button",className:l.root},s),t,d)};t.NavigationButton=h,h.propTypes={text:o.default.oneOfType([o.default.string,o.default.node]),icon:o.default.oneOfType([o.default.string,o.default.node]),background:o.default.string,classes:o.default.object,children:o.default.oneOfType([o.default.string,o.default.node])},h.defaultProps={text:null,icon:null,background:"white",classes:{},children:null};var v=h;t.default=v},2813:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=c(n(0)),o=c(n(1)),a=n(5),i=c(n(4)),s=c(n(1012)),u=n(537);function c(e){return e&&e.__esModule?e:{default:e}}var l=function(e){var t=e.onClick,n=(0,a.useDispatch)();return r.default.createElement(s.default,{body:i.default.getMessage("View_More_Tips"),"aria-label":i.default.getMessage("View_More_Tips"),onClick:function(){n((0,u.clickSeeMoreTips)()),t(!0)}})};l.propTypes={onClick:o.default.func},l.defaultProps={onClick:null},t.default=l},2814:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=n(0),a=D(o),i=n(5),s=n(3),u=n(37),c=D(n(30)),l=D(n(4)),d=D(n(6)),f=D(n(68)),p=D(n(24)),h=n(219),v=D(n(325)),g=D(n(14)),y=D(n(619)),m=n(2),b=D(n(614)),_=n(18),w=n(243),O=D(n(1068)),E=D(n(386)),S=D(n(244)),x=D(n(2447)),k=D(n(433)),T=D(n(2448)),C=D(n(2562)),P=D(n(535)),R=n(1025),I=D(n(840)),j=D(n(2449)),M=D(n(2450)),A=D(n(2451)),L=D(n(2561));function D(e){return e&&e.__esModule?e:{default:e}}function N(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,n){return function r(o,a){try{var i=t[o](a),s=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(s).then((function(e){r("next",e)}),(function(e){r("throw",e)}));e(s)}("next")}))}}var F=(0,s.createUseStyles)({middleHeader:{composes:"title1",color:m.Colors.grey900},contentLoading:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},launchpadHeader:{borderBottom:"1px solid",borderBottomColor:m.Colors.grey50}}),U=function(){var e=F();return a.default.createElement("div",{className:e.contentLoading},a.default.createElement(m.LoadingIcon,null))},B=function(){var e=(0,i.useDispatch)(),t=F(),n=(0,o.useRef)(),s=(0,o.useRef)(),m=(0,o.useState)(!0),D=r(m,1)[0],B=(0,w.useContainerState)(),H=r(B,2),G=H[0],q=H[1],W=(0,w.useContainerOpen)(),V=r(W,2),z=V[0],Y=V[1],K=(0,P.default)(),X=r(K,3),J=X[0],Q=X[1],$=X[2],Z=(0,E.default)()||[],ee=Z.slice(0,4),te=(0,I.default)(),ne=(0,R.useTipInstanceFullscreen)(te),re=r(ne,2)[1],oe=(0,S.default)()||{},ae=f.default.AMAZON_STORES.includes(oe.id),ie=(0,o.useState)(),se=r(ie,2),ue=se[0],ce=se[1],le=(0,o.useState)(!1),de=r(le,2),fe=de[0],pe=de[1],he=(0,o.useState)(!1),ve=r(he,2),ge=ve[0],ye=ve[1],me=(0,o.useState)(0),be=r(me,2),_e=be[0],we=be[1],Oe=(0,o.useRef)(!0);(0,o.useEffect)((function(){N(regeneratorRuntime.mark((function e(){var t,n,o,a,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!oe.id){e.next=11;break}return e.next=3,Promise.all([g.default.getInfo(),g.default.getUserFollow(),g.default.getStoreSessionCount(oe.id)]);case 3:t=e.sent,n=r(t,3),o=n[0],a=n[1],i=n[2],ce(o),pe(a.includes(oe.id)),we(i);case 11:case"end":return e.stop()}}),e,void 0)})))()}),[oe.id,oe.storeIcon]),(0,o.useEffect)((function(){Z&&Z.length>0&&(ge||ye(!0))}),[Z,ge]),(0,o.useEffect)((function(){var e=p.default.INCREMENT_LAUNCHPAD_TIP_SHOWN_BY_STORE,t=oe&&oe.id,n={background:!0};t&&Oe.current&&N(regeneratorRuntime.mark((function r(){var o;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return Oe.current=!1,Y(),r.next=4,c.default.getSessionId();case 4:return o=r.sent,r.next=7,d.default.send("honeyTips:tips",{action:e,sessionId:o,storeId:t},n);case 7:case"end":return r.stop()}}),r,void 0)})))()}),[oe,Oe,Y]);var Ee,Se=(Ee=N(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return ue&&ue.isLoggedIn||g.default.openEmailAuth("login","launchpad-ext",!0),"FOLLOW"==(n=fe?"UNFOLLOW":"FOLLOW")?e((0,_.storeFollow)()):"UNFOLLOW"===n&&e((0,_.storeUnfollow)()),t.next=5,g.default.updateUserFollow(oe.id,ue.id,n);case 5:r=t.sent,pe(r.includes(oe.id));case 7:case"end":return t.stop()}}),t,void 0)}))),function(){return Ee.apply(this,arguments)});if(!q)return a.default.createElement(o.Fragment,null);var xe=G&&a.default.createElement(u.LoaderGroup,null)||null,ke=a.default.createElement(o.Fragment,null,0!==ee.length&&ee.map((function(e,t){var n=!D||t===ee.length-1,r=ae?"1px":"0px";return a.default.createElement("div",{key:e,style:{marginBottom:n?r:"8px"}},a.default.createElement(T.default,null,a.default.createElement(A.default,{isFullyExpandedPdp:!0,tipInstanceId:e},a.default.createElement(O.default,{hideCaret:!0,isSecondary:t>0,tipInstanceId:e,templateType:"card"}))))}))),Te=te&&a.default.createElement("div",{style:{minHeight:s.current}},te?a.default.createElement(O.default,{tipInstanceId:te,templateType:"fullscreen"}):a.default.createElement(C.default,{yOffset:"45%"}))||null,Ce=G?a.default.createElement(U,null):!J&&!te&&ke||null,Pe=J&&a.default.createElement("div",{style:{minHeight:s.current}},a.default.createElement(j.default,{isLaunchpad:!te}))||null;return 0===ee.length?a.default.createElement(o.Fragment,null):a.default.createElement(x.default,{container:a.default.createElement("div",{style:{marginBottom:"16px "}},a.default.createElement(u.UniversalContainer,{open:z},a.default.createElement(u.UniversalContainerLayout,{ref:{refContent:n},header:a.default.createElement("div",null,a.default.createElement("div",{className:t.launchpadHeader},a.default.createElement(y.default,{leftContainer:a.default.createElement((function(){return J?a.default.createElement("span",{onClick:$},a.default.createElement(b.default,null)):te?a.default.createElement("span",{onClick:re(!1)},a.default.createElement(b.default,null)):a.default.createElement(L.default,null)}),null),middleContainer:a.default.createElement((function(){return te?a.default.createElement("span",{className:t.middleHeader},l.default.getMessage("Droplist")):null}),null),rightContainer:a.default.createElement(M.default,{onClick:function(){e((0,_.tipContainerActionsClose)())},showFeedback:function(){return Q({tipInstanceId:null})}}),style:{height:"48px"}})),!!ue&&!J&&a.default.createElement(h.StoreFollowUI,{inPopover:!1,store:oe,storeFollowButton:a.default.createElement(v.default,{allowTooltip:!1,isFollowing:fe,isHeaderButton:!0,store:{storeId:oe.id,storeName:oe.name},storeSessionCount:_e,subSrc:"launchpad",updateUserFollow:Se,user:ue})})),footer:ae&&a.default.createElement(k.default,{isContainerOpen:z}),styles:{header:{flexBasis:"48px"}}},xe,Te,Ce,Pe)))})};B.propTypes={},t.default=B},2815:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=(0,r.useSelector)(o.selectCurrentContainerId),t=(0,r.useSelector)((0,a.selectUniversalContainerById)(e))||{},n=t.hasValidLaunchpadTips,i=void 0!==n&&n,s=t.hasValidLaunchpadBadgeTips,u=void 0!==s&&s;return{hasValidLaunchpadTips:i,hasValidLaunchpadBadgeTips:u}};var r=n(5),o=n(22),a=n(15)},2816:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(5),a=n(17),i=n(40),s=y(n(1028)),u=y(n(1030)),c=y(n(2817)),l=y(n(1035)),d=y(n(1036)),f=y(n(2821)),p=y(n(2824)),h=y(n(2825)),v=y(n(2826)),g=y(n(2828));function y(e){return e&&e.__esModule?e:{default:e}}t.default=function(){var e;return(0,s.default)(),(0,u.default)(),(0,v.default)(),(0,g.default)(),(0,c.default)(),(0,l.default)(),(0,d.default)(),(0,f.default)(),e=(0,o.useDispatch)(),(0,r.useEffect)((function(){e(a.storesActions.load()),e(i.userActions.load())}),[e]),(0,p.default)(),(0,h.default)(),null}},2817:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=function(){var e=(0,i.useDispatch)();(0,a.useEffect)((function(){var t=(0,l.default)("honeyTips:createRelevanceRequest")((function(t){var n=Array.isArray(t)?t:[t],a=r(n,1)[0].data.stateId,i=(0,s.default)();n.forEach((function(t){return e((n=t,function(e){var t=n.fetchedData,r=n.categoryId,a=n.data;if(n.update){var i=a.stateId,s={id:i,data:h({},r,o({},t,{id:i+"_"+r,relevanceStateId:i,categoryId:r}))},c=(0,u.normalize)(s,f.RELEVANCE_STATE);e({type:d.UPDATE_RELEVANCE,data:c})}}));var n})),e((0,c.default)(a,i))}));return function(){t()}}),[e])};var a=n(0),i=n(5),s=p(n(145)),u=n(27),c=p(n(2818)),l=p(n(62)),d=n(620),f=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(29));function p(e){return e&&e.__esModule?e:{default:e}}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},2818:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=h(n(145)),a=n(27),i=n(620),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(29)),u=n(15),c=n(1032),l=n(1033),d=n(537),f=h(n(2819)),p=h(n(2820));function h(e){return e&&e.__esModule?e:{default:e}}var v=function(e,t,n){return function(r){var u=Date.now(),c=(0,o.default)(),l={id:c,result:n,relevanceRequest:t,relevanceState:{id:e,relevanceResponseId:c,result:n,updated:u},created:u},f=(0,a.normalize)(l,s.RELEVANCE_RESPONSE);r({type:i.RELEVANCE_RESPONSE,data:f}),r((0,d.setCurrentTips)(c))}},g=function(e){return t=regeneratorRuntime.mark((function t(n,o){var a,i,s,d,h,g,y,m,b,_,w;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=(0,u.selectById)("relevanceRequests")(e)(o()),i=a.relevanceState,s=(0,u.selectAll)("categories")(o()),d=(0,u.selectAll)("tips")(o()),h=Object.keys(d),t.next=7,(0,f.default)(h);case 7:return g=t.sent,y=g.reduce((function(e,t){return r({},e,(n={},o=t,a=d[t],o in n?Object.defineProperty(n,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[o]=a,n));var n,o,a}),{}),m=(0,u.selectRelevanceStateDataById)(i)(o()),b=o().universalContainer.currentContainerId,t.next=13,(0,p.default)({categoryData:m,getEligibilityFilter:c.getEligibilityFilter,getScoringFn:l.getScoringFn,entities:{categories:s,tips:y},containerId:b,dispatch:n});case 13:_=t.sent,w=_.hits,n(v(i,a,w));case 16:case"end":return t.stop()}}),t,void 0)})),n=function(){var e=t.apply(this,arguments);return new Promise((function(t,n){return function r(o,a){try{var i=e[o](a),s=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(s).then((function(e){r("next",e)}),(function(e){r("throw",e)}));t(s)}("next")}))},function(e,t){return n.apply(this,arguments)};var t,n};t.default=function(e,t){return function(n,o){var c=(0,u.selectById)("relevanceStates")(e)(o()),l=c.data,d=Date.now(),f={id:t,relevanceState:r({},c,{updated:d,relevanceRequestId:t}),data:l,created:d},p=(0,a.normalize)(f,s.RELEVANCE_REQUEST);n({type:i.RELEVANCE_REQUEST,data:p}),n(g(t))}}},2819:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(n(1055)),o=a(n(1054));function a(e){return e&&e.__esModule?e:{default:e}}var i,s,u=function(e){return function(t){return e.indexOf(t)<0}},c=(i=regeneratorRuntime.mark((function e(t){var n,a,i,s,c,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,r.default)();case 2:return n=e.sent,a=n.honeyTipsConfiguration,i=a.blacklistTipIds,s=void 0===i?[]:i,c=t.filter(u(s)),e.next=8,(0,o.default)(c);case 8:return l=e.sent,e.abrupt("return",l);case 10:case"end":return e.stop()}}),e,void 0)})),s=function(){var e=i.apply(this,arguments);return new Promise((function(t,n){return function r(o,a){try{var i=e[o](a),s=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(s).then((function(e){r("next",e)}),(function(e){r("throw",e)}));t(s)}("next")}))},function(e){return s.apply(this,arguments)});t.default=c},2820:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=n(27),a=h(n(86)),i=h(n(12)),s=h(n(430)),u=n(208),c=h(n(71)),l=n(29),d=n(33),f=h(n(1040)),p=h(n(178));function h(e){return e&&e.__esModule?e:{default:e}}function v(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,n){return function r(o,a){try{var i=t[o](a),s=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(s).then((function(e){r("next",e)}),(function(e){r("throw",e)}));e(s)}("next")}))}}var g,y,m,b=(0,u.v4)(),_=(g=v(regeneratorRuntime.mark((function e(t,n){var o,u,c,l=t.debugEvent,d=t.action;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.default.getCurrent();case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0={};case 5:return o=e.t0,e.next=8,(0,p.default)();case 8:if(e.t1=e.sent,e.t1){e.next=11;break}e.t1={};case 11:return u=e.t1,c=o.storeId,e.next=15,(0,a.default)({debugEvent:l,action:d},r({},n,{url:window.location.href}),r({store:{id:c},productId:u&&u.id},(0,s.default)()))();case 15:case"end":return e.stop()}}),e,void 0)}))),function(e,t){return g.apply(this,arguments)}),w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=e.length===t.length&&e.every((function(e,n){return e===t[n]}));n||_({debugEvent:"tips_api_mismatched_tip_ids",action:"performance_relevanceengine_gettips"},{metricId:b,apiTipIds:t,testTraditionalTipIds:e})},O=function(e){var t=e.categoryData,n=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["categoryData"]),o=n.Tip_id,a=r({},n,{id:o});return r({},t,{id:t.categoryId,tips:[a]})},E=function(e,t){e.forEach((function(e){var n=e.tip,r=O(n),a=(0,o.normalize)(r,l.CATEGORY);t({type:d.SET_CATEGORY,data:a})}))},S=(y=v(regeneratorRuntime.mark((function e(t){var n,r,o,a,i,s,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.categoryData,r=t.dispatch,e.next=3,c.default.getTips(n);case 3:return o=e.sent,a=o.hits,i=void 0===a?[]:a,s=o.count,(u=void 0===s?0:s)&&E(i,r),e.abrupt("return",{hits:{hits:i,count:u}});case 7:case"end":return e.stop()}}),e,void 0)}))),function(e){return y.apply(this,arguments)}),x=(m=v(regeneratorRuntime.mark((function e(t){var n,r,o,a,i,s,u,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=performance.now(),r=(0,f.default)(t),o=performance.now(),e.next=5,c.default.useAPI();case 5:if(!e.sent){e.next=18;break}return _({debugEvent:"tips_api_performance",action:"performance_relevanceengine_traditional"},{fetchDeltaMs:o-n,metricId:b}),a=performance.now(),e.next=11,S(t);case 11:return i=e.sent,s=performance.now(),_({debugEvent:"tips_api_performance",action:"performance_relevanceengine_api"},{fetchDeltaMs:s-a,metricId:b}),u=r&&r.hits&&r.hits.hits&&r.hits.hits.map((function(e){return e._id}))||[],l=i&&i.hits&&i.hits.hits&&i.hits.hits.map((function(e){return e._id}))||[],w(u,l),e.abrupt("return",i);case 18:return e.abrupt("return",(0,f.default)(t));case 19:case"end":return e.stop()}}),e,void 0)}))),function(e){return m.apply(this,arguments)});t.default=x},2821:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=(0,o.useDispatch)();(0,r.useEffect)((function(){var t=(0,a.default)("honeyTips:updateVariant")((function(t){e((0,i.default)(t))}));return function(){t()}}),[e])};var r=n(0),o=n(5),a=s(n(62)),i=s(n(2822));function s(e){return e&&e.__esModule?e:{default:e}}},2822:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=f(n(12)),o=f(n(8)),a=f(n(14)),i=f(n(217)),s=f(n(2823)),u=f(n(268)),c=n(22),l=n(15),d=n(90);function f(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){return t=regeneratorRuntime.mark((function t(n,f){var p,h,v,g,y,m,b,_,w,O;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,p=f(),h=(0,c.selectCurrentContainerId)(p),v=(0,l.selectUniversalContainerById)(h)(p)||{},g=v.relevanceStateId,y=!(0,i.default)(e),t.next=8,(0,u.default)();case 8:return m=t.sent,t.next=11,(0,d.canShowAutoPop)();case 11:return b=t.sent,t.next=14,r.default.getCurrent();case 14:return _=t.sent,w=_&&_.id,t.next=18,a.default.getInfo();case 18:O=t.sent,n((0,s.default)(g,{storeId:w,merchId:y&&e.merchId,variantId:y&&e.variantId,parentId:y&&e.merchId,productId:y&&e.id,product:y&&e,isLaunchpad:m,isAutopop:b,store:_,user:O})),t.next=25;break;case 22:t.prev=22,t.t0=t.catch(0),o.default.error(t.t0);case 25:case"end":return t.stop()}}),t,void 0,[[0,22]])})),n=function(){var e=t.apply(this,arguments);return new Promise((function(t,n){return function r(o,a){try{var i=e[o](a),s=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(s).then((function(e){r("next",e)}),(function(e){r("throw",e)}));t(s)}("next")}))},function(e,t){return n.apply(this,arguments)};var t,n}},2823:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(27),i=n(6),s=(r=i)&&r.__esModule?r:{default:r},u=n(620),c=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(29));t.default=function(e,t){return function(n){var r=o({},t,{stateId:e}),i=o({},t,{id:e}),l=(0,a.normalize)(i,c.RELEVANCE_STATE);return n({type:u.UPDATE_VARIANT_IN_RELEVANCE_STATE,data:l}),s.default.send("honeyTips:updateVariantInRelevanceState",r),e}}},2824:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(40),o=n(17),a=n(0),i=n(5);t.default=function(){var e=(0,i.useDispatch)(),t=(0,i.useSelector)(r.userSelectors.selectUser()),n=t&&t.id,s=t&&t.isLoggedIn,u=(0,i.useSelector)(o.storesSelectors.selectCurrentStore()),c=u&&u.id,l=u&&u.isDoubleGold;(0,a.useEffect)((function(){n&&c&&s&&l&&e(r.userActions.getDoubleGoldActivationsByUserId(n))}),[e,n,c,s,l])}},2825:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=(0,a.useDispatch)();(0,o.useEffect)((function(){var t=function(t,n){"pre-open"===n.action&&e((0,u.handleUIAction)(n.pathname))};return s.default.addListener("ui:action",t),function(){s.default.removeListener("ui:action",t)}}),[e])};var r,o=n(0),a=n(5),i=n(6),s=(r=i)&&r.__esModule?r:{default:r},u=n(18)},2826:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(5),a=s(n(2827)),i=s(n(62));function s(e){return e&&e.__esModule?e:{default:e}}t.default=function(){var e=(0,o.useDispatch)();(0,r.useEffect)((function(){var t=(0,i.default)("offers:action")((function(t){var n=t.success.store,r=t.action;"offerActivated"===(void 0===r?"":r)&&e((0,a.default)(n))}));return function(){t()}}),[])}},2827:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i(n(12)),o=i(n(6)),a=n(17);function i(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){return t=regeneratorRuntime.mark((function t(n){var i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=e,t.t0){t.next=5;break}return t.next=4,r.default.getCurrent();case 4:t.t0=t.sent;case 5:return i=t.t0,n((0,a.update)(i)),t.next=9,o.default.send("honeyTips:updateStore",i);case 9:case"end":return t.stop()}}),t,void 0)})),n=function(){var e=t.apply(this,arguments);return new Promise((function(t,n){return function r(o,a){try{var i=e[o](a),s=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(s).then((function(e){r("next",e)}),(function(e){r("throw",e)}));t(s)}("next")}))},function(e){return n.apply(this,arguments)};var t,n}},2828:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=(0,i.useDispatch)();(0,a.useEffect)((function(){var t=void 0,n=void 0,a=(0,s.default)("honeyTips:initDataFetcherFactory")((function(){t=(0,s.default)("honeyTips:createRelevanceState")((function(t){e(r.default.load(t,o.default.getAll()))})),n=(0,s.default)("honeyTips:updateVariantInRelevanceState")((function(t){e(r.default.load(t,o.default.getAll()))}))}));return function(){a(),t&&t(),n&&n()}}),[e])};var r=u(n(2829)),o=u(n(848)),a=n(0),i=n(5),s=u(n(62));function u(e){return e&&e.__esModule?e:{default:e}}},2829:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loadDependencyData=void 0;var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(27),i=n(302),s=y(n(8)),u=y(n(9)),c=n(2830),l=n(89),d=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(29)),f=n(2831),p=n(2564),h=n(1069),v=n(2563),g=y(n(2833));function y(e){return e&&e.__esModule?e:{default:e}}function m(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var b=function(e,t,n){return function(r){var i,s,u,c=(i={type:n,id:e},s=n,u=o({},t,{type:n}),s in i?Object.defineProperty(i,s,{value:u,enumerable:!0,configurable:!0,writable:!0}):i[s]=u,i),l=(0,a.normalize)(c,d.CATEGORY_DEPENDENCY_DATA);return r({type:"CATEGORY_DEPENDENCY_DATA",data:l}),[l,c]}},_=function(e,t){return n=regeneratorRuntime.mark((function n(o){var a,d,v,y,m,_,w,O,E,S,x;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a=void 0,d=g.default[e]||{},v=d.maxTimeout,y=void 0===v?l.DEFAULT_MAX_TIMEOUT:v,n.prev=2,m=g.default[e],_=m.dependsOn,w=m.dataFetcher,n.t0=_,!n.t0){n.next=8;break}return n.next=8,(0,f.waitForDependencies)(_,t.stateId,e);case 8:return n.next=10,(0,c.timeoutPromise)(o(w(t)),{maxTimeout:y}).catch();case 10:return O=n.sent,E=o(b(t.stateId,O,e)),S=r(E,2),x=S[1],n.next=14,(0,p.fireDependencyFinishedEvent)({type:e,status:l.dependencyStatus.SUCCESS,data:O,stateId:t.stateId});case 14:return n.abrupt("return",x);case 17:return n.prev=17,n.t1=n.catch(2),s.default.warn(h.LOG_PREFIX+"fetchDependencyData: Could not load dependency data for "+e),(0,i.getIsProductPage)()&&u.default.sendEvent("tip004036",{debugEvent:"integration_failure",action:"fetchDependencyData",metadata_json:JSON.stringify({type:e,error:n.t1&&n.t1.toString()})}),n.next=23,(0,p.fireDependencyFinishedEvent)({type:e,status:l.dependencyStatus.FAILED,data:null,stateId:t.stateId});case 23:throw n.t1;case 24:return n.prev=24,clearTimeout(a),a=void 0,n.finish(24);case 28:case"end":return n.stop()}}),n,void 0,[[2,17,24,28]])})),o=function(){var e=n.apply(this,arguments);return new Promise((function(t,n){return function r(o,a){try{var i=e[o](a),s=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(s).then((function(e){r("next",e)}),(function(e){r("throw",e)}));t(s)}("next")}))},function(e){return o.apply(this,arguments)};var n,o},w=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Set;return function(r){for(var o=(g.default[t]||{}).dependsOn,a=[].concat(m(void 0===o?[]:o));a.length>0;){var i=a.pop(),s=g.default[i].dependsOn,u=void 0===s?[]:s;if(n.has(i))break;r(_(i,e)),n.add(i),a=[].concat(m(u),m(a))}}},O=t.loadDependencyData=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return function(n){var r=Array.from(new Set(t));s.default.debug(h.LOG_PREFIX+"loadDependencyData: Loading "+r.join(", "));var o=n((0,f.initializeDependencyListener)(e)),a=r.map((function(t){return n(_(t,e))}));return r.forEach((function(t){return n(w(e,t,new Set(r)))})),Promise.allSettled(a).then((function(t){o(),(0,v.logDependencyStatus)(e,t,!1)}))}};t.default={load:O}},2830:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.timeoutPromise=void 0;var r,o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=n(8),i=(r=a)&&r.__esModule?r:{default:r};var s={logger:function(e){return i.default.debug(e)},maxTimeout:5e3},u=t.timeoutPromise=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s,n=o({},s,t),r=new Promise((function(e,t){var r=setTimeout((function(){clearTimeout(r);var e="honeyTips:util:timeoutPromise Timed out in "+n.maxTimeout+"ms.",o=new Error(e);t(o)}),n.maxTimeout)}));return Promise.race([e,r])};t.default={timeout:u}},2831:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.waitForDependencies=t.initializeDependencyListener=t.onFinished=void 0;var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=l(n(62)),a=l(n(8)),i=n(89),s=n(2563),u=n(1069),c=n(2564);function l(e){return e&&e.__esModule?e:{default:e}}var d=t.onFinished=function(e){return(0,o.default)(u.FINISHED_EVENT)(e)},f=t.initializeDependencyListener=function(e){return function(t){var n=(0,s.getCategoryDependents)(),o=(0,s.getDependenciesToProcess)();return t(function(e){var t=e.data,n=e.pendingDependencies;return function(e){var o=Object.entries(n).filter((function(e){return 0===r(e,2)[1].size})).map((function(n){var o=r(n,1)[0];return e((0,s.callDataFetcher)(o,t))}));Promise.allSettled(o).then((function(e){var t=e.filter((function(e){return"fulfilled"===e.status})).map((function(e){return e.value}));!t||t.length<=0||(0,c.fireCreateRelevanceRequest)(t)}))}}({data:e,pendingDependencies:o})),d((function(r){var i=r.type,l=r.stateId;return t(function(e){var t=e.data,n=e.type,r=e.pendingDependencies,o=e.categoryDependents,i=e.stateId;return function(e){if(t.stateId===i){var l=o[n];for(var d in l)if(Object.prototype.hasOwnProperty.call(l,d)){var f=l[d],p=r[f];p.delete(n),0===p.size&&e((0,s.callDataFetcher)(f,t)).then(c.fireCreateRelevanceRequest).catch((function(e){a.default.warn(u.LOG_PREFIX+"callDataFetcher: "+n+": "+e)}))}}}}({data:e,type:i,stateId:l,pendingDependencies:o,categoryDependents:n}))}))}},p=t.waitForDependencies=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return new Promise((function(r,o){var s=new Set(e),c={},l=d((function(e){var d=e.type,f=e.data,p=e.status;if(e.stateId===t){if(s.has(d)&&(s.delete(d),c[d]=f),p===i.dependencyStatus.FAILED)return l(),void o(new Error(""+u.LOG_PREFIX+d+" failed to load"));0===s.size&&(l(),a.default.debug(u.LOG_PREFIX+"waitForDependencies: Successfully loaded dependencies for "+n),r(c))}}))}))};t.default={onFinished:d,waitFor:p,initialize:f}},2832:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=i(n(6)),a=i(n(8));function i(e){return e&&e.__esModule?e:{default:e}}function s(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,n){return function r(o,a){try{var i=t[o](a),s=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(s).then((function(e){r("next",e)}),(function(e){r("throw",e)}));e(s)}("next")}))}}var u,c=new Map,l=function(e){var t=e.categoryId,n=e.fetchedData,r=e.data;o.default.send("honeyTips:createRelevanceRequest",[{categoryId:t,fetchedData:n,data:r,update:!0}])},d=function(e){c.has(e)&&(c.get(e)(),c.delete(e))},f=function(e,t){"function"==typeof t&&c.set(e,t)},p=(u=s(regeneratorRuntime.mark((function e(t){var n,o,i,u,c,p,h,v,g,y=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.data,o=t.dataFetcher,i=t.categoryId,u=t.dispatch,d(i),c=void 0,p=function(e){l({categoryId:i,fetchedData:e,data:n})},h=new Promise((function(e,t){c=setTimeout((function(){a.default.debug("Tips:dataFetcher:timeout for:"+i),t(new Error("Timeout"))}),y)})),v=new Promise(function(){var e=s(regeneratorRuntime.mark((function e(t,r){var s,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=function(e){c?(a.default.debug("Tips:dataFetcher:resolved for:"+i),t(e)):(a.default.debug("Tips:dataFetcher:resolved late, running update for:"+i),p(e))},e.next=3,u(o(n,p,{resolve:s,reject:r}));case 3:l=e.sent,f(i,l);case 5:case"end":return e.stop()}}),e,void 0)})));return function(t,n){return e.apply(this,arguments)}}()),g=void 0,e.prev=7,e.next=10,Promise.race([h,v]).then((function(e){return{fetchedData:r({},e),categoryId:i,data:n,update:!!e}}));case 10:g=e.sent;case 11:return e.prev=11,clearTimeout(c),c=void 0,e.finish(11);case 15:return e.abrupt("return",g);case 16:case"end":return e.stop()}}),e,void 0,[[7,,11,15]])}))),function(e){return u.apply(this,arguments)});t.default={createDataFetcherPromise:p,addListener:f,cleanupListener:d,cleanupListeners:function(){c.forEach((function(e){return e()}))}}},2833:function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.dependencies=void 0;var o,a=n(89),i=n(624),s=(o=i)&&o.__esModule?o:{default:o};function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c=t.dependencies=(u(r={},a.dependencyTypes.PRODUCT_CATALOG,{dataFetcher:s.default.productCatalog}),u(r,a.dependencyTypes.PRODUCT_COUPON,{dataFetcher:s.default.productCoupon}),u(r,a.dependencyTypes.OFFERS,{dataFetcher:s.default.offer}),u(r,a.dependencyTypes.PAY_IN_FOUR,{dataFetcher:s.default.payInFour}),u(r,a.dependencyTypes.DROPLIST,{dataFetcher:s.default.droplist,dependsOn:[a.dependencyTypes.PRODUCT_CATALOG]}),u(r,a.dependencyTypes.PRICE_TREND_PRODUCT,{dataFetcher:s.default.priceTrendProduct,dependsOn:[a.dependencyTypes.PRODUCT_CATALOG]}),u(r,a.dependencyTypes.RELATIVE_PRICE_COMPARISON,{dataFetcher:s.default.relativePriceComparison,dependsOn:[a.dependencyTypes.PRODUCT_CATALOG]}),r);t.default=c},2834:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),a=l(o),i=l(n(1)),s=n(5),u=l(n(8)),c=n(18);function l(e){return e&&e.__esModule?e:{default:e}}var d=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={hasError:!1},n}var n,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),r(t,[{key:"componentDidCatch",value:(n=regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=this.props.sendSdataEvent,u.default.error(t),n(t);case 3:case"end":return e.stop()}}),e,this)})),i=function(){var e=n.apply(this,arguments);return new Promise((function(t,n){return function r(o,a){try{var i=e[o](a),s=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(s).then((function(e){r("next",e)}),(function(e){r("throw",e)}));t(s)}("next")}))},function(e){return i.apply(this,arguments)})},{key:"render",value:function(){var e=this.props.children;return this.state.hasError?a.default.createElement(o.Fragment,null):e}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0,error:e}}}]),t}(a.default.Component);d.propTypes={sendSdataEvent:i.default.func.isRequired,children:i.default.any},d.defaultProps={children:void 0};t.default=(0,s.connect)(null,(function(e){return{sendSdataEvent:function(t){return e((0,c.sdataTipBadgeInjectionError)(t))}}}))(d)},2835:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s(n(0)),o=s(n(1)),a=n(3),i=n(2);function s(e){return e&&e.__esModule?e:{default:e}}var u=(0,a.createUseStyles)({resetCss:{textTransform:"none",lineHeight:"normal",fontWeight:"normal",color:i.Colors.grey900}}),c=function(e){var t=e.children,n=u();return r.default.createElement("div",{className:n.resetCss},t)};c.propTypes={children:o.default.node},c.defaultProps={children:void 0},t.default=c},2836:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=u(n(8)),o=u(n(1022)),a=u(n(268)),i=n(90),s=n(302);function u(e){return e&&e.__esModule?e:{default:e}}var c,l="honeyTips:getIsValidLaunchpadPage:";t.default=(c=regeneratorRuntime.mark((function e(){var t,n,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,i.canRunTips)({ignorePageTypeCheck:!0});case 2:if(e.sent){e.next=6;break}return r.default.debug(l+" Can't run tips"),e.abrupt("return",!1);case 6:if(t=(0,s.getIsLaunchpadPage)(),r.default.debug(l+" isLaunchpadPage: "+t),t){e.next=10;break}return e.abrupt("return",!1);case 10:return e.next=12,(0,o.default)();case 12:if(n=e.sent,r.default.debug(l+" canShowLaunchpad: "+n),n){e.next=16;break}return e.abrupt("return",!1);case 16:return e.next=18,(0,a.default)();case 18:if(u=e.sent,r.default.debug(l+" canShowLaunchpadWithBlacklist: "+u),u){e.next=22;break}return e.abrupt("return",!1);case 22:return r.default.debug(l+" returning true"),e.abrupt("return",!0);case 24:case"end":return e.stop()}}),e,this)})),function(){var e=c.apply(this,arguments);return new Promise((function(t,n){return function r(o,a){try{var i=e[o](a),s=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(s).then((function(e){r("next",e)}),(function(e){r("throw",e)}));t(s)}("next")}))})},2837:function(e,t,n){"use strict";var r=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=g(n(36)),a=g(n(8)),i=g(n(6)),s=n(16),u=n(73),c=g(n(62)),l=g(n(2554)),d=n(921),f=n(178),p=g(n(169)),h=n(86),v=g(n(120));function g(e){return e&&e.__esModule?e:{default:e}}function y(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,n){return function r(o,a){try{var i=t[o](a),s=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(s).then((function(e){r("next",e)}),(function(e){r("throw",e)}));e(s)}("next")}))}}var m,b,_,w={urlToPageTypeMap:{},parentId:void 0,variantId:void 0},O=function(e){var t=e.parentId,n=e.variantId;w.parentId?w.parentId&&t&&w.parentId===t?w.variantId&&n&&w.variantId!==n?(w.variantId=n,(0,f.setProduct)(e),i.default.send("honeyTips:updateVariant",e)):a.default.debug("honeyTips:pageController:same product, dont update"):(w.parentId=t,w.variantId=n,(0,f.setProduct)(e),i.default.send("honeyTips:updateProduct",e)):(w.parentId=t,w.variantId=n,a.default.debug("honeyTips:pageController:setting initial product"),(0,f.setProduct)(e))};(0,s.productFetcherListener)((m=y(regeneratorRuntime.mark((function e(t){var n,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.default.debug("honeyTips:pageController:product v4"),i.default.send("pdp:debug",{eventName:"tips got hpid"},{background:!0,ignoreResponse:!0}),e.next=4,(0,p.default)();case 4:n=e.sent,r=n&&n.id,o=(0,d.formatInitialProduct)(t,r),(0,h.sdataTipsDebugProductFetched)(o),O(o);case 9:case"end":return e.stop()}}),e,void 0)}))),function(e){return m.apply(this,arguments)})),(0,c.default)("current:product")((b=y(regeneratorRuntime.mark((function e(t){var n,r,o,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.default.debug("honeyTips:pageController:product v5"),i.default.send("pdp:debug",{eventName:"tips got hpid"},{background:!0,ignoreResponse:!0}),n=(t||{}).data,e.next=5,(0,p.default)();case 5:r=e.sent,o=r&&r.id,s=(0,d.formatInitialProductV5)(n,o),(0,h.sdataTipsDebugProductFetched)(s),O(s);case 10:case"end":return e.stop()}}),e,void 0)}))),function(e){return b.apply(this,arguments)})),(0,c.default)("optimus:productDetected")((_=y(regeneratorRuntime.mark((function e(t){var n,r,s,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.default.debug("honeyTips:pageController:optimusProductDetected"),e.next=3,o.default.getVariant((0,v.default)());case 3:if("optimus_fetcher"===e.sent){e.next=7;break}return a.default.debug("honeyTips:pageController:optimus fetcher not enabled, ignoring optimus product"),e.abrupt("return");case 7:return i.default.send("pdp:debug",{eventName:"tips got hpid"},{background:!0,ignoreResponse:!0}),n=(t||{}).data,e.next=11,(0,p.default)();case 11:r=e.sent,s=r&&r.id,u=(0,d.formatInitialProductOptimus)(n,s),(0,h.sdataTipsDebugProductFetched)(u),O(u);case 16:case"end":return e.stop()}}),e,void 0)}))),function(e){return _.apply(this,arguments)}));var E,S,x=function(e){if(!w.parentId){var t=e.canonicalUrl;w.canonicalUrl!==t&&(a.default.debug("honeyTips:pageController:handleGenericProduct setting product",{product:e}),(0,f.setProduct)(e))}},k=(E=y(regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new URL(document.URL),n=w.urlToPageTypeMap[t]||{},r=n.isGeneric,e.abrupt("return",!!r);case 3:case"end":return e.stop()}}),e,void 0)}))),function(){return E.apply(this,arguments)});(0,c.default)("current:product:generic")((S=y(regeneratorRuntime.mark((function e(t){var n,o,i,s,u,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.default.debug("honeyTips:pageController:product generic"),e.next=3,Promise.all([(0,p.default)(),k()]);case 3:if(n=e.sent,o=r(n,2),i=o[0],o[1]){e.next=10;break}return a.default.debug("honeyTips:pageController:product generic - generic product not allowed, returning early"),e.abrupt("return");case 10:s=i&&i.id,u=(t||{}).data,c=(0,d.formatInitialProductGeneric)(u,s),(0,h.sdataTipsDebugProductFetched)(c),x(c);case 15:case"end":return e.stop()}}),e,void 0)}))),function(e){return S.apply(this,arguments)})),(0,c.default)("honeyTips:updateProduct")((function(){a.default.debug("honeyTips:pageController:updateProduct")})),(0,c.default)("honeyTips:updateVariant")((function(){a.default.debug("honeyTips:pageController:updateVariant")})),(0,c.default)("honeyTips:updateLaunchpad")((function(){a.default.debug("honeyTips:pageController:newLaunchpad")})),(0,c.default)("honeyTips:newPage")((function(){a.default.debug("honeyTips:pageController:newPage")})),(0,c.default)("honeyTips:turnOff")((function(){a.default.debug("honeyTips:pageController:turnOff")})),u.PAGE_TYPES.map((function(e){return(0,c.default)("pageDetected:"+e)((function(t){var n=(t||{}).data;!function(e){var t=e.currPageType,n=e.isGeneric,r=l.default.getInitialized(),o=l.default.getInitalizing(),a=new URL(document.URL);w.urlToPageTypeMap[a]||(w.urlToPageTypeMap[a]={}),w.urlToPageTypeMap[a][t]=!0,w.urlToPageTypeMap[a].isGeneric=n;var u=Object.keys(w.urlToPageTypeMap[a]),c=u.some(s.isProductPage),d=u.some(s.isLaunchpadPage);r||o||(i.default.send("honeyTips:newPage",null),(0,p.default)()),c||d||!r||o||(i.default.send("honeyTips:turnOff",null),w.parentId=null,w.variantId=null,w.isLaunchPad=null),d&&!w.isLaunchPad&&(w.parentId=null,w.variantId=null,w.isLaunchPad=!0,i.default.send("honeyTips:updateLaunchpad",null)),c&&i.default.send("pdp:debug",{eventName:"tips waiting for hpid"},{background:!0,ignoreResponse:!0})}({currPageType:e,isGeneric:"GENERIC"===n})}))}))},2838:function(e,t,n){"use strict";n(2839)},2839:function(e,t,n){"use strict";var r=F(n(8)),o=F(n(161)),a=n(35),i=n(921),s=F(n(6)),u=n(216),c=n(396),l=n(270),d=F(n(36)),f=n(73),p=n(34),h=n(432),v=n(628),g=n(1045),y=n(82),m=n(65),b=n(612),_=n(269),w=n(119),O=n(625),E=n(920),S=n(17),x=n(631),k=n(40),T=n(629),C=n(627),P=n(267),R=n(626),I=n(630),j=n(434),M=F(n(2840)),A=F(n(120)),L=n(2841),D=n(2566),N=n(1039);function F(e){return e&&e.__esModule?e:{default:e}}function U(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,n){return function r(o,a){try{var i=t[o](a),s=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(s).then((function(e){r("next",e)}),(function(e){r("throw",e)}));e(s)}("next")}))}}var B,H,G,q,W,V,z,Y=[(0,A.default)(),"extension_store_coupon_and_savings_stats_source",a.STANDALONE_EXPERIMENT,"tips_fetch_fallback_product","tips_data"],K=function(e){return["PRODUCT","SHOPIFY_PRODUCT_PAGE"].includes(e)},X=function(e){return["HOMEPAGE"].includes(e)},J=(B=U(regeneratorRuntime.mark((function e(t){var n,r,a,i,s=t.pageId,c=t.product;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=c.parentId,r=c.productId,a=m.pageSelectors.selectCurrentPageId()(o.default.getState()),w.productFetcherSelectors.selectProductParentIdByPageId(a)(o.default.getState())===n){e.next=8;break}return e.next=6,o.default.dispatch(u.tipsActions.initContainer());case 6:e.next=10;break;case 8:i=m.pageSelectors.selectContainerIdByPageId(a)(o.default.getState()),o.default.dispatch(m.pageActions.setContainerId({containerId:i,pageId:s}));case 10:return o.default.dispatch(m.pageActions.updateCurrentPage()),e.next=13,o.default.dispatch(_.catalogProductsActions.loadProductByProductId(r));case 13:return e.next=15,o.default.dispatch(j.priceTrendProductActions.loadProductByProductId(r));case 15:return e.next=17,o.default.dispatch(l.couponsActions.loadTopProductCoupon({parentId:n}));case 17:return e.next=19,o.default.dispatch(I.comparisonShoppingActions.loadWebPriceComparisonViewed({parentId:n}));case 19:return e.next=21,o.default.dispatch(y.offersActions.loadProductOffer(c));case 21:return e.next=23,o.default.dispatch(O.droplistActions.loadDroplistAndCollectionsByVimProduct(c));case 23:return e.next=25,o.default.dispatch(v.honeyPayNowActions.loadByProduct({product:c,subSrc:"tips"}));case 25:return e.next=27,o.default.dispatch(x.teamDealsActions.load(c));case 27:return e.next=29,o.default.dispatch(b.payInFourActions.load());case 29:(0,N.sendCompareTipsSdataDebounced)();case 30:case"end":return e.stop()}}),e,void 0)}))),function(e){return B.apply(this,arguments)}),Q=(H=U(regeneratorRuntime.mark((function e(t){var n,i,s,f,h,v,g,_,w,O,E,S,x,k,P;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,N.cancelCompareTips)(),e.next=3,o.default.dispatch(m.pageActions.addPageType({pageType:t}));case 3:if(n=m.pageSelectors.selectMostRecentPageId()(o.default.getState()),i=m.pageSelectors.selectPageTypesByPageId(n)(o.default.getState())||[],s=i.some(X),f=i.some(K),!s&&!f){e.next=12;break}return e.next=10,(0,D.updateHoldoutOverride)();case 10:return e.next=12,Promise.all([o.default.dispatch(c.deviceActions.loadDeviceSetting("device:tipsBucketDate")),o.default.dispatch(c.deviceActions.loadDeviceSetting("device:tipsDevGroupOverride"))]);case 12:if(h=M.default.selectCanRunTips(o.default.getState()),v=h.canRunTips,g=h.reason,!v){e.next=52;break}return e.next=16,Promise.all([o.default.dispatch(l.couponsActions.loadStats()),o.default.dispatch(p.experimentsActions.loadVariants([(0,A.default)(),a.CASHBACK_EXPERIMENT,a.CASHBACK_US_EXPERIMENT,a.GOLD_CASHBACK_EXPERIMENT,a.STANDALONE_EXPERIMENT,a.OFFERS_CTA_EXPERIMENT])),o.default.dispatch(u.tipsActions.loadTipsShown()),o.default.dispatch(R.storeInsightsActions.loadStoreInsights())]);case 16:if(d.default.trackImpression(a.STANDALONE_EXPERIMENT),d.default.trackImpression((0,A.default)()),d.default.trackImpression(a.CASHBACK_EXPERIMENT),_=m.pageSelectors.selectCurrentPageId()(o.default.getState()),w=m.pageSelectors.selectPendingPageId()(o.default.getState()),O=m.pageSelectors.selectPageTypesByPageId(_)(o.default.getState())||[],E=O.some(K),S=f&&(!E||!w)||s,e.t0=S,!e.t0){e.next=28;break}return e.next=28,o.default.dispatch(m.pageActions.updateCurrentPage());case 28:if(x=m.pageSelectors.selectCurrentPageId()(o.default.getState()),k=m.pageSelectors.selectContainerIdByPageId(x)(o.default.getState()),P=!k,e.t1=P,!e.t1){e.next=35;break}return e.next=35,o.default.dispatch(u.tipsActions.initContainer());case 35:if(P&&(0,L.mountApp)(),P){e.next=38;break}return e.abrupt("return");case 38:if(!s){e.next=49;break}return e.next=41,Promise.all([o.default.dispatch(y.offersActions.loadEligibility()),o.default.dispatch(y.offersActions.loadLaunchpadOffersConfiguration())]);case 41:return e.next=43,o.default.dispatch(y.offersActions.loadStoreOffer());case 43:return e.next=45,o.default.dispatch(T.saleAlertsActions.loadSaleAlert());case 45:return e.next=47,o.default.dispatch(b.payInFourActions.load());case 47:return e.next=49,o.default.dispatch(C.storeDealsActions.loadStoreDeals());case 49:(0,N.sendCompareTipsSdataDebounced)(),e.next=55;break;case 52:o.default.dispatch(m.pageActions.updateCurrentPage()),r.default.debug("honeyTips:events:cantRunTips reason: "+g),(0,L.unmountApp)();case 55:case"end":return e.stop()}}),e,void 0)}))),function(e){return H.apply(this,arguments)}),$=(G=U(regeneratorRuntime.mark((function e(){var t,n,r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=m.pageSelectors.selectCurrentPageId()(o.default.getState()),n=m.pageSelectors.selectPageTypesByPageId(t)(o.default.getState()),r=n.some((function(e){return K(e)})),n.some((function(e){return X(e)})),!r){e.next=9;break}return a=w.productFetcherSelectors.selectProductByPageId(t)(o.default.getState()),e.next=9,o.default.dispatch(v.honeyPayNowActions.loadByProduct({product:a,subSrc:"tips"}));case 9:(0,N.sendCompareTipsSdataDebounced)();case 10:case"end":return e.stop()}}),e,void 0)}))),function(){return G.apply(this,arguments)}),Z=function(e){var t=(e&&e.partialObservation||{}).url;return t||(t=m.pageSelectors.selectMostRecentPageId()(o.default.getState())),t},ee=function(e,t){var n=t(e,S.storesSelectors.selectCurrentStoreId()(o.default.getState())),r=Z();o.default.dispatch(w.productFetcherActions.productFetched({pageId:r,product:n})),J({pageId:r,product:n})},te=(q=U(regeneratorRuntime.mark((function e(t){var n,r,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=S.storesSelectors.selectCurrentStoreId()(o.default.getState()),r=(0,i.formatInitialProductGeneric)(t,n),a=Z(),o.default.dispatch(h.genericFetcherActions.productFetched({pageId:a,product:r})),o.default.dispatch(O.droplistActions.loadDroplistAndCollectionsByGenericProduct(r));case 5:case"end":return e.stop()}}),e,void 0)}))),function(e){return q.apply(this,arguments)}),ne=(W=U(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=w.productFetcherSelectors.selectCurrentPageProduct(o.default.getState())||{},n=t.parentId,e.t0=n,!e.t0){e.next=5;break}return e.next=5,o.default.dispatch(l.couponsActions.loadTopProductCoupon({parentId:n}));case 5:(0,N.sendCompareTipsSdataDebounced)();case 6:case"end":return e.stop()}}),e,void 0)}))),function(){return W.apply(this,arguments)}),re=(V=U(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,(0,f.waitForUrlChange)();case 3:o.default.dispatch(m.pageActions.pageInit()),e.next=0;break;case 6:case"end":return e.stop()}}),e,void 0)}))),function(){return V.apply(this,arguments)}),oe=function(){var e;s.default.addListener("droplist:update",(e=U(regeneratorRuntime.mark((function e(t){var n,r,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=o.type,r=o.product,"productFetcher"===n&&!0===r.imprint&&ee(r,i.formatInitialProduct);case 2:case"end":return e.stop()}}),e,void 0)}))),function(t){return e.apply(this,arguments)}))},ae=function(){var e;s.default.addListener("current:product",(e=U(regeneratorRuntime.mark((function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=r.data,ee(n,i.formatInitialProductV5);case 2:case"end":return e.stop()}}),e,void 0)}))),function(t){return e.apply(this,arguments)}))},ie=function(){var e;s.default.addListener("current:product:generic",(e=U(regeneratorRuntime.mark((function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.data,e.next=3,te(n);case 3:case"end":return e.stop()}}),e,void 0)}))),function(t){return e.apply(this,arguments)}))};(z=U(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.default.dispatch(p.experimentsActions.loadVariants(Y));case 2:if("new_data"===p.experimentSelectors.selectVariant("tips_data")(o.default.getState())){e.next=5;break}return e.abrupt("return");case 5:return o.default.dispatch(u.tipsActions.loadConfiguration()),o.default.dispatch(u.tipsActions.loadTipsAndCategories()),o.default.dispatch(c.deviceActions.loadIsFirstPageAfterInstall()),o.default.dispatch(g.launchpadActions.load()),o.default.dispatch(m.pageActions.pageInit()),e.next=12,o.default.dispatch(k.userActions.load());case 12:return e.next=14,o.default.dispatch(k.userActions.loadSettings());case 14:return e.next=16,o.default.dispatch(P.adblockActions.checkForAdblock());case 16:return e.next=18,o.default.dispatch(S.storesActions.load());case 18:return e.next=20,o.default.dispatch(E.sessionActions.loadSession());case 20:return e.next=22,o.default.dispatch(u.tipsActions.loadDeprioritization());case 22:re(),f.PAGE_TYPES.map((function(e){return s.default.addListener("pageDetected:"+e,(function(){Q(e)}))})),oe(),ae(),s.default.addListener("user:current:update",U(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$();case 2:case"end":return e.stop()}}),e,void 0)})))),ie(),s.default.addListener("honeyTips:pdpCoupons:honeyProductCoupons:init",U(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ne();case 2:case"end":return e.stop()}}),e,void 0)}))));case 29:case"end":return e.stop()}}),e,void 0)}))),function(){return z.apply(this,arguments)})()},2840:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(25),a=n(12),i=(r=a)&&r.__esModule?r:{default:r},s=n(17),u=n(40),c=n(920),l=n(396),d=n(65),f=n(2565),p=n(2566);var h=(0,o.createSelector)(s.storesSelectors.selectCurrentStore(),c.sessionSelectors.selectCurrentSession(),(function(e,t){return i.default.isBlockingCDNLogic(e,t)})),v=(0,o.createSelector)(s.storesSelectors.selectCurrentStore(),(function(e){return e.tips&&e.tips.configuration&&e.tips.configuration.blacklistDefaultLaunchpadPathnameByStoreId}),(function(e,t){return e&&t.includes(e.id)})),g=(0,o.createSelector)(s.storesSelectors.selectCurrentStore(),(function(e){return e.tips&&e.tips.configuration&&e.tips.configuration.blocklistLaunchpadStoreIds}),(function(e,t){return e&&t.includes(e.id)})),y=(0,o.createSelector)(s.storesSelectors.selectCurrentStore(),(function(e){return e.tips&&e.tips.configuration&&e.tips.configuration.blocklistPDPStoreIds}),(function(e,t){return e&&t.includes(e.id)})),m=(0,o.createSelector)(s.storesSelectors.selectCurrentStore(),(function(e){return e.tips&&e.tips.configuration&&e.tips.configuration.blacklistedDynamicUrlsByStoreId}),(function(e,t){var n=(e||{}).id;if(t&&t[n]){var r=window&&window.location&&window.location.href;if((t[n]||[]).some((function(e){return r.startsWith(e)})))return!0}return!1})),b=(0,o.createSelector)(s.storesSelectors.selectCurrentStore(),(function(e){return e.tips&&e.tips.configuration&&e.tips.configuration.blacklistedStaticUrlsByStoreId}),(function(e,t){var n=(e||{}).id;if(t&&t[n]){var r=window&&window.location&&window.location.href;if((t[n]||[]).includes(r))return!0}return!1})),_=(0,o.createSelector)(s.storesSelectors.selectCurrentStore(),(function(e){return e.tips&&e.tips.configuration&&e.tips.configuration.allowlistDynamicUrlsByStoreId}),(function(e){return e.tips&&e.tips.configuration&&e.tips.configuration.allowlistStaticUrlsByStoreId}),(function(e,t,n){var r=e&&e.id,o=!1,a=window&&window.location&&window.location.href;if(t&&t[r]){if((t[r]||[]).some((function(e){return a.startsWith(e)})))return!0;o=!0}if(n&&n[r]){if((n[r]||[]).includes(a))return!0;o=!0}return!o})),w=(0,o.createSelector)(l.deviceSelectors.selectDeviceSetting(f.DEVICE_KEY_DATE),l.deviceSelectors.selectDeviceSetting(f.DEVICE_KEY_GROUP_OVERRIDE),u.userSelectors.selectUser(),(function(e,t,n){return"control"===(0,p.getTipsGroup)({bucketDate:e,devGroupOverride:t,userId:n&&n.id})})),O=(0,o.createSelector)(l.deviceSelectors.selectDeviceSetting("tipsLoggedOutDisabled"),u.userSelectors.selectSetting("tipsEnabled"),u.userSelectors.selectUser(),(function(e,t,n){return n&&n.isLoggedIn?!!t?{tipsEnabledByUser:!0}:void 0===t?{tipsEnabledByUser:!1,reason:"tips_enabled_undefined"}:{tipsEnabledByUser:!1,reason:"tips_enabled_false"}:e?{tipsEnabledByUser:!1,reason:"tips_logged_out_disabled"}:{tipsEnabledByUser:!0}})),E=(0,o.createSelector)(d.pageSelectors.selectIsHomePage,d.pageSelectors.selectIsProductPage,h,v,g,m,b,l.deviceSelectors.selectIsFirstPageAfterInstall(),s.storesSelectors.selectCurrentStoreStandDown,_,y,w,O,(function(e,t,n,r,o,a,i,s,u,c,l,d,f){var p=u.standDown,h=f.tipsEnabledByUser,v=f.reason;if(n)return{canRunTips:!1,reason:"blocking CDN"};if(["nopopup","suspend"].includes(p))return{canRunTips:!1,reason:"stand down"};if(!e&&!t)return{canRunTips:!1,reason:"not valid page"};if(d)return{canRunTips:!1,reason:"holdout group"};if(!h)return{canRunTips:!1,reason:v};if(e){if(r)return{canRunTips:!1,reason:"isDefaultLaunchpadPathBlacklisted"};if(o)return{canRunTips:!1,reason:"isBlocklistLaunchpad"};if(a)return{canRunTips:!1,reason:"isDynamicBlacklist"};if(i)return{canRunTips:!1,reason:"isStaticBlacklist"};if(s)return{canRunTips:!1,reason:"isFirstPageAfterInstall"};if(!c)return{canRunTips:!1,reason:"isNotAllowedLaunchpage"}}return t&&l?{canRunTips:!1,reason:"isBlocklistPDP"}:{canRunTips:!0}}));t.default={selectCanRunTips:E}},2841:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.unmountApp=t.mountApp=void 0;var r=i(n(0)),o=i(n(2842)),a=i(n(2843));function i(e){return e&&e.__esModule?e:{default:e}}function s(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,n){return function r(o,a){try{var i=t[o](a),s=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(s).then((function(e){r("next",e)}),(function(e){r("throw",e)}));e(s)}("next")}))}}var u,c,l=void 0;t.mountApp=(u=s(regeneratorRuntime.mark((function e(){var t,n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l){e.next=7;break}return e.next=3,(0,a.default)(r.default.createElement(o.default,null));case 3:t=e.sent,n=t.container,i=t.unmountApp,l={container:n,unmountApp:i};case 7:case"end":return e.stop()}}),e,void 0)}))),function(){return u.apply(this,arguments)}),t.unmountApp=(c=s(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l&&l.unmountApp(),l=null;case 2:case"end":return e.stop()}}),e,void 0)}))),function(){return c.apply(this,arguments)})},2842:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function(){return null}},2843:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=f(n(0)),o=n(46),a=n(50),i=n(3),s=f(n(170)),u=n(5),c=f(n(146)),l=n(863),d=f(n(161));function f(e){return e&&e.__esModule?e:{default:e}}var p,h,v=function(e){var t=new MutationObserver((function(n){var r=!0,o=!1,a=void 0;try{for(var i,s=n[Symbol.iterator]();!(r=(i=s.next()).done);r=!0){var u=i.value;"attributes"===u.type&&"style"===u.attributeName&&(t.disconnect(),e.style="z-index: 2147483647 !important")}}catch(e){o=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw a}}}));return t.observe(e,{attributes:!0,attributeFilter:["style"]}),t},g=(p=regeneratorRuntime.mark((function e(t){var n,f,p,h,g,y,m,b,_,w;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,s.default)(),f=n.plugins,(p=document.createElement("div")).style="z-index: 2147483647 !important",document.body.appendChild(p),h=v(p),g="closed",e.next=9,(0,c.default)(p,null,{mode:g,dontInjectFonts:!0});case 9:return y=e.sent,m=new i.SheetsRegistry,(b=(0,a.create)()).setup({plugins:f,insertionPoint:y.getElementById("honey")}),_=r.default.createElement(u.Provider,{store:d.default},r.default.createElement(i.JssProvider,{registry:m,jss:b},r.default.createElement(l.Provider,{value:{shadowContainer:p}},t))),e.next=16,(0,c.default)(p,_,{mode:g,dontInjectFonts:!0,feature:"honey-tips",surface:"badge"});case 16:return w=function(){h.disconnect(),(0,o.unmountComponentAtNode)(y)},e.abrupt("return",{container:y,unmountApp:w});case 18:case"end":return e.stop()}}),e,void 0)})),h=function(){var e=p.apply(this,arguments);return new Promise((function(t,n){return function r(o,a){try{var i=e[o](a),s=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(s).then((function(e){r("next",e)}),(function(e){r("throw",e)}));t(s)}("next")}))},function(e){return h.apply(this,arguments)});t.default=g},2844:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(18);function o(){this.installed=!1,this.onUnloadFired=!1}o.prototype.install=function(){var e=this,t=function(t){e.onUnloadFired||(e.onUnloadFired=!0,(0,r.sdataTipsDebug)({debugEvent:"offers_miss_rate",action:"performance_user_unload"},t)())},n=Symbol("OffersPerformance");Object.defineProperty(t,"fnId",{get:function(){return n},configurable:!0}),"function"==typeof window.onunload&&window.onunload.fnId&&window.onunload.fnId===n||(window.onunload=t),"function"==typeof window.onbeforeunload&&window.onbeforeunload.fnId&&window.onbeforeunload.fnId===n||(window.onbeforeunload=t)},o.prototype.uninstall=function(){window.onunload=null,window.onbeforeunload=null};var a=new o;t.default=a},2845:function(e,t,n){"use strict";var r,o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=(r=h(regeneratorRuntime.mark((function e(t,n){var r,a,u,c,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.data,a=n.storeId,r){e.next=5;break}return l.default.error("WhereAmI was handed undefined product info"),e.abrupt("return");case 5:if(u=o({store_id:a},r),(c=(0,i.default)(u))===v){e.next=14;break}return v=c,e.next=11,s.default.send("stores:action",{action:"getAtlas",data:{atlasPayload:u}},{background:!0}).catch((function(e){l.default.error("Error while getting atlas: "+(e||e.message))}));case 11:f=e.sent,d.default.sendEvent("ext009009",{where_am_i:r,is_initial_observation:g,products:f}),g=!1;case 14:case"end":return e.stop()}}),e,this)}))),function(e,t){return r.apply(this,arguments)}),i=p(n(2846)),s=p(n(6)),u=p(n(12)),c=p(n(321)),l=p(n(8)),d=p(n(9)),f=p(n(57));function p(e){return e&&e.__esModule?e:{default:e}}function h(e){return function(){var t=e.apply(this,arguments);return new Promise((function(e,n){return function r(o,a){try{var i=t[o](a),s=i.value}catch(e){return void n(e)}if(!i.done)return Promise.resolve(s).then((function(e){r("next",e)}),(function(e){r("throw",e)}));e(s)}("next")}))}}var v="",g=!0;s.default.addListener("vims:reportWhereAmI",a),s.default.addListener("pageDetected:WHERE_AM_I",(function(){var e;f.default.getFeatureFlag("ext_run_wai_vim").then((e=h(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",{});case 2:return e.abrupt("return",u.default.getCurrent().then(function(){var e=h(regeneratorRuntime.mark((function e(t){var n=t.id;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.default.getAndRunV5Vim(n,"wai");case 2:case"end":return e.stop()}}),e,void 0)})));return function(t){return e.apply(this,arguments)}}()));case 3:case"end":return e.stop()}}),e,void 0)}))),function(t){return e.apply(this,arguments)}))}))},2846:function(e,t,n){var r="undefined"!=typeof JSON?JSON:n(2847);e.exports=function(e,t){t||(t={}),"function"==typeof t&&(t={cmp:t});var n=t.space||"";"number"==typeof n&&(n=Array(n+1).join(" "));var i,s="boolean"==typeof t.cycles&&t.cycles,u=t.replacer||function(e,t){return t},c=t.cmp&&(i=t.cmp,function(e){return function(t,n){var r={key:t,value:e[t]},o={key:n,value:e[n]};return i(r,o)}}),l=[];return function e(t,i,d,f){var p=n?"\n"+new Array(f+1).join(n):"",h=n?": ":":";if(d&&d.toJSON&&"function"==typeof d.toJSON&&(d=d.toJSON()),void 0!==(d=u.call(t,i,d))){if("object"!=typeof d||null===d)return r.stringify(d);if(o(d)){for(var v=[],g=0;g<d.length;g++){var y=e(d,g,d[g],f+1)||r.stringify(null);v.push(p+n+y)}return"["+v.join(",")+p+"]"}if(-1!==l.indexOf(d)){if(s)return r.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}l.push(d);var m=a(d).sort(c&&c(d));for(v=[],g=0;g<m.length;g++){var b=e(d,i=m[g],d[i],f+1);if(b){var _=r.stringify(i)+h+b;v.push(p+n+_)}}return l.splice(l.indexOf(d),1),"{"+v.join(",")+p+"}"}}({"":e},"",e,0)};var o=Array.isArray||function(e){return"[object Array]"==={}.toString.call(e)},a=Object.keys||function(e){var t=Object.prototype.hasOwnProperty||function(){return!0},n=[];for(var r in e)t.call(e,r)&&n.push(r);return n}},2847:function(e,t,n){t.parse=n(2848),t.stringify=n(2849)},2848:function(e,t){var n,r,o,a,i={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},s=function(e){throw{name:"SyntaxError",message:e,at:n,text:o}},u=function(e){return e&&e!==r&&s("Expected '"+e+"' instead of '"+r+"'"),r=o.charAt(n),n+=1,r},c=function(){var e,t="";for("-"===r&&(t="-",u("-"));r>="0"&&r<="9";)t+=r,u();if("."===r)for(t+=".";u()&&r>="0"&&r<="9";)t+=r;if("e"===r||"E"===r)for(t+=r,u(),"-"!==r&&"+"!==r||(t+=r,u());r>="0"&&r<="9";)t+=r,u();if(e=+t,isFinite(e))return e;s("Bad number")},l=function(){var e,t,n,o="";if('"'===r)for(;u();){if('"'===r)return u(),o;if("\\"===r)if(u(),"u"===r){for(n=0,t=0;t<4&&(e=parseInt(u(),16),isFinite(e));t+=1)n=16*n+e;o+=String.fromCharCode(n)}else{if("string"!=typeof i[r])break;o+=i[r]}else o+=r}s("Bad string")},d=function(){for(;r&&r<=" ";)u()};a=function(){switch(d(),r){case"{":return function(){var e,t={};if("{"===r){if(u("{"),d(),"}"===r)return u("}"),t;for(;r;){if(e=l(),d(),u(":"),Object.hasOwnProperty.call(t,e)&&s('Duplicate key "'+e+'"'),t[e]=a(),d(),"}"===r)return u("}"),t;u(","),d()}}s("Bad object")}();case"[":return function(){var e=[];if("["===r){if(u("["),d(),"]"===r)return u("]"),e;for(;r;){if(e.push(a()),d(),"]"===r)return u("]"),e;u(","),d()}}s("Bad array")}();case'"':return l();case"-":return c();default:return r>="0"&&r<="9"?c():function(){switch(r){case"t":return u("t"),u("r"),u("u"),u("e"),!0;case"f":return u("f"),u("a"),u("l"),u("s"),u("e"),!1;case"n":return u("n"),u("u"),u("l"),u("l"),null}s("Unexpected '"+r+"'")}()}},e.exports=function(e,t){var i;return o=e,n=0,r=" ",i=a(),d(),r&&s("Syntax error"),"function"==typeof t?function e(n,r){var o,a,i=n[r];if(i&&"object"==typeof i)for(o in i)Object.prototype.hasOwnProperty.call(i,o)&&(void 0!==(a=e(i,o))?i[o]=a:delete i[o]);return t.call(n,r,i)}({"":i},""):i}},2849:function(e,t){var n,r,o,a=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,i={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function s(e){return a.lastIndex=0,a.test(e)?'"'+e.replace(a,(function(e){var t=i[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}))+'"':'"'+e+'"'}e.exports=function(e,t,a){var i;if(n="",r="","number"==typeof a)for(i=0;i<a;i+=1)r+=" ";else"string"==typeof a&&(r=a);if(o=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return function e(t,a){var i,u,c,l,d,f=n,p=a[t];switch(p&&"object"==typeof p&&"function"==typeof p.toJSON&&(p=p.toJSON(t)),"function"==typeof o&&(p=o.call(a,t,p)),typeof p){case"string":return s(p);case"number":return isFinite(p)?String(p):"null";case"boolean":case"null":return String(p);case"object":if(!p)return"null";if(n+=r,d=[],"[object Array]"===Object.prototype.toString.apply(p)){for(l=p.length,i=0;i<l;i+=1)d[i]=e(i,p)||"null";return c=0===d.length?"[]":n?"[\n"+n+d.join(",\n"+n)+"\n"+f+"]":"["+d.join(",")+"]",n=f,c}if(o&&"object"==typeof o)for(l=o.length,i=0;i<l;i+=1)"string"==typeof(u=o[i])&&(c=e(u,p))&&d.push(s(u)+(n?": ":":")+c);else for(u in p)Object.prototype.hasOwnProperty.call(p,u)&&(c=e(u,p))&&d.push(s(u)+(n?": ":":")+c);return c=0===d.length?"{}":n?"{\n"+n+d.join(",\n"+n)+"\n"+f+"}":"{"+d.join(",")+"}",n=f,c}}("",{"":e})}},2850:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(a)throw new Error("Sentry has already been initialized");e.init(r({},t,{dsn:"https://3b4bb33e1dfc432c9ccd9f9ce5a4bd25@o197999.ingest.sentry.io/6008007",integrations:[new o.Integrations.BrowserTracing],release:"honey-extension@14.11.0",attachStacktrace:!0})),a=e},t.convertIntoErrorObject=function(e,t,n,r){var o=new Error(t);o.stack=n;var a=Object.getPrototypeOf(o);if(a.name=e,Object.setPrototypeOf(o,a),r){var i=void 0;for(i in r)r[i]&&(o[i]=r[i])}return o};var o=n(2855),a=void 0},2851:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r,o=n(6),a=(r=o)&&r.__esModule?r:{default:r};var i={beforeSend:function(e,t){return a.default.send("sentry:action",{action:"sendJSONtoCDN",error:t.originalException.message,stack:t.originalException.stack,name:Object.getPrototypeOf(t.originalException).name,breadcrumbs:e.breadcrumbs,tags:e.tags},{background:!0}),null},initialScope:{tags:{Source:"Content-Script"}}};t.default=i},2854:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"FunctionToString",(function(){return Le})),n.d(r,"InboundFilters",(function(){return Ne}));var o={};n.r(o),n.d(o,"GlobalHandlers",(function(){return He})),n.d(o,"TryCatch",(function(){return Be})),n.d(o,"Breadcrumbs",(function(){return Me})),n.d(o,"LinkedErrors",(function(){return Ge})),n.d(o,"UserAgent",(function(){return Ve})),n.d(o,"Dedupe",(function(){return qe}));var a={};n.r(a),n.d(a,"BaseTransport",(function(){return _e})),n.d(a,"FetchTransport",(function(){return we})),n.d(a,"XHRTransport",(function(){return Oe}));var i,s,u=n(11);!function(e){e.Fatal="fatal",e.Error="error",e.Warning="warning",e.Log="log",e.Info="info",e.Debug="debug",e.Critical="critical"}(i||(i={})),function(e){e.fromString=function(t){switch(t){case"debug":return e.Debug;case"info":return e.Info;case"warn":case"warning":return e.Warning;case"error":return e.Error;case"fatal":return e.Fatal;case"critical":return e.Critical;case"log":default:return e.Log}}}(i||(i={})),function(e){e.Unknown="unknown",e.Skipped="skipped",e.Success="success",e.RateLimit="rate_limit",e.Invalid="invalid",e.Failed="failed"}(s||(s={})),function(e){e.fromHttpCode=function(t){return t>=200&&t<300?e.Success:429===t?e.RateLimit:t>=400&&t<500?e.Invalid:t>=500?e.Failed:e.Unknown}}(s||(s={}));var c=n(1071),l=n(637);function d(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=Object(l.b)();if(r&&r[e])return r[e].apply(r,Object(u.e)(t));throw new Error("No hub defined or "+e+" was not found on the hub, please open a bug report.")}function f(e,t){var n;try{throw new Error("Sentry syntheticException")}catch(e){n=e}return d("captureException",e,{captureContext:t,originalException:e,syntheticException:n})}function p(e,t){var n;try{throw new Error(e)}catch(e){n=e}var r="string"!=typeof t?{captureContext:t}:void 0;return d("captureMessage",e,"string"==typeof t?t:void 0,Object(u.a)({originalException:e,syntheticException:n},r))}function h(e){return d("captureEvent",e)}function v(e){d("configureScope",e)}function g(e){d("addBreadcrumb",e)}function y(e,t){d("setContext",e,t)}function m(e){d("setExtras",e)}function b(e){d("setTags",e)}function _(e,t){d("setExtra",e,t)}function w(e,t){d("setTag",e,t)}function O(e){d("setUser",e)}function E(e){d("withScope",e)}function S(e,t){return d("startTransaction",Object(u.a)({},e),t)}var x=n(2857),k=n(2856),T=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(e,t){return e.__proto__=t,e}:function(e,t){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n]);return e});var C=function(e){function t(t){var n=this.constructor,r=e.call(this,t)||this;return r.message=t,r.name=n.prototype.constructor.name,T(r,n.prototype),r}return Object(u.b)(t,e),t}(Error),P=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+))?@)([\w.-]+)(?::(\d+))?\/(.+)/,R=function(){function e(e){"string"==typeof e?this._fromString(e):this._fromComponents(e),this._validate()}return e.prototype.toString=function(e){void 0===e&&(e=!1);var t=this,n=t.host,r=t.path,o=t.pass,a=t.port,i=t.projectId;return t.protocol+"://"+t.publicKey+(e&&o?":"+o:"")+"@"+n+(a?":"+a:"")+"/"+(r?r+"/":r)+i},e.prototype._fromString=function(e){var t=P.exec(e);if(!t)throw new C("Invalid Dsn");var n=Object(u.c)(t.slice(1),6),r=n[0],o=n[1],a=n[2],i=void 0===a?"":a,s=n[3],c=n[4],l=void 0===c?"":c,d="",f=n[5],p=f.split("/");if(p.length>1&&(d=p.slice(0,-1).join("/"),f=p.pop()),f){var h=f.match(/^\d+/);h&&(f=h[0])}this._fromComponents({host:s,pass:i,path:d,projectId:f,port:l,protocol:r,publicKey:o})},e.prototype._fromComponents=function(e){"user"in e&&!("publicKey"in e)&&(e.publicKey=e.user),this.user=e.publicKey||"",this.protocol=e.protocol,this.publicKey=e.publicKey||"",this.pass=e.pass||"",this.host=e.host,this.port=e.port||"",this.path=e.path||"",this.projectId=e.projectId},e.prototype._validate=function(){var e=this;if(["protocol","publicKey","host","projectId"].forEach((function(t){if(!e[t])throw new C("Invalid Dsn: "+t+" missing")})),!this.projectId.match(/^\d+$/))throw new C("Invalid Dsn: Invalid projectId "+this.projectId);if("http"!==this.protocol&&"https"!==this.protocol)throw new C("Invalid Dsn: Invalid protocol "+this.protocol);if(this.port&&isNaN(parseInt(this.port,10)))throw new C("Invalid Dsn: Invalid port "+this.port)},e}(),I=n(118),j=n(88),M=n(1006),A=n(167),L=n(636),D=n(221),N=n(607),F=[];function U(e){return e.reduce((function(e,t){return e.every((function(e){return t.name!==e.name}))&&e.push(t),e}),[])}function B(e){var t={};return function(e){var t=e.defaultIntegrations&&Object(u.e)(e.defaultIntegrations)||[],n=e.integrations,r=Object(u.e)(U(t));Array.isArray(n)?r=Object(u.e)(r.filter((function(e){return n.every((function(t){return t.name!==e.name}))})),U(n)):"function"==typeof n&&(r=n(r),r=Array.isArray(r)?r:[r]);var o=r.map((function(e){return e.name}));return-1!==o.indexOf("Debug")&&r.push.apply(r,Object(u.e)(r.splice(o.indexOf("Debug"),1))),r}(e).forEach((function(e){t[e.name]=e,function(e){-1===F.indexOf(e.name)&&(e.setupOnce(c.b,l.b),F.push(e.name),j.a.log("Integration installed: "+e.name))}(e)})),Object.defineProperty(t,"initialized",{value:!0}),t}var H=function(){function e(e,t){this._integrations={},this._numProcessing=0,this._backend=new e(t),this._options=t,t.dsn&&(this._dsn=new R(t.dsn))}return e.prototype.captureException=function(e,t,n){var r=this,o=t&&t.event_id;return this._process(this._getBackend().eventFromException(e,t).then((function(e){return r._captureEvent(e,t,n)})).then((function(e){o=e}))),o},e.prototype.captureMessage=function(e,t,n,r){var o=this,a=n&&n.event_id,i=Object(I.i)(e)?this._getBackend().eventFromMessage(String(e),t,n):this._getBackend().eventFromException(e,n);return this._process(i.then((function(e){return o._captureEvent(e,n,r)})).then((function(e){a=e}))),a},e.prototype.captureEvent=function(e,t,n){var r=t&&t.event_id;return this._process(this._captureEvent(e,t,n).then((function(e){r=e}))),r},e.prototype.captureSession=function(e){this._isEnabled()?"string"!=typeof e.release?j.a.warn("Discarded session because of missing or non-string release"):(this._sendSession(e),e.update({init:!1})):j.a.warn("SDK not enabled, will not capture session.")},e.prototype.getDsn=function(){return this._dsn},e.prototype.getOptions=function(){return this._options},e.prototype.getTransport=function(){return this._getBackend().getTransport()},e.prototype.flush=function(e){var t=this;return this._isClientDoneProcessing(e).then((function(n){return t.getTransport().close(e).then((function(e){return n&&e}))}))},e.prototype.close=function(e){var t=this;return this.flush(e).then((function(e){return t.getOptions().enabled=!1,e}))},e.prototype.setupIntegrations=function(){this._isEnabled()&&!this._integrations.initialized&&(this._integrations=B(this._options))},e.prototype.getIntegration=function(e){try{return this._integrations[e.id]||null}catch(t){return j.a.warn("Cannot retrieve integration "+e.id+" from the current Client"),null}},e.prototype._updateSessionFromEvent=function(e,t){var n,r,o=!1,a=!1,i=t.exception&&t.exception.values;if(i){a=!0;try{for(var s=Object(u.f)(i),c=s.next();!c.done;c=s.next()){var l=c.value.mechanism;if(l&&!1===l.handled){o=!0;break}}}catch(e){n={error:e}}finally{try{c&&!c.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}}var d=e.status===x.a.Ok;(d&&0===e.errors||d&&o)&&(e.update(Object(u.a)(Object(u.a)({},o&&{status:x.a.Crashed}),{errors:e.errors||Number(a||o)})),this.captureSession(e))},e.prototype._sendSession=function(e){this._getBackend().sendSession(e)},e.prototype._isClientDoneProcessing=function(e){var t=this;return new M.a((function(n){var r=0,o=setInterval((function(){0==t._numProcessing?(clearInterval(o),n(!0)):(r+=1,e&&r>=e&&(clearInterval(o),n(!1)))}),1)}))},e.prototype._getBackend=function(){return this._backend},e.prototype._isEnabled=function(){return!1!==this.getOptions().enabled&&void 0!==this._dsn},e.prototype._prepareEvent=function(e,t,n){var r=this,o=this.getOptions().normalizeDepth,a=void 0===o?3:o,i=Object(u.a)(Object(u.a)({},e),{event_id:e.event_id||(n&&n.event_id?n.event_id:Object(A.j)()),timestamp:e.timestamp||Object(L.b)()});this._applyClientOptions(i),this._applyIntegrationsMetadata(i);var s=t;n&&n.captureContext&&(s=c.a.clone(s).update(n.captureContext));var l=M.a.resolve(i);return s&&(l=s.applyToEvent(i,n)),l.then((function(e){return"number"==typeof a&&a>0?r._normalizeEvent(e,a):e}))},e.prototype._normalizeEvent=function(e,t){if(!e)return null;var n=Object(u.a)(Object(u.a)(Object(u.a)(Object(u.a)(Object(u.a)({},e),e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map((function(e){return Object(u.a)(Object(u.a)({},e),e.data&&{data:Object(D.d)(e.data,t)})}))}),e.user&&{user:Object(D.d)(e.user,t)}),e.contexts&&{contexts:Object(D.d)(e.contexts,t)}),e.extra&&{extra:Object(D.d)(e.extra,t)});e.contexts&&e.contexts.trace&&(n.contexts.trace=e.contexts.trace);var r=this.getOptions()._experiments;return(void 0===r?{}:r).ensureNoCircularStructures?Object(D.d)(n):n},e.prototype._applyClientOptions=function(e){var t=this.getOptions(),n=t.environment,r=t.release,o=t.dist,a=t.maxValueLength,i=void 0===a?250:a;"environment"in e||(e.environment="environment"in t?n:"production"),void 0===e.release&&void 0!==r&&(e.release=r),void 0===e.dist&&void 0!==o&&(e.dist=o),e.message&&(e.message=Object(N.d)(e.message,i));var s=e.exception&&e.exception.values&&e.exception.values[0];s&&s.value&&(s.value=Object(N.d)(s.value,i));var u=e.request;u&&u.url&&(u.url=Object(N.d)(u.url,i))},e.prototype._applyIntegrationsMetadata=function(e){var t=Object.keys(this._integrations);t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=Object(u.e)(e.sdk.integrations||[],t))},e.prototype._sendEvent=function(e){this._getBackend().sendEvent(e)},e.prototype._captureEvent=function(e,t,n){return this._processEvent(e,t,n).then((function(e){return e.event_id}),(function(e){j.a.error(e)}))},e.prototype._processEvent=function(e,t,n){var r,o,a=this,i=this.getOptions(),s=i.beforeSend,u=i.sampleRate,c=this.getTransport();if(!this._isEnabled())return M.a.reject(new C("SDK not enabled, will not capture event."));var l="transaction"===e.type;return!l&&"number"==typeof u&&Math.random()>u?(null===(o=(r=c).recordLostEvent)||void 0===o||o.call(r,k.a.SampleRate,"event"),M.a.reject(new C("Discarding event because it's not included in the random sample (sampling rate = "+u+")"))):this._prepareEvent(e,n,t).then((function(n){var r,o;if(null===n)throw null===(o=(r=c).recordLostEvent)||void 0===o||o.call(r,k.a.EventProcessor,e.type||"event"),new C("An event processor returned null, will not send event.");if(t&&t.data&&!0===t.data.__sentry__||l||!s)return n;var i=s(n,t);return a._ensureBeforeSendRv(i)})).then((function(t){var r,o;if(null===t)throw null===(o=(r=c).recordLostEvent)||void 0===o||o.call(r,k.a.BeforeSend,e.type||"event"),new C("`beforeSend` returned `null`, will not send event.");var i=n&&n.getSession&&n.getSession();return!l&&i&&a._updateSessionFromEvent(i,t),a._sendEvent(t),t})).then(null,(function(e){if(e instanceof C)throw e;throw a.captureException(e,{data:{__sentry__:!0},originalException:e}),new C("Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: "+e)}))},e.prototype._process=function(e){var t=this;this._numProcessing+=1,e.then((function(e){return t._numProcessing-=1,e}),(function(e){return t._numProcessing-=1,e}))},e.prototype._ensureBeforeSendRv=function(e){var t="`beforeSend` method has to return `null` or a valid event.";if(Object(I.m)(e))return e.then((function(e){if(!Object(I.h)(e)&&null!==e)throw new C(t);return e}),(function(e){throw new C("beforeSend rejected with "+e)}));if(!Object(I.h)(e)&&null!==e)throw new C(t);return e},e}(),G=function(){function e(){}return e.prototype.sendEvent=function(e){return M.a.resolve({reason:"NoopTransport: Event has been skipped because no Dsn is configured.",status:s.Skipped})},e.prototype.close=function(e){return M.a.resolve(!0)},e}(),q=function(){function e(e){this._options=e,this._options.dsn||j.a.warn("No DSN provided, backend will not do anything."),this._transport=this._setupTransport()}return e.prototype.eventFromException=function(e,t){throw new C("Backend has to implement `eventFromException` method")},e.prototype.eventFromMessage=function(e,t,n){throw new C("Backend has to implement `eventFromMessage` method")},e.prototype.sendEvent=function(e){this._transport.sendEvent(e).then(null,(function(e){j.a.error("Error while sending event: "+e)}))},e.prototype.sendSession=function(e){this._transport.sendSession?this._transport.sendSession(e).then(null,(function(e){j.a.error("Error while sending session: "+e)})):j.a.warn("Dropping session because custom transport doesn't implement sendSession")},e.prototype.getTransport=function(){return this._transport},e.prototype._setupTransport=function(){return new G},e}(),W=n(2456),V=/^\s*at (?:(.*?) ?\()?((?:file|https?|blob|chrome-extension|address|native|eval|webpack|<anonymous>|[-a-z]+:|.*bundle|\/).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,z=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:file|https?|blob|chrome|webpack|resource|moz-extension|capacitor).*?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,Y=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,K=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,X=/\((\S*)(?::(\d+))(?::(\d+))\)/,J=/Minified React error #\d+;/i;function Q(e){var t=null,n=0;e&&("number"==typeof e.framesToPop?n=e.framesToPop:J.test(e.message)&&(n=1));try{if(t=function(e){if(!e||!e.stacktrace)return null;for(var t,n=e.stacktrace,r=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,o=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^)]+))\((.*)\))? in (.*):\s*$/i,a=n.split("\n"),i=[],s=0;s<a.length;s+=2){var u=null;(t=r.exec(a[s]))?u={url:t[2],func:t[3],args:[],line:+t[1],column:null}:(t=o.exec(a[s]))&&(u={url:t[6],func:t[3]||t[4],args:t[5]?t[5].split(","):[],line:+t[1],column:+t[2]}),u&&(!u.func&&u.line&&(u.func="?"),i.push(u))}if(!i.length)return null;return{message:ee(e),name:e.name,stack:i}}(e))return Z(t,n)}catch(e){}try{if(t=function(e){var t,n;if(!e||!e.stack)return null;for(var r,o,a,i=[],s=e.stack.split("\n"),c=0;c<s.length;++c){if(o=V.exec(s[c])){var l=o[2]&&0===o[2].indexOf("native");o[2]&&0===o[2].indexOf("eval")&&(r=X.exec(o[2]))&&(o[2]=r[1],o[3]=r[2],o[4]=r[3]);var d=o[2]&&0===o[2].indexOf("address at ")?o[2].substr("address at ".length):o[2],f=o[1]||"?";t=Object(u.c)($(f,d),2),f=t[0],d=t[1],a={url:d,func:f,args:l?[o[2]]:[],line:o[3]?+o[3]:null,column:o[4]?+o[4]:null}}else if(o=Y.exec(s[c]))a={url:o[2],func:o[1]||"?",args:[],line:+o[3],column:o[4]?+o[4]:null};else{if(!(o=z.exec(s[c])))continue;o[3]&&o[3].indexOf(" > eval")>-1&&(r=K.exec(o[3]))?(o[1]=o[1]||"eval",o[3]=r[1],o[4]=r[2],o[5]=""):0!==c||o[5]||void 0===e.columnNumber||(i[0].column=e.columnNumber+1);d=o[3],f=o[1]||"?";n=Object(u.c)($(f,d),2),f=n[0],d=n[1],a={url:d,func:f,args:o[2]?o[2].split(","):[],line:o[4]?+o[4]:null,column:o[5]?+o[5]:null}}!a.func&&a.line&&(a.func="?"),i.push(a)}if(!i.length)return null;return{message:ee(e),name:e.name,stack:i}}(e))return Z(t,n)}catch(e){}return{message:ee(e),name:e&&e.name,stack:[],failed:!0}}var $=function(e,t){var n=-1!==e.indexOf("safari-extension"),r=-1!==e.indexOf("safari-web-extension");return n||r?[-1!==e.indexOf("@")?e.split("@")[0]:"?",n?"safari-extension:"+t:"safari-web-extension:"+t]:[e,t]};function Z(e,t){try{return Object(u.a)(Object(u.a)({},e),{stack:e.stack.slice(t)})}catch(t){return e}}function ee(e){var t=e&&e.message;return t?t.error&&"string"==typeof t.error.message?t.error.message:t:"No error message"}function te(e){var t=re(e.stack),n={type:e.name,value:e.message};return t&&t.length&&(n.stacktrace={frames:t}),void 0===n.type&&""===n.value&&(n.value="Unrecoverable error caught"),n}function ne(e){return{exception:{values:[te(e)]}}}function re(e){if(!e||!e.length)return[];var t=e,n=t[0].func||"",r=t[t.length-1].func||"";return-1===n.indexOf("captureMessage")&&-1===n.indexOf("captureException")||(t=t.slice(1)),-1!==r.indexOf("sentryWrapped")&&(t=t.slice(0,-1)),t.slice(0,50).map((function(e){return{colno:null===e.column?void 0:e.column,filename:e.url||t[0].url,function:e.func||"?",in_app:!0,lineno:null===e.line?void 0:e.line}})).reverse()}function oe(e,t,n){var r=ie(t,n&&n.syntheticException||void 0,{attachStacktrace:e.attachStacktrace});return Object(A.a)(r,{handled:!0,type:"generic"}),r.level=i.Error,n&&n.event_id&&(r.event_id=n.event_id),M.a.resolve(r)}function ae(e,t,n,r){void 0===n&&(n=i.Info);var o=se(t,r&&r.syntheticException||void 0,{attachStacktrace:e.attachStacktrace});return o.level=n,r&&r.event_id&&(o.event_id=r.event_id),M.a.resolve(o)}function ie(e,t,n){var r;if(void 0===n&&(n={}),Object(I.e)(e)&&e.error)return r=ne(Q(e=e.error));if(Object(I.a)(e)||Object(I.b)(e)){var o=e,a=o.name||(Object(I.a)(o)?"DOMError":"DOMException"),i=o.message?a+": "+o.message:a;return r=se(i,t,n),Object(A.b)(r,i),"code"in o&&(r.tags=Object(u.a)(Object(u.a)({},r.tags),{"DOMException.code":""+o.code})),r}return Object(I.d)(e)?r=ne(Q(e)):Object(I.h)(e)||Object(I.f)(e)?(r=function(e,t,n){var r={exception:{values:[{type:Object(I.f)(e)?e.constructor.name:n?"UnhandledRejection":"Error",value:"Non-Error "+(n?"promise rejection":"exception")+" captured with keys: "+Object(D.b)(e)}]},extra:{__serialized__:Object(D.e)(e)}};if(t){var o=re(Q(t).stack);r.stacktrace={frames:o}}return r}(e,t,n.rejection),Object(A.a)(r,{synthetic:!0}),r):(r=se(e,t,n),Object(A.b)(r,""+e,void 0),Object(A.a)(r,{synthetic:!0}),r)}function se(e,t,n){void 0===n&&(n={});var r={message:e};if(n.attachStacktrace&&t){var o=re(Q(t).stack);r.stacktrace={frames:o}}return r}function ue(e){if(e.metadata&&e.metadata.sdk){var t=e.metadata.sdk;return{name:t.name,version:t.version}}}function ce(e,t){return t?(e.sdk=e.sdk||{},e.sdk.name=e.sdk.name||t.name,e.sdk.version=e.sdk.version||t.version,e.sdk.integrations=Object(u.e)(e.sdk.integrations||[],t.integrations||[]),e.sdk.packages=Object(u.e)(e.sdk.packages||[],t.packages||[]),e):e}function le(e,t){var n=ue(t),r="aggregates"in e?"sessions":"session";return{body:JSON.stringify(Object(u.a)(Object(u.a)({sent_at:(new Date).toISOString()},n&&{sdk:n}),t.forceEnvelope()&&{dsn:t.getDsn().toString()}))+"\n"+JSON.stringify({type:r})+"\n"+JSON.stringify(e),type:r,url:t.getEnvelopeEndpointWithUrlEncodedAuth()}}function de(e,t){var n=ue(t),r=e.type||"event",o="transaction"===r||t.forceEnvelope(),a=e.debug_meta||{},i=a.transactionSampling,s=Object(u.d)(a,["transactionSampling"]),c=i||{},l=c.method,d=c.rate;0===Object.keys(s).length?delete e.debug_meta:e.debug_meta=s;var f={body:JSON.stringify(n?ce(e,t.metadata.sdk):e),type:r,url:o?t.getEnvelopeEndpointWithUrlEncodedAuth():t.getStoreEndpointWithUrlEncodedAuth()};if(o){var p=JSON.stringify(Object(u.a)(Object(u.a)({event_id:e.event_id,sent_at:(new Date).toISOString()},n&&{sdk:n}),t.forceEnvelope()&&{dsn:t.getDsn().toString()}))+"\n"+JSON.stringify({type:r,sample_rates:[{id:l,rate:d}]})+"\n"+f.body;f.body=p}return f}var fe=function(){function e(e,t,n){void 0===t&&(t={}),this.dsn=e,this._dsnObject=new R(e),this.metadata=t,this._tunnel=n}return e.prototype.getDsn=function(){return this._dsnObject},e.prototype.forceEnvelope=function(){return!!this._tunnel},e.prototype.getBaseApiEndpoint=function(){var e=this.getDsn(),t=e.protocol?e.protocol+":":"",n=e.port?":"+e.port:"";return t+"//"+e.host+n+(e.path?"/"+e.path:"")+"/api/"},e.prototype.getStoreEndpoint=function(){return this._getIngestEndpoint("store")},e.prototype.getStoreEndpointWithUrlEncodedAuth=function(){return this.getStoreEndpoint()+"?"+this._encodedAuth()},e.prototype.getEnvelopeEndpointWithUrlEncodedAuth=function(){return this.forceEnvelope()?this._tunnel:this._getEnvelopeEndpoint()+"?"+this._encodedAuth()},e.prototype.getStoreEndpointPath=function(){var e=this.getDsn();return(e.path?"/"+e.path:"")+"/api/"+e.projectId+"/store/"},e.prototype.getRequestHeaders=function(e,t){var n=this.getDsn(),r=["Sentry sentry_version=7"];return r.push("sentry_client="+e+"/"+t),r.push("sentry_key="+n.publicKey),n.pass&&r.push("sentry_secret="+n.pass),{"Content-Type":"application/json","X-Sentry-Auth":r.join(", ")}},e.prototype.getReportDialogEndpoint=function(e){void 0===e&&(e={});var t=this.getDsn(),n=this.getBaseApiEndpoint()+"embed/error-page/",r=[];for(var o in r.push("dsn="+t.toString()),e)if("dsn"!==o)if("user"===o){if(!e.user)continue;e.user.name&&r.push("name="+encodeURIComponent(e.user.name)),e.user.email&&r.push("email="+encodeURIComponent(e.user.email))}else r.push(encodeURIComponent(o)+"="+encodeURIComponent(e[o]));return r.length?n+"?"+r.join("&"):n},e.prototype._getEnvelopeEndpoint=function(){return this._getIngestEndpoint("envelope")},e.prototype._getIngestEndpoint=function(e){return this._tunnel?this._tunnel:""+this.getBaseApiEndpoint()+this.getDsn().projectId+"/"+e+"/"},e.prototype._encodedAuth=function(){var e={sentry_key:this.getDsn().publicKey,sentry_version:"7"};return Object(D.f)(e)},e}(),pe=function(){function e(e){this._limit=e,this._buffer=[]}return e.prototype.isReady=function(){return void 0===this._limit||this.length()<this._limit},e.prototype.add=function(e){var t=this;if(!this.isReady())return M.a.reject(new C("Not adding Promise due to buffer limit reached."));var n=e();return-1===this._buffer.indexOf(n)&&this._buffer.push(n),n.then((function(){return t.remove(n)})).then(null,(function(){return t.remove(n).then(null,(function(){}))})),n},e.prototype.remove=function(e){return this._buffer.splice(this._buffer.indexOf(e),1)[0]},e.prototype.length=function(){return this._buffer.length},e.prototype.drain=function(e){var t=this;return new M.a((function(n){var r=setTimeout((function(){e&&e>0&&n(!1)}),e);M.a.all(t._buffer).then((function(){clearTimeout(r),n(!0)})).then(null,(function(){n(!0)}))}))},e}();var he,ve=Object(A.e)();function ge(){var e,t;if(he)return he;if(Object(W.a)(ve.fetch))return he=ve.fetch.bind(ve);var n=ve.document,r=ve.fetch;if("function"==typeof(null===(e=n)||void 0===e?void 0:e.createElement))try{var o=n.createElement("iframe");o.hidden=!0,n.head.appendChild(o),(null===(t=o.contentWindow)||void 0===t?void 0:t.fetch)&&(r=o.contentWindow.fetch),n.head.removeChild(o)}catch(e){j.a.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",e)}return he=r.bind(ve)}function ye(e,t){if("[object Navigator]"===Object.prototype.toString.call(ve&&ve.navigator)&&"function"==typeof ve.navigator.sendBeacon)return ve.navigator.sendBeacon.bind(ve.navigator)(e,t);if(Object(W.b)()){var n=ge();n(e,{body:t,method:"POST",credentials:"omit",keepalive:!0}).then(null,(function(e){console.error(e)}))}else;}var me={event:"error",transaction:"transaction",session:"session",attachment:"attachment"},be=Object(A.e)(),_e=function(){function e(e){var t=this;this.options=e,this._buffer=new pe(30),this._rateLimits={},this._outcomes={},this._api=new fe(e.dsn,e._metadata,e.tunnel),this.url=this._api.getStoreEndpointWithUrlEncodedAuth(),this.options.sendClientReports&&be.document&&be.document.addEventListener("visibilitychange",(function(){"hidden"===be.document.visibilityState&&t._flushOutcomes()}))}return e.prototype.sendEvent=function(e){throw new C("Transport Class has to implement `sendEvent` method")},e.prototype.close=function(e){return this._buffer.drain(e)},e.prototype.recordLostEvent=function(e,t){var n;if(this.options.sendClientReports){var r=me[t]+":"+e;j.a.log("Adding outcome: "+r),this._outcomes[r]=(null!=(n=this._outcomes[r])?n:0)+1}},e.prototype._flushOutcomes=function(){if(this.options.sendClientReports){var e=this._outcomes;if(this._outcomes={},Object.keys(e).length){j.a.log("Flushing outcomes:\n"+JSON.stringify(e,null,2));var t=this._api.getEnvelopeEndpointWithUrlEncodedAuth(),n=JSON.stringify({})+"\n"+JSON.stringify({type:"client_report"})+"\n"+JSON.stringify({timestamp:Object(L.b)(),discarded_events:Object.keys(e).map((function(t){var n=Object(u.c)(t.split(":"),2),r=n[0];return{reason:n[1],category:r,quantity:e[t]}}))});try{ye(t,n)}catch(e){j.a.error(e)}}else j.a.log("No outcomes to flush")}},e.prototype._handleResponse=function(e){var t=e.requestType,n=e.response,r=e.headers,o=e.resolve,a=e.reject,i=s.fromHttpCode(n.status);this._handleRateLimit(r)&&j.a.warn("Too many "+t+" requests, backing off until: "+this._disabledUntil(t)),i!==s.Success?a(n):o({status:i})},e.prototype._disabledUntil=function(e){var t=me[e];return this._rateLimits[t]||this._rateLimits.all},e.prototype._isRateLimited=function(e){return this._disabledUntil(e)>new Date(Date.now())},e.prototype._handleRateLimit=function(e){var t,n,r,o,a=Date.now(),i=e["x-sentry-rate-limits"],s=e["retry-after"];if(i){try{for(var c=Object(u.f)(i.trim().split(",")),l=c.next();!l.done;l=c.next()){var d=l.value.split(":",2),f=parseInt(d[0],10),p=1e3*(isNaN(f)?60:f);try{for(var h=(r=void 0,Object(u.f)(d[1].split(";"))),v=h.next();!v.done;v=h.next()){var g=v.value;this._rateLimits[g||"all"]=new Date(a+p)}}catch(e){r={error:e}}finally{try{v&&!v.done&&(o=h.return)&&o.call(h)}finally{if(r)throw r.error}}}}catch(e){t={error:e}}finally{try{l&&!l.done&&(n=c.return)&&n.call(c)}finally{if(t)throw t.error}}return!0}return!!s&&(this._rateLimits.all=new Date(a+Object(A.g)(a,s)),!0)},e}(),we=function(e){function t(t,n){void 0===n&&(n=ge());var r=e.call(this,t)||this;return r._fetch=n,r}return Object(u.b)(t,e),t.prototype.sendEvent=function(e){return this._sendRequest(de(e,this._api),e)},t.prototype.sendSession=function(e){return this._sendRequest(le(e,this._api),e)},t.prototype._sendRequest=function(e,t){var n=this;if(this._isRateLimited(e.type))return this.recordLostEvent(k.a.RateLimitBackoff,e.type),Promise.reject({event:t,type:e.type,reason:"Transport for "+e.type+" requests locked till "+this._disabledUntil(e.type)+" due to too many requests.",status:429});var r={body:e.body,method:"POST",referrerPolicy:Object(W.e)()?"origin":""};return void 0!==this.options.fetchParameters&&Object.assign(r,this.options.fetchParameters),void 0!==this.options.headers&&(r.headers=this.options.headers),this._buffer.add((function(){return new M.a((function(t,o){n._fetch(e.url,r).then((function(r){var a={"x-sentry-rate-limits":r.headers.get("X-Sentry-Rate-Limits"),"retry-after":r.headers.get("Retry-After")};n._handleResponse({requestType:e.type,response:r,headers:a,resolve:t,reject:o})})).catch(o)}))})).then(void 0,(function(t){throw t instanceof C?n.recordLostEvent(k.a.QueueOverflow,e.type):n.recordLostEvent(k.a.NetworkError,e.type),t}))},t}(_e),Oe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(u.b)(t,e),t.prototype.sendEvent=function(e){return this._sendRequest(de(e,this._api),e)},t.prototype.sendSession=function(e){return this._sendRequest(le(e,this._api),e)},t.prototype._sendRequest=function(e,t){var n=this;return this._isRateLimited(e.type)?(this.recordLostEvent(k.a.RateLimitBackoff,e.type),Promise.reject({event:t,type:e.type,reason:"Transport for "+e.type+" requests locked till "+this._disabledUntil(e.type)+" due to too many requests.",status:429})):this._buffer.add((function(){return new M.a((function(t,r){var o=new XMLHttpRequest;for(var a in o.onreadystatechange=function(){if(4===o.readyState){var a={"x-sentry-rate-limits":o.getResponseHeader("X-Sentry-Rate-Limits"),"retry-after":o.getResponseHeader("Retry-After")};n._handleResponse({requestType:e.type,response:o,headers:a,resolve:t,reject:r})}},o.open("POST",e.url),n.options.headers)n.options.headers.hasOwnProperty(a)&&o.setRequestHeader(a,n.options.headers[a]);o.send(e.body)}))})).then(void 0,(function(t){throw t instanceof C?n.recordLostEvent(k.a.QueueOverflow,e.type):n.recordLostEvent(k.a.NetworkError,e.type),t}))},t}(_e),Ee=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Object(u.b)(t,e),t.prototype.eventFromException=function(e,t){return oe(this._options,e,t)},t.prototype.eventFromMessage=function(e,t,n){return void 0===t&&(t=i.Info),ae(this._options,e,t,n)},t.prototype._setupTransport=function(){if(!this._options.dsn)return e.prototype._setupTransport.call(this);var t=Object(u.a)(Object(u.a)({},this._options.transportOptions),{dsn:this._options.dsn,tunnel:this._options.tunnel,sendClientReports:this._options.sendClientReports,_metadata:this._options._metadata});return this._options.transport?new this._options.transport(t):Object(W.b)()?new we(t):new Oe(t)},t}(q),Se=Object(A.e)(),xe=0;function ke(){return xe>0}function Te(){xe+=1,setTimeout((function(){xe-=1}))}function Ce(e,t,n){if(void 0===t&&(t={}),"function"!=typeof e)return e;try{if(e.__sentry__)return e;if(e.__sentry_wrapped__)return e.__sentry_wrapped__}catch(t){return e}var r=function(){var r=Array.prototype.slice.call(arguments);try{n&&"function"==typeof n&&n.apply(this,arguments);var o=r.map((function(e){return Ce(e,t)}));return e.handleEvent?e.handleEvent.apply(this,o):e.apply(this,o)}catch(e){throw Te(),E((function(n){n.addEventProcessor((function(e){var n=Object(u.a)({},e);return t.mechanism&&(Object(A.b)(n,void 0,void 0),Object(A.a)(n,t.mechanism)),n.extra=Object(u.a)(Object(u.a)({},n.extra),{arguments:r}),n})),f(e)})),e}};try{for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(r[o]=e[o])}catch(e){}e.prototype=e.prototype||{},r.prototype=e.prototype,Object.defineProperty(e,"__sentry_wrapped__",{enumerable:!1,value:r}),Object.defineProperties(r,{__sentry__:{enumerable:!1,value:!0},__sentry_original__:{enumerable:!1,value:e}});try{Object.getOwnPropertyDescriptor(r,"name").configurable&&Object.defineProperty(r,"name",{get:function(){return e.name}})}catch(e){}return r}function Pe(e){if(void 0===e&&(e={}),Se.document)if(e.eventId)if(e.dsn){var t=Se.document.createElement("script");t.async=!0,t.src=new fe(e.dsn).getReportDialogEndpoint(e),e.onLoad&&(t.onload=e.onLoad);var n=Se.document.head||Se.document.body;n&&n.appendChild(t)}else j.a.error("Missing dsn option in showReportDialog call");else j.a.error("Missing eventId option in showReportDialog call")}var Re,Ie=n(2570),je=n(2455),Me=function(){function e(t){this.name=e.id,this._options=Object(u.a)({console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0},t)}return e.prototype.addSentryBreadcrumb=function(e){this._options.sentry&&Object(l.b)().addBreadcrumb({category:"sentry."+("transaction"===e.type?"transaction":"event"),event_id:e.event_id,level:e.level,message:Object(A.d)(e)},{event:e})},e.prototype.setupOnce=function(){var e=this;this._options.console&&Object(Ie.a)({callback:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e._consoleBreadcrumb.apply(e,Object(u.e)(t))},type:"console"}),this._options.dom&&Object(Ie.a)({callback:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e._domBreadcrumb.apply(e,Object(u.e)(t))},type:"dom"}),this._options.xhr&&Object(Ie.a)({callback:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e._xhrBreadcrumb.apply(e,Object(u.e)(t))},type:"xhr"}),this._options.fetch&&Object(Ie.a)({callback:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e._fetchBreadcrumb.apply(e,Object(u.e)(t))},type:"fetch"}),this._options.history&&Object(Ie.a)({callback:function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];e._historyBreadcrumb.apply(e,Object(u.e)(t))},type:"history"})},e.prototype._consoleBreadcrumb=function(e){var t={category:"console",data:{arguments:e.args,logger:"console"},level:i.fromString(e.level),message:Object(N.b)(e.args," ")};if("assert"===e.level){if(!1!==e.args[0])return;t.message="Assertion failed: "+(Object(N.b)(e.args.slice(1)," ")||"console.assert"),t.data.arguments=e.args.slice(1)}Object(l.b)().addBreadcrumb(t,{input:e.args,level:e.level})},e.prototype._domBreadcrumb=function(e){var t,n="object"==typeof this._options.dom?this._options.dom.serializeAttribute:void 0;"string"==typeof n&&(n=[n]);try{t=e.event.target?Object(je.a)(e.event.target,n):Object(je.a)(e.event,n)}catch(e){t="<unknown>"}0!==t.length&&Object(l.b)().addBreadcrumb({category:"ui."+e.name,message:t},{event:e.event,name:e.name,global:e.global})},e.prototype._xhrBreadcrumb=function(e){if(e.endTimestamp){if(e.xhr.__sentry_own_request__)return;var t=e.xhr.__sentry_xhr__||{},n=t.method,r=t.url,o=t.status_code,a=t.body;Object(l.b)().addBreadcrumb({category:"xhr",data:{method:n,url:r,status_code:o},type:"http"},{xhr:e.xhr,input:a})}else;},e.prototype._fetchBreadcrumb=function(e){e.endTimestamp&&(e.fetchData.url.match(/sentry_key/)&&"POST"===e.fetchData.method||(e.error?Object(l.b)().addBreadcrumb({category:"fetch",data:e.fetchData,level:i.Error,type:"http"},{data:e.error,input:e.args}):Object(l.b)().addBreadcrumb({category:"fetch",data:Object(u.a)(Object(u.a)({},e.fetchData),{status_code:e.response.status}),type:"http"},{input:e.args,response:e.response})))},e.prototype._historyBreadcrumb=function(e){var t=Object(A.e)(),n=e.from,r=e.to,o=Object(A.h)(t.location.href),a=Object(A.h)(n),i=Object(A.h)(r);a.path||(a=o),o.protocol===i.protocol&&o.host===i.host&&(r=i.relative),o.protocol===a.protocol&&o.host===a.host&&(n=a.relative),Object(l.b)().addBreadcrumb({category:"navigation",data:{from:n,to:r}})},e.id="Breadcrumbs",e}(),Ae=function(e){function t(t){void 0===t&&(t={});return t._metadata=t._metadata||{},t._metadata.sdk=t._metadata.sdk||{name:"sentry.javascript.browser",packages:[{name:"npm:@sentry/browser",version:"6.13.3"}],version:"6.13.3"},e.call(this,Ee,t)||this}return Object(u.b)(t,e),t.prototype.showReportDialog=function(e){void 0===e&&(e={}),Object(A.e)().document&&(this._isEnabled()?Pe(Object(u.a)(Object(u.a)({},e),{dsn:e.dsn||this.getDsn()})):j.a.error("Trying to call showReportDialog with Sentry Client disabled"))},t.prototype._prepareEvent=function(t,n,r){return t.platform=t.platform||"javascript",e.prototype._prepareEvent.call(this,t,n,r)},t.prototype._sendEvent=function(t){var n=this.getIntegration(Me);n&&n.addSentryBreadcrumb(t),e.prototype._sendEvent.call(this,t)},t}(H),Le=function(){function e(){this.name=e.id}return e.prototype.setupOnce=function(){Re=Function.prototype.toString,Function.prototype.toString=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this.__sentry_original__||this;return Re.apply(n,e)}},e.id="FunctionToString",e}(),De=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/],Ne=function(){function e(t){void 0===t&&(t={}),this._options=t,this.name=e.id}return e.prototype.setupOnce=function(){Object(c.b)((function(t){var n=Object(l.b)();if(!n)return t;var r=n.getIntegration(e);if(r){var o=n.getClient(),a=o?o.getOptions():{},i="function"==typeof r._mergeOptions?r._mergeOptions(a):{};return"function"!=typeof r._shouldDropEvent?t:r._shouldDropEvent(t,i)?null:t}return t}))},e.prototype._shouldDropEvent=function(e,t){return this._isSentryError(e,t)?(j.a.warn("Event dropped due to being internal Sentry Error.\nEvent: "+Object(A.d)(e)),!0):this._isIgnoredError(e,t)?(j.a.warn("Event dropped due to being matched by `ignoreErrors` option.\nEvent: "+Object(A.d)(e)),!0):this._isDeniedUrl(e,t)?(j.a.warn("Event dropped due to being matched by `denyUrls` option.\nEvent: "+Object(A.d)(e)+".\nUrl: "+this._getEventFilterUrl(e)),!0):!this._isAllowedUrl(e,t)&&(j.a.warn("Event dropped due to not being matched by `allowUrls` option.\nEvent: "+Object(A.d)(e)+".\nUrl: "+this._getEventFilterUrl(e)),!0)},e.prototype._isSentryError=function(e,t){if(!t.ignoreInternal)return!1;try{return e&&e.exception&&e.exception.values&&e.exception.values[0]&&"SentryError"===e.exception.values[0].type||!1}catch(e){return!1}},e.prototype._isIgnoredError=function(e,t){return!(!t.ignoreErrors||!t.ignoreErrors.length)&&this._getPossibleEventMessages(e).some((function(e){return t.ignoreErrors.some((function(t){return Object(N.a)(e,t)}))}))},e.prototype._isDeniedUrl=function(e,t){if(!t.denyUrls||!t.denyUrls.length)return!1;var n=this._getEventFilterUrl(e);return!!n&&t.denyUrls.some((function(e){return Object(N.a)(n,e)}))},e.prototype._isAllowedUrl=function(e,t){if(!t.allowUrls||!t.allowUrls.length)return!0;var n=this._getEventFilterUrl(e);return!n||t.allowUrls.some((function(e){return Object(N.a)(n,e)}))},e.prototype._mergeOptions=function(e){return void 0===e&&(e={}),{allowUrls:Object(u.e)(this._options.whitelistUrls||[],this._options.allowUrls||[],e.whitelistUrls||[],e.allowUrls||[]),denyUrls:Object(u.e)(this._options.blacklistUrls||[],this._options.denyUrls||[],e.blacklistUrls||[],e.denyUrls||[]),ignoreErrors:Object(u.e)(this._options.ignoreErrors||[],e.ignoreErrors||[],De),ignoreInternal:void 0===this._options.ignoreInternal||this._options.ignoreInternal}},e.prototype._getPossibleEventMessages=function(e){if(e.message)return[e.message];if(e.exception)try{var t=e.exception.values&&e.exception.values[0]||{},n=t.type,r=void 0===n?"":n,o=t.value,a=void 0===o?"":o;return[""+a,r+": "+a]}catch(t){return j.a.error("Cannot extract message for event "+Object(A.d)(e)),[]}return[]},e.prototype._getLastValidUrl=function(e){var t,n;void 0===e&&(e=[]);for(var r=e.length-1;r>=0;r--){var o=e[r];if("<anonymous>"!==(null===(t=o)||void 0===t?void 0:t.filename)&&"[native code]"!==(null===(n=o)||void 0===n?void 0:n.filename))return o.filename||null}return null},e.prototype._getEventFilterUrl=function(e){try{if(e.stacktrace){var t=e.stacktrace.frames;return this._getLastValidUrl(t)}if(e.exception){var n=e.exception.values&&e.exception.values[0].stacktrace&&e.exception.values[0].stacktrace.frames;return this._getLastValidUrl(n)}return null}catch(t){return j.a.error("Cannot extract url for event "+Object(A.d)(e)),null}},e.id="InboundFilters",e}();var Fe=n(1070),Ue=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],Be=function(){function e(t){this.name=e.id,this._options=Object(u.a)({XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0},t)}return e.prototype.setupOnce=function(){var e=Object(A.e)();(this._options.setTimeout&&Object(D.c)(e,"setTimeout",this._wrapTimeFunction.bind(this)),this._options.setInterval&&Object(D.c)(e,"setInterval",this._wrapTimeFunction.bind(this)),this._options.requestAnimationFrame&&Object(D.c)(e,"requestAnimationFrame",this._wrapRAF.bind(this)),this._options.XMLHttpRequest&&"XMLHttpRequest"in e&&Object(D.c)(XMLHttpRequest.prototype,"send",this._wrapXHR.bind(this)),this._options.eventTarget)&&(Array.isArray(this._options.eventTarget)?this._options.eventTarget:Ue).forEach(this._wrapEventTarget.bind(this))},e.prototype._wrapTimeFunction=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=t[0];return t[0]=Ce(r,{mechanism:{data:{function:Object(Fe.a)(e)},handled:!0,type:"instrument"}}),e.apply(this,t)}},e.prototype._wrapRAF=function(e){return function(t){return e.call(this,Ce(t,{mechanism:{data:{function:"requestAnimationFrame",handler:Object(Fe.a)(e)},handled:!0,type:"instrument"}}))}},e.prototype._wrapEventTarget=function(e){var t=Object(A.e)(),n=t[e]&&t[e].prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&(Object(D.c)(n,"addEventListener",(function(t){return function(n,r,o){try{"function"==typeof r.handleEvent&&(r.handleEvent=Ce(r.handleEvent.bind(r),{mechanism:{data:{function:"handleEvent",handler:Object(Fe.a)(r),target:e},handled:!0,type:"instrument"}}))}catch(e){}return t.call(this,n,Ce(r,{mechanism:{data:{function:"addEventListener",handler:Object(Fe.a)(r),target:e},handled:!0,type:"instrument"}}),o)}})),Object(D.c)(n,"removeEventListener",(function(e){return function(t,n,r){var o,a=n;try{var i=null===(o=a)||void 0===o?void 0:o.__sentry_wrapped__;i&&e.call(this,t,i,r)}catch(e){}return e.call(this,t,a,r)}})))},e.prototype._wrapXHR=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=this,o=["onload","onerror","onprogress","onreadystatechange"];return o.forEach((function(e){e in r&&"function"==typeof r[e]&&Object(D.c)(r,e,(function(t){var n={mechanism:{data:{function:e,handler:Object(Fe.a)(t)},handled:!0,type:"instrument"}};return t.__sentry_original__&&(n.mechanism.data.handler=Object(Fe.a)(t.__sentry_original__)),Ce(t,n)}))})),e.apply(this,t)}},e.id="TryCatch",e}(),He=function(){function e(t){this.name=e.id,this._onErrorHandlerInstalled=!1,this._onUnhandledRejectionHandlerInstalled=!1,this._options=Object(u.a)({onerror:!0,onunhandledrejection:!0},t)}return e.prototype.setupOnce=function(){Error.stackTraceLimit=50,this._options.onerror&&(j.a.log("Global Handler attached: onerror"),this._installGlobalOnErrorHandler()),this._options.onunhandledrejection&&(j.a.log("Global Handler attached: onunhandledrejection"),this._installGlobalOnUnhandledRejectionHandler())},e.prototype._installGlobalOnErrorHandler=function(){var t=this;this._onErrorHandlerInstalled||(Object(Ie.a)({callback:function(n){var r=n.error,o=Object(l.b)(),a=o.getIntegration(e),i=r&&!0===r.__sentry_own_request__;if(a&&!ke()&&!i){var s=o.getClient(),u=void 0===r&&Object(I.k)(n.msg)?t._eventFromIncompleteOnError(n.msg,n.url,n.line,n.column):t._enhanceEventWithInitialFrame(ie(r||n.msg,void 0,{attachStacktrace:s&&s.getOptions().attachStacktrace,rejection:!1}),n.url,n.line,n.column);Object(A.a)(u,{handled:!1,type:"onerror"}),o.captureEvent(u,{originalException:r})}},type:"error"}),this._onErrorHandlerInstalled=!0)},e.prototype._installGlobalOnUnhandledRejectionHandler=function(){var t=this;this._onUnhandledRejectionHandlerInstalled||(Object(Ie.a)({callback:function(n){var r=n;try{"reason"in n?r=n.reason:"detail"in n&&"reason"in n.detail&&(r=n.detail.reason)}catch(e){}var o=Object(l.b)(),a=o.getIntegration(e),s=r&&!0===r.__sentry_own_request__;if(!a||ke()||s)return!0;var u=o.getClient(),c=Object(I.i)(r)?t._eventFromRejectionWithPrimitive(r):ie(r,void 0,{attachStacktrace:u&&u.getOptions().attachStacktrace,rejection:!0});c.level=i.Error,Object(A.a)(c,{handled:!1,type:"onunhandledrejection"}),o.captureEvent(c,{originalException:r})},type:"unhandledrejection"}),this._onUnhandledRejectionHandlerInstalled=!0)},e.prototype._eventFromIncompleteOnError=function(e,t,n,r){var o,a=Object(I.e)(e)?e.message:e,i=a.match(/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i);i&&(o=i[1],a=i[2]);var s={exception:{values:[{type:o||"Error",value:a}]}};return this._enhanceEventWithInitialFrame(s,t,n,r)},e.prototype._eventFromRejectionWithPrimitive=function(e){return{exception:{values:[{type:"UnhandledRejection",value:"Non-Error promise rejection captured with value: "+String(e)}]}}},e.prototype._enhanceEventWithInitialFrame=function(e,t,n,r){e.exception=e.exception||{},e.exception.values=e.exception.values||[],e.exception.values[0]=e.exception.values[0]||{},e.exception.values[0].stacktrace=e.exception.values[0].stacktrace||{},e.exception.values[0].stacktrace.frames=e.exception.values[0].stacktrace.frames||[];var o=isNaN(parseInt(r,10))?void 0:r,a=isNaN(parseInt(n,10))?void 0:n,i=Object(I.k)(t)&&t.length>0?t:Object(A.f)();return 0===e.exception.values[0].stacktrace.frames.length&&e.exception.values[0].stacktrace.frames.push({colno:o,filename:i,function:"?",in_app:!0,lineno:a}),e},e.id="GlobalHandlers",e}(),Ge=function(){function e(t){void 0===t&&(t={}),this.name=e.id,this._key=t.key||"cause",this._limit=t.limit||5}return e.prototype.setupOnce=function(){Object(c.b)((function(t,n){var r=Object(l.b)().getIntegration(e);if(r){var o=r._handler&&r._handler.bind(r);return"function"==typeof o?o(t,n):t}return t}))},e.prototype._handler=function(e,t){if(!(e.exception&&e.exception.values&&t&&Object(I.g)(t.originalException,Error)))return e;var n=this._walkErrorTree(t.originalException,this._key);return e.exception.values=Object(u.e)(n,e.exception.values),e},e.prototype._walkErrorTree=function(e,t,n){if(void 0===n&&(n=[]),!Object(I.g)(e[t],Error)||n.length+1>=this._limit)return n;var r=te(Q(e[t]));return this._walkErrorTree(e[t],t,Object(u.e)([r],n))},e.id="LinkedErrors",e}(),qe=function(){function e(){this.name=e.id}return e.prototype.setupOnce=function(t,n){t((function(t){var r=n().getIntegration(e);if(r){try{if(r._shouldDropEvent(t,r._previousEvent))return j.a.warn("Event dropped due to being a duplicate of previously captured event."),null}catch(e){return r._previousEvent=t}return r._previousEvent=t}return t}))},e.prototype._shouldDropEvent=function(e,t){return!!t&&(!!this._isSameMessageEvent(e,t)||!!this._isSameExceptionEvent(e,t))},e.prototype._isSameMessageEvent=function(e,t){var n=e.message,r=t.message;return!(!n&&!r)&&(!(n&&!r||!n&&r)&&(n===r&&(!!this._isSameFingerprint(e,t)&&!!this._isSameStacktrace(e,t))))},e.prototype._getFramesFromEvent=function(e){var t=e.exception;if(t)try{return t.values[0].stacktrace.frames}catch(e){return}else if(e.stacktrace)return e.stacktrace.frames},e.prototype._isSameStacktrace=function(e,t){var n=this._getFramesFromEvent(e),r=this._getFramesFromEvent(t);if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;if(n=n,(r=r).length!==n.length)return!1;for(var o=0;o<r.length;o++){var a=r[o],i=n[o];if(a.filename!==i.filename||a.lineno!==i.lineno||a.colno!==i.colno||a.function!==i.function)return!1}return!0},e.prototype._getExceptionFromEvent=function(e){return e.exception&&e.exception.values&&e.exception.values[0]},e.prototype._isSameExceptionEvent=function(e,t){var n=this._getExceptionFromEvent(t),r=this._getExceptionFromEvent(e);return!(!n||!r)&&(n.type===r.type&&n.value===r.value&&(!!this._isSameFingerprint(e,t)&&!!this._isSameStacktrace(e,t)))},e.prototype._isSameFingerprint=function(e,t){var n=e.fingerprint,r=t.fingerprint;if(!n&&!r)return!0;if(n&&!r||!n&&r)return!1;n=n,r=r;try{return!(n.join("")!==r.join(""))}catch(e){return!1}},e.id="Dedupe",e}(),We=Object(A.e)(),Ve=function(){function e(){this.name=e.id}return e.prototype.setupOnce=function(){Object(c.b)((function(t){var n,r,o;if(Object(l.b)().getIntegration(e)){if(!We.navigator&&!We.location&&!We.document)return t;var a=(null===(n=t.request)||void 0===n?void 0:n.url)||(null===(r=We.location)||void 0===r?void 0:r.href),i=(We.document||{}).referrer,s=(We.navigator||{}).userAgent,c=Object(u.a)(Object(u.a)(Object(u.a)({},null===(o=t.request)||void 0===o?void 0:o.headers),i&&{Referer:i}),s&&{"User-Agent":s}),d=Object(u.a)(Object(u.a)({},a&&{url:a}),{headers:c});return Object(u.a)(Object(u.a)({},t),{request:d})}return t}))},e.id="UserAgent",e}(),ze=[new r.InboundFilters,new r.FunctionToString,new Be,new Me,new He,new Ge,new qe,new Ve];function Ye(e){if(void 0===e&&(e={}),void 0===e.defaultIntegrations&&(e.defaultIntegrations=ze),void 0===e.release){var t=Object(A.e)();t.SENTRY_RELEASE&&t.SENTRY_RELEASE.id&&(e.release=t.SENTRY_RELEASE.id)}void 0===e.autoSessionTracking&&(e.autoSessionTracking=!0),void 0===e.sendClientReports&&(e.sendClientReports=!0),function(e,t){var n;!0===t.debug&&j.a.enable();var r=Object(l.b)();null===(n=r.getScope())||void 0===n||n.update(t.initialScope);var o=new e(t);r.bindClient(o)}(Ae,e),e.autoSessionTracking&&function(){if(void 0===Object(A.e)().document)return void j.a.warn("Session tracking in non-browser environment with @sentry/browser is not supported.");var e=Object(l.b)();if("function"!=typeof e.startSession||"function"!=typeof e.captureSession)return;e.startSession({ignoreDuration:!0}),e.captureSession(),Object(Ie.a)({callback:function(t){var n=t.from,r=t.to;void 0!==n&&n!==r&&(e.startSession({ignoreDuration:!0}),e.captureSession())},type:"history"})}()}function Ke(e){void 0===e&&(e={});var t=Object(l.b)(),n=t.getScope();n&&(e.user=Object(u.a)(Object(u.a)({},n.getUser()),e.user)),e.eventId||(e.eventId=t.lastEventId());var r=t.getClient();r&&r.showReportDialog(e)}function Xe(){return Object(l.b)().lastEventId()}function Je(){}function Qe(e){e()}function $e(e){var t=Object(l.b)().getClient();return t?t.flush(e):(j.a.warn("Cannot flush events. No client defined."),M.a.resolve(!1))}function Ze(e){var t=Object(l.b)().getClient();return t?t.close(e):(j.a.warn("Cannot flush events and disable SDK. No client defined."),M.a.resolve(!1))}function et(e){return Ce(e)()}n.d(t,"Integrations",(function(){return rt})),n.d(t,"Severity",(function(){return i})),n.d(t,"Status",(function(){return s})),n.d(t,"addGlobalEventProcessor",(function(){return c.b})),n.d(t,"addBreadcrumb",(function(){return g})),n.d(t,"captureException",(function(){return f})),n.d(t,"captureEvent",(function(){return h})),n.d(t,"captureMessage",(function(){return p})),n.d(t,"configureScope",(function(){return v})),n.d(t,"getHubFromCarrier",(function(){return l.c})),n.d(t,"getCurrentHub",(function(){return l.b})),n.d(t,"Hub",(function(){return l.a})),n.d(t,"makeMain",(function(){return l.e})),n.d(t,"Scope",(function(){return c.a})),n.d(t,"startTransaction",(function(){return S})),n.d(t,"SDK_VERSION",(function(){return"6.13.3"})),n.d(t,"setContext",(function(){return y})),n.d(t,"setExtra",(function(){return _})),n.d(t,"setExtras",(function(){return m})),n.d(t,"setTag",(function(){return w})),n.d(t,"setTags",(function(){return b})),n.d(t,"setUser",(function(){return O})),n.d(t,"withScope",(function(){return E})),n.d(t,"BrowserClient",(function(){return Ae})),n.d(t,"injectReportDialog",(function(){return Pe})),n.d(t,"eventFromException",(function(){return oe})),n.d(t,"eventFromMessage",(function(){return ae})),n.d(t,"defaultIntegrations",(function(){return ze})),n.d(t,"forceLoad",(function(){return Je})),n.d(t,"init",(function(){return Ye})),n.d(t,"lastEventId",(function(){return Xe})),n.d(t,"onLoad",(function(){return Qe})),n.d(t,"showReportDialog",(function(){return Ke})),n.d(t,"flush",(function(){return $e})),n.d(t,"close",(function(){return Ze})),n.d(t,"wrap",(function(){return et})),n.d(t,"SDK_NAME",(function(){return"sentry.javascript.browser"})),n.d(t,"Transports",(function(){return a}));var tt={},nt=Object(A.e)();nt.Sentry&&nt.Sentry.Integrations&&(tt=nt.Sentry.Integrations);var rt=Object(u.a)(Object(u.a)(Object(u.a)({},tt),r),o)},2855:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"Express",(function(){return D})),n.d(r,"Postgres",(function(){return B})),n.d(r,"Mysql",(function(){return H})),n.d(r,"Mongo",(function(){return W}));var o=n(11),a=n(88),i=n(167),s=n(603),u=n(634),c=n(165),l=n(72),d=Object(i.e)();var f=n(320),p=n(636),h=n(2455),v=function(e,t,n){var r;return function(o){t.value>=0&&(o||n)&&(t.delta=t.value-(r||0),(t.delta||void 0===r)&&(r=t.value,e(t)))}},g=function(e,t){return{name:e,value:null!=t?t:-1,delta:0,entries:[],id:"v2-"+Date.now()+"-"+(Math.floor(Math.random()*(9e12-1))+1e12)}},y=function(e,t){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){if("first-input"===e&&!("PerformanceEventTiming"in self))return;var n=new PerformanceObserver((function(e){return e.getEntries().map(t)}));return n.observe({type:e,buffered:!0}),n}}catch(e){}},m=function(e,t){var n=function(r){"pagehide"!==r.type&&"hidden"!==Object(i.e)().document.visibilityState||(e(r),t&&(removeEventListener("visibilitychange",n,!0),removeEventListener("pagehide",n,!0)))};addEventListener("visibilitychange",n,!0),addEventListener("pagehide",n,!0)},b=-1,_=function(){return b<0&&(b="hidden"===Object(i.e)().document.visibilityState?0:1/0,m((function(e){var t=e.timeStamp;b=t}),!0)),{get firstHiddenTime(){return b}}},w={},O=Object(i.e)(),E={_reportAllChanges:!1},S=function(){function e(e){var t,n;this._measurements={},this._performanceCursor=0,!Object(f.b)()&&(null===(t=O)||void 0===t?void 0:t.performance)&&(null===(n=O)||void 0===n?void 0:n.document)&&(O.performance.mark&&O.performance.mark("sentry-tracing-init"),this._trackCLS(),this._trackLCP(e._reportAllChanges),this._trackFID())}return e.prototype.addPerformanceEntries=function(e){var t=this;if(O&&O.performance&&O.performance.getEntries&&p.a){a.a.log("[Tracing] Adding & adjusting spans using Performance API");var n,r,o,i,s,u=Object(l.e)(p.a);if(O.document&&O.document.scripts)for(var c=0;c<O.document.scripts.length;c++)if("true"===O.document.scripts[c].dataset.entry){n=O.document.scripts[c].src;break}if(O.performance.getEntries().slice(this._performanceCursor).forEach((function(c){var d=Object(l.e)(c.startTime),f=Object(l.e)(c.duration);if(!("navigation"===e.op&&u+d<e.startTimestamp))switch(c.entryType){case"navigation":!function(e,t,n){x({transaction:e,entry:t,event:"unloadEvent",timeOrigin:n}),x({transaction:e,entry:t,event:"redirect",timeOrigin:n}),x({transaction:e,entry:t,event:"domContentLoadedEvent",timeOrigin:n}),x({transaction:e,entry:t,event:"loadEvent",timeOrigin:n}),x({transaction:e,entry:t,event:"connect",timeOrigin:n}),x({transaction:e,entry:t,event:"secureConnection",timeOrigin:n,eventEnd:"connectEnd",description:"TLS/SSL"}),x({transaction:e,entry:t,event:"fetch",timeOrigin:n,eventEnd:"domainLookupStart",description:"cache"}),x({transaction:e,entry:t,event:"domainLookup",timeOrigin:n,description:"DNS"}),function(e,t,n){k(e,{op:"browser",description:"request",startTimestamp:n+Object(l.e)(t.requestStart),endTimestamp:n+Object(l.e)(t.responseEnd)}),k(e,{op:"browser",description:"response",startTimestamp:n+Object(l.e)(t.responseStart),endTimestamp:n+Object(l.e)(t.responseEnd)})}(e,t,n)}(e,c,u),i=u+Object(l.e)(c.responseStart),s=u+Object(l.e)(c.requestStart);break;case"mark":case"paint":case"measure":var p=function(e,t,n,r,o){var a=o+n,i=a+r;return k(e,{description:t.name,endTimestamp:i,op:t.entryType,startTimestamp:a}),a}(e,c,d,f,u);void 0===o&&"sentry-tracing-init"===c.name&&(o=p);var h=_(),v=c.startTime<h.firstHiddenTime;"first-paint"===c.name&&v&&(a.a.log("[Measurements] Adding FP"),t._measurements.fp={value:c.startTime},t._measurements["mark.fp"]={value:p}),"first-contentful-paint"===c.name&&v&&(a.a.log("[Measurements] Adding FCP"),t._measurements.fcp={value:c.startTime},t._measurements["mark.fcp"]={value:p});break;case"resource":var g=c.name.replace(O.location.origin,""),y=function(e,t,n,r,o,a){if("xmlhttprequest"===t.initiatorType||"fetch"===t.initiatorType)return;var i={};"transferSize"in t&&(i["Transfer Size"]=t.transferSize);"encodedBodySize"in t&&(i["Encoded Body Size"]=t.encodedBodySize);"decodedBodySize"in t&&(i["Decoded Body Size"]=t.decodedBodySize);var s=a+r,u=s+o;return k(e,{description:n,endTimestamp:u,op:t.initiatorType?"resource."+t.initiatorType:"resource",startTimestamp:s,data:i}),u}(e,c,g,d,f,u);void 0===r&&(n||"").indexOf(g)>-1&&(r=y)}})),void 0!==r&&void 0!==o&&k(e,{description:"evaluation",endTimestamp:o,op:"script",startTimestamp:r}),this._performanceCursor=Math.max(performance.getEntries().length-1,0),this._trackNavigator(e),"pageload"===e.op){var d=Object(l.e)(p.a);"number"==typeof i&&(a.a.log("[Measurements] Adding TTFB"),this._measurements.ttfb={value:1e3*(i-e.startTimestamp)},"number"==typeof s&&s<=i&&(this._measurements["ttfb.requestTime"]={value:1e3*(i-s)})),["fcp","fp","lcp"].forEach((function(n){if(t._measurements[n]&&!(d>=e.startTimestamp)){var r=t._measurements[n].value,o=d+Object(l.e)(r),i=Math.abs(1e3*(o-e.startTimestamp)),s=i-r;a.a.log("[Measurements] Normalized "+n+" from "+r+" to "+i+" ("+s+")"),t._measurements[n].value=i}})),this._measurements["mark.fid"]&&this._measurements.fid&&k(e,{description:"first input delay",endTimestamp:this._measurements["mark.fid"].value+Object(l.e)(this._measurements.fid.value),op:"web.vitals",startTimestamp:this._measurements["mark.fid"].value}),"fcp"in this._measurements||delete this._measurements.cls,e.setMeasurements(this._measurements),this._tagMetricInfo(e)}}},e.prototype._tagMetricInfo=function(e){this._lcpEntry&&(a.a.log("[Measurements] Adding LCP Data"),this._lcpEntry.element&&e.setTag("lcp.element",Object(h.a)(this._lcpEntry.element)),this._lcpEntry.id&&e.setTag("lcp.id",this._lcpEntry.id),this._lcpEntry.url&&e.setTag("lcp.url",this._lcpEntry.url.trim().slice(0,200)),e.setTag("lcp.size",this._lcpEntry.size)),this._clsEntry&&this._clsEntry.sources&&(a.a.log("[Measurements] Adding CLS Data"),this._clsEntry.sources.forEach((function(t,n){return e.setTag("cls.source."+(n+1),Object(h.a)(t.node))})))},e.prototype._trackCLS=function(){var e=this;!function(e,t){var n,r=g("CLS",0),o=0,a=[],i=function(e){if(e&&!e.hadRecentInput){var t=a[0],i=a[a.length-1];o&&0!==a.length&&e.startTime-i.startTime<1e3&&e.startTime-t.startTime<5e3?(o+=e.value,a.push(e)):(o=e.value,a=[e]),o>r.value&&(r.value=o,r.entries=a,n&&n())}},s=y("layout-shift",i);s&&(n=v(e,r,t),m((function(){s.takeRecords().map(i),n(!0)})))}((function(t){var n=t.entries.pop();n&&(a.a.log("[Measurements] Adding CLS"),e._measurements.cls={value:t.value},e._clsEntry=n)}))},e.prototype._trackNavigator=function(e){var t=O.navigator;if(t){var n=t.connection;n&&(n.effectiveType&&e.setTag("effectiveConnectionType",n.effectiveType),n.type&&e.setTag("connectionType",n.type),T(n.rtt)&&(this._measurements["connection.rtt"]={value:n.rtt}),T(n.downlink)&&(this._measurements["connection.downlink"]={value:n.downlink})),T(t.deviceMemory)&&e.setTag("deviceMemory",String(t.deviceMemory)),T(t.hardwareConcurrency)&&e.setTag("hardwareConcurrency",String(t.hardwareConcurrency))}},e.prototype._trackLCP=function(e){var t=this;!function(e,t){var n,r=_(),o=g("LCP"),a=function(e){var t=e.startTime;t<r.firstHiddenTime&&(o.value=t,o.entries.push(e)),n&&n()},i=y("largest-contentful-paint",a);if(i){n=v(e,o,t);var s=function(){w[o.id]||(i.takeRecords().map(a),i.disconnect(),w[o.id]=!0,n(!0))};["keydown","click"].forEach((function(e){addEventListener(e,s,{once:!0,capture:!0})})),m(s,!0)}}((function(e){var n=e.entries.pop();if(n){var r=Object(l.e)(p.a),o=Object(l.e)(n.startTime);a.a.log("[Measurements] Adding LCP"),t._measurements.lcp={value:e.value},t._measurements["mark.lcp"]={value:r+o},t._lcpEntry=n}}),e)},e.prototype._trackFID=function(){var e=this;!function(e,t){var n,r=_(),o=g("FID"),a=function(e){n&&e.startTime<r.firstHiddenTime&&(o.value=e.processingStart-e.startTime,o.entries.push(e),n(!0))},i=y("first-input",a);i&&(n=v(e,o,t),m((function(){i.takeRecords().map(a),i.disconnect()}),!0))}((function(t){var n=t.entries.pop();if(n){var r=Object(l.e)(p.a),o=Object(l.e)(n.startTime);a.a.log("[Measurements] Adding FID"),e._measurements.fid={value:t.value},e._measurements["mark.fid"]={value:r+o}}}))},e}();function x(e){var t=e.transaction,n=e.entry,r=e.event,o=e.timeOrigin,a=e.eventEnd,i=e.description,s=a?n[a]:n[r+"End"],u=n[r+"Start"];u&&s&&k(t,{op:"browser",description:null!=i?i:r,startTimestamp:o+Object(l.e)(u),endTimestamp:o+Object(l.e)(s)})}function k(e,t){var n=t.startTimestamp,r=Object(o.d)(t,["startTimestamp"]);return n&&e.startTimestamp>n&&(e.startTimestamp=n),e.startChild(Object(o.a)({startTimestamp:n},r))}function T(e){return"number"==typeof e&&isFinite(e)}var C=n(607),P=n(2570),R=n(118),I={traceFetch:!0,traceXHR:!0,tracingOrigins:["localhost",/^\//]};function j(e){var t=Object(o.a)(Object(o.a)({},I),e),n=t.traceFetch,r=t.traceXHR,a=t.tracingOrigins,i=t.shouldCreateSpanForRequest,s={},u=function(e){if(s[e])return s[e];var t=a;return s[e]=t.some((function(t){return Object(C.a)(e,t)}))&&!Object(C.a)(e,"sentry_key"),s[e]},d=u;"function"==typeof i&&(d=function(e){return u(e)&&i(e)});var f={};n&&Object(P.a)({callback:function(e){!function(e,t,n){if(!Object(l.d)()||!e.fetchData||!t(e.fetchData.url))return;if(e.endTimestamp&&e.fetchData.__span){return void((a=n[e.fetchData.__span])&&(e.response?a.setHttpStatus(e.response.status):e.error&&a.setStatus(c.a.InternalError),a.finish(),delete n[e.fetchData.__span]))}var r=Object(l.c)();if(r){var a=r.startChild({data:Object(o.a)(Object(o.a)({},e.fetchData),{type:"fetch"}),description:e.fetchData.method+" "+e.fetchData.url,op:"http.client"});e.fetchData.__span=a.spanId,n[a.spanId]=a;var i=e.args[0]=e.args[0],s=e.args[1]=e.args[1]||{},u=s.headers;Object(R.g)(i,Request)&&(u=i.headers),u?"function"==typeof u.append?u.append("sentry-trace",a.toTraceparent()):u=Array.isArray(u)?Object(o.e)(u,[["sentry-trace",a.toTraceparent()]]):Object(o.a)(Object(o.a)({},u),{"sentry-trace":a.toTraceparent()}):u={"sentry-trace":a.toTraceparent()},s.headers=u}}(e,d,f)},type:"fetch"}),r&&Object(P.a)({callback:function(e){!function(e,t,n){var r,a;if(!Object(l.d)()||(null===(r=e.xhr)||void 0===r?void 0:r.__sentry_own_request__)||!((null===(a=e.xhr)||void 0===a?void 0:a.__sentry_xhr__)&&t(e.xhr.__sentry_xhr__.url)))return;var i=e.xhr.__sentry_xhr__;if(e.endTimestamp&&e.xhr.__sentry_xhr_span_id__){return void((u=n[e.xhr.__sentry_xhr_span_id__])&&(u.setHttpStatus(i.status_code),u.finish(),delete n[e.xhr.__sentry_xhr_span_id__]))}var s=Object(l.c)();if(s){var u=s.startChild({data:Object(o.a)(Object(o.a)({},i.data),{type:"xhr",method:i.method,url:i.url}),description:i.method+" "+i.url,op:"http.client"});if(e.xhr.__sentry_xhr_span_id__=u.spanId,n[e.xhr.__sentry_xhr_span_id__]=u,e.xhr.setRequestHeader)try{e.xhr.setRequestHeader("sentry-trace",u.toTraceparent())}catch(e){}}}(e,d,f)},type:"xhr"})}var M=Object(i.e)();var A=Object(o.a)({idleTimeout:u.a,markBackgroundTransactions:!0,maxTransactionDuration:600,routingInstrumentation:function(e,t,n){if(void 0===t&&(t=!0),void 0===n&&(n=!0),M&&M.location){var r,o=M.location.href;t&&(r=e({name:M.location.pathname,op:"pageload"})),n&&Object(P.a)({callback:function(t){var n=t.to,i=t.from;void 0===i&&o&&-1!==o.indexOf(n)?o=void 0:i!==n&&(o=void 0,r&&(a.a.log("[Tracing] Finishing current transaction with op: "+r.op),r.finish()),r=e({name:M.location.pathname,op:"navigation"}))},type:"history"})}else a.a.warn("Could not initialize routing instrumentation due to invalid location")},startTransactionOnLocationChange:!0,startTransactionOnPageLoad:!0},I),L=function(){function e(t){this.name=e.id,this._emitOptionsWarning=!1;var n=I.tracingOrigins;t&&t.tracingOrigins&&Array.isArray(t.tracingOrigins)&&0!==t.tracingOrigins.length?n=t.tracingOrigins:this._emitOptionsWarning=!0,this.options=Object(o.a)(Object(o.a)(Object(o.a)({},A),t),{tracingOrigins:n}),this._metrics=new S(Object(o.a)(Object(o.a)({},E),this.options._metricOptions))}return e.prototype.setupOnce=function(e,t){var n=this;this._getCurrentHub=t,this._emitOptionsWarning&&(a.a.warn("[Tracing] You need to define `tracingOrigins` in the options. Set an array of urls or patterns to trace."),a.a.warn("[Tracing] We added a reasonable default for you: "+I.tracingOrigins));var r=this.options,o=r.routingInstrumentation,i=r.startTransactionOnLocationChange,s=r.startTransactionOnPageLoad,u=r.markBackgroundTransactions,f=r.traceFetch,p=r.traceXHR,h=r.tracingOrigins,v=r.shouldCreateSpanForRequest;o((function(e){return n._createRouteTransaction(e)}),s,i),u&&(d&&d.document?d.document.addEventListener("visibilitychange",(function(){var e=Object(l.c)();d.document.hidden&&e&&(a.a.log("[Tracing] Transaction: "+c.a.Cancelled+" -> since tab moved to the background, op: "+e.op),e.status||e.setStatus(c.a.Cancelled),e.setTag("visibilitychange","document.hidden"),e.finish())})):a.a.warn("[Tracing] Could not set up background tab detection due to lack of global document")),j({traceFetch:f,traceXHR:p,tracingOrigins:h,shouldCreateSpanForRequest:v})},e.prototype._createRouteTransaction=function(e){var t=this;if(this._getCurrentHub){var n=this.options,r=n.beforeNavigate,u=n.idleTimeout,d=n.maxTransactionDuration,f="pageload"===e.op?function(){var e=(t="sentry-trace",n=Object(i.e)().document.querySelector("meta[name="+t+"]"),n?n.getAttribute("content"):null);var t,n;if(e)return Object(l.b)(e);return}():void 0,p=Object(o.a)(Object(o.a)(Object(o.a)({},e),f),{trimEnd:!0}),h="function"==typeof r?r(p):p,v=void 0===h?Object(o.a)(Object(o.a)({},p),{sampled:!1}):h;!1===v.sampled&&a.a.log("[Tracing] Will not send "+v.op+" transaction because of beforeNavigate."),a.a.log("[Tracing] Starting "+v.op+" transaction on scope");var g=this._getCurrentHub(),y=Object(i.e)().location,m=Object(s.b)(g,v,u,!0,{location:y});return m.registerBeforeFinishCallback((function(e,n){t._metrics.addPerformanceEntries(e),function(e,t,n){var r=n-t.startTimestamp;n&&(r>e||r<0)&&(t.setStatus(c.a.DeadlineExceeded),t.setTag("maxTransactionDurationExceeded","true"))}(Object(l.f)(d),e,n)})),m}a.a.warn("[Tracing] Did not create "+e.op+" transaction because _getCurrentHub is invalid.")},e.id="BrowserTracing",e}();var D=function(){function e(t){void 0===t&&(t={}),this.name=e.id,this._router=t.router||t.app,this._methods=(Array.isArray(t.methods)?t.methods:[]).concat("use")}return e.prototype.setupOnce=function(){this._router?function(e,t){void 0===t&&(t=[]);t.forEach((function(t){return function(e,t){var n=e[t];return e[t]=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return n.call.apply(n,Object(o.e)([this],F(e,t)))},e}(e,t)}))}(this._router,this._methods):a.a.error("ExpressIntegration is missing an Express instance")},e.id="Express",e}();function N(e,t){var n=e.length;switch(n){case 2:return function(n,r){var o=r.__sentry_transaction;if(o){var a=o.startChild({description:e.name,op:"middleware."+t});r.once("finish",(function(){a.finish()}))}return e.call(this,n,r)};case 3:return function(n,r,a){var i,s=null===(i=r.__sentry_transaction)||void 0===i?void 0:i.startChild({description:e.name,op:"middleware."+t});e.call(this,n,r,(function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];null===(e=s)||void 0===e||e.finish(),a.call.apply(a,Object(o.e)([this],t))}))};case 4:return function(n,r,a,i){var s,u=null===(s=a.__sentry_transaction)||void 0===s?void 0:s.startChild({description:e.name,op:"middleware."+t});e.call(this,n,r,a,(function(){for(var e,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];null===(e=u)||void 0===e||e.finish(),i.call.apply(i,Object(o.e)([this],t))}))};default:throw new Error("Express middleware takes 2-4 arguments. Got: "+n)}}function F(e,t){return e.map((function(e){return"function"==typeof e?N(e,t):Array.isArray(e)?e.map((function(e){return"function"==typeof e?N(e,t):e})):e}))}var U=n(221),B=function(){function e(t){void 0===t&&(t={}),this.name=e.id,this._usePgNative=!!t.usePgNative}return e.prototype.setupOnce=function(e,t){var n,r=Object(f.c)("pg");if(r)if(!this._usePgNative||(null===(n=r.native)||void 0===n?void 0:n.Client)){var o=(this._usePgNative?r.native:r).Client;Object(U.c)(o.prototype,"query",(function(e){return function(n,r,o){var a,i,s,u=null===(i=null===(a=t().getScope())||void 0===a?void 0:a.getSpan())||void 0===i?void 0:i.startChild({description:"string"==typeof n?n:n.text,op:"db"});if("function"==typeof o)return e.call(this,n,r,(function(e,t){var n;null===(n=u)||void 0===n||n.finish(),o(e,t)}));if("function"==typeof r)return e.call(this,n,(function(e,t){var n;null===(n=u)||void 0===n||n.finish(),r(e,t)}));var c=void 0!==r?e.call(this,n,r):e.call(this,n);return Object(R.m)(c)?c.then((function(e){var t;return null===(t=u)||void 0===t||t.finish(),e})):(null===(s=u)||void 0===s||s.finish(),c)}}))}else a.a.error("Postgres Integration was unable to access 'pg-native' bindings.");else a.a.error("Postgres Integration was unable to require `pg` package.")},e.id="Postgres",e}(),H=function(){function e(){this.name=e.id}return e.prototype.setupOnce=function(e,t){var n=Object(f.c)("mysql/lib/Connection.js");n?Object(U.c)(n,"createQuery",(function(e){return function(n,r,o){var a,i,s=null===(i=null===(a=t().getScope())||void 0===a?void 0:a.getSpan())||void 0===i?void 0:i.startChild({description:"string"==typeof n?n:n.sql,op:"db"});return"function"==typeof o?e.call(this,n,r,(function(e,t,n){var r;null===(r=s)||void 0===r||r.finish(),o(e,t,n)})):"function"==typeof r?e.call(this,n,(function(e,t,n){var o;null===(o=s)||void 0===o||o.finish(),r(e,t,n)})):e.call(this,n,r,o)}})):a.a.error("Mysql Integration was unable to require `mysql` package.")},e.id="Mysql",e}(),G=["aggregate","bulkWrite","countDocuments","createIndex","createIndexes","deleteMany","deleteOne","distinct","drop","dropIndex","dropIndexes","estimatedDocumentCount","find","findOne","findOneAndDelete","findOneAndReplace","findOneAndUpdate","indexes","indexExists","indexInformation","initializeOrderedBulkOp","insertMany","insertOne","isCapped","mapReduce","options","parallelCollectionScan","rename","replaceOne","stats","updateMany","updateOne"],q={bulkWrite:["operations"],countDocuments:["query"],createIndex:["fieldOrSpec"],createIndexes:["indexSpecs"],deleteMany:["filter"],deleteOne:["filter"],distinct:["key","query"],dropIndex:["indexName"],find:["query"],findOne:["query"],findOneAndDelete:["filter"],findOneAndReplace:["filter","replacement"],findOneAndUpdate:["filter","update"],indexExists:["indexes"],insertMany:["docs"],insertOne:["doc"],mapReduce:["map","reduce"],rename:["newName"],replaceOne:["filter","doc"],updateMany:["filter","update"],updateOne:["filter","update"]},W=function(){function e(t){void 0===t&&(t={}),this.name=e.id,this._operations=Array.isArray(t.operations)?t.operations:G,this._describeOperations=!("describeOperations"in t)||t.describeOperations,this._useMongoose=!!t.useMongoose}return e.prototype.setupOnce=function(e,t){var n=this._useMongoose?"mongoose":"mongodb",r=Object(f.c)(n);r?this._instrumentOperations(r.Collection,this._operations,t):a.a.error("Mongo Integration was unable to require `"+n+"` package.")},e.prototype._instrumentOperations=function(e,t,n){var r=this;t.forEach((function(t){return r._patchOperation(e,t,n)}))},e.prototype._patchOperation=function(e,t,n){if(t in e.prototype){var r=this._getSpanContextFromOperationArguments.bind(this);Object(U.c)(e.prototype,t,(function(e){return function(){for(var a,i,s,u,c=[],l=0;l<arguments.length;l++)c[l]=arguments[l];var d=c[c.length-1],f=n().getScope(),p=null===(a=f)||void 0===a?void 0:a.getSpan();if("function"!=typeof d||"mapReduce"===t&&2===c.length){var h=null===(i=p)||void 0===i?void 0:i.startChild(r(this,t,c)),v=e.call.apply(e,Object(o.e)([this],c));return Object(R.m)(v)?v.then((function(e){var t;return null===(t=h)||void 0===t||t.finish(),e})):(null===(s=h)||void 0===s||s.finish(),v)}var g=null===(u=p)||void 0===u?void 0:u.startChild(r(this,t,c.slice(0,-1)));return e.call.apply(e,Object(o.e)([this],c.slice(0,-1),[function(e,t){var n;null===(n=g)||void 0===n||n.finish(),d(e,t)}]))}}))}},e.prototype._getSpanContextFromOperationArguments=function(e,t,n){var r={collectionName:e.collectionName,dbName:e.dbName,namespace:e.namespace},a={op:"db",description:t,data:r},i=q[t],s=Array.isArray(this._describeOperations)?this._describeOperations.includes(t):this._describeOperations;if(!i||!s)return a;try{if("mapReduce"===t){var u=Object(o.c)(n,2),c=u[0],l=u[1];r[i[0]]="string"==typeof c?c:c.name||"<anonymous>",r[i[1]]="string"==typeof l?l:l.name||"<anonymous>"}else for(var d=0;d<i.length;d++)r[i[d]]=JSON.stringify(n[d])}catch(e){}return a},e.id="Mongo",e}(),V=n(604),z=n(635);n.d(t,"Integrations",(function(){return Y})),n.d(t,"Span",(function(){return V.a})),n.d(t,"Transaction",(function(){return z.a})),n.d(t,"registerRequestInstrumentation",(function(){return j})),n.d(t,"defaultRequestInstrumentationOptions",(function(){return I})),n.d(t,"SpanStatus",(function(){return c.a})),n.d(t,"IdleTransaction",(function(){return u.b})),n.d(t,"startIdleTransaction",(function(){return s.b})),n.d(t,"addExtensionMethods",(function(){return s.a})),n.d(t,"extractTraceparentData",(function(){return l.b})),n.d(t,"getActiveTransaction",(function(){return l.c})),n.d(t,"hasTracingEnabled",(function(){return l.d})),n.d(t,"stripUrlQueryAndFragment",(function(){return i.i})),n.d(t,"TRACEPARENT_REGEXP",(function(){return l.a}));var Y=Object(o.a)(Object(o.a)({},r),{BrowserTracing:L});Object(s.a)()},2856:function(e,t,n){"use strict";var r;n.d(t,"a",(function(){return r})),function(e){e.BeforeSend="before_send",e.EventProcessor="event_processor",e.NetworkError="network_error",e.QueueOverflow="queue_overflow",e.RateLimitBackoff="ratelimit_backoff",e.SampleRate="sample_rate"}(r||(r={}))},2857:function(e,t,n){"use strict";var r,o;n.d(t,"a",(function(){return r})),function(e){e.Ok="ok",e.Exited="exited",e.Crashed="crashed",e.Abnormal="abnormal"}(r||(r={})),function(e){e.Ok="ok",e.Errored="errored",e.Crashed="crashed"}(o||(o={}))},320:function(e,t,n){"use strict";(function(e,r){function o(){return"[object process]"===Object.prototype.toString.call(void 0!==e?e:0)}function a(e,t){return e.require(t)}function i(e){var t;try{t=a(r,e)}catch(e){}try{var n=a(r,"process").cwd;t=a(r,n()+"/node_modules/"+e)}catch(e){}return t}n.d(t,"b",(function(){return o})),n.d(t,"a",(function(){return a})),n.d(t,"c",(function(){return i}))}).call(this,n(108),n(611)(e))},603:function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return v})),n.d(t,"a",(function(){return g}));var r=n(11),o=n(637),a=n(1072),i=n(88),s=n(320),u=n(2569),c=n(634),l=n(635),d=n(72);function f(){var e=this.getScope();if(e){var t=e.getSpan();if(t)return{"sentry-trace":t.toTraceparent()}}return{}}function p(e,t,n){return Object(d.d)(t)?void 0!==e.sampled?(e.setMetadata({transactionSampling:{method:a.a.Explicit}}),e):("function"==typeof t.tracesSampler?(r=t.tracesSampler(n),e.setMetadata({transactionSampling:{method:a.a.Sampler,rate:Number(r)}})):void 0!==n.parentSampled?(r=n.parentSampled,e.setMetadata({transactionSampling:{method:a.a.Inheritance}})):(r=t.tracesSampleRate,e.setMetadata({transactionSampling:{method:a.a.Rate,rate:Number(r)}})),function(e){if(isNaN(e)||"number"!=typeof e&&"boolean"!=typeof e)return i.a.warn("[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got "+JSON.stringify(e)+" of type "+JSON.stringify(typeof e)+"."),!1;if(e<0||e>1)return i.a.warn("[Tracing] Given sample rate is invalid. Sample rate must be between 0 and 1. Got "+e+"."),!1;return!0}(r)?r?(e.sampled=Math.random()<r,e.sampled?(i.a.log("[Tracing] starting "+e.op+" transaction - "+e.name),e):(i.a.log("[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = "+Number(r)+")"),e)):(i.a.log("[Tracing] Discarding transaction because "+("function"==typeof t.tracesSampler?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0")),e.sampled=!1,e):(i.a.warn("[Tracing] Discarding transaction because of invalid sample rate."),e.sampled=!1,e)):(e.sampled=!1,e);var r}function h(e,t){var n,o,a=(null===(n=this.getClient())||void 0===n?void 0:n.getOptions())||{},i=new l.a(e,this);return(i=p(i,a,Object(r.a)({parentSampled:e.parentSampled,transactionContext:e},t))).sampled&&i.initSpanRecorder(null===(o=a._experiments)||void 0===o?void 0:o.maxSpans),i}function v(e,t,n,o,a){var i,s,u=(null===(i=e.getClient())||void 0===i?void 0:i.getOptions())||{},l=new c.b(t,e,n,o);return(l=p(l,u,Object(r.a)({parentSampled:t.parentSampled,transactionContext:t},a))).sampled&&l.initSpanRecorder(null===(s=u._experiments)||void 0===s?void 0:s.maxSpans),l}function g(){var t;(t=Object(o.d)()).__SENTRY__&&(t.__SENTRY__.extensions=t.__SENTRY__.extensions||{},t.__SENTRY__.extensions.startTransaction||(t.__SENTRY__.extensions.startTransaction=h),t.__SENTRY__.extensions.traceHeaders||(t.__SENTRY__.extensions.traceHeaders=f)),Object(s.b)()&&function(){var t=Object(o.d)();if(t.__SENTRY__){var n={mongodb:function(){return new(Object(s.a)(e,"./integrations/mongo").Mongo)},mongoose:function(){return new(Object(s.a)(e,"./integrations/mongo").Mongo)({mongoose:!0})},mysql:function(){return new(Object(s.a)(e,"./integrations/mysql").Mysql)},pg:function(){return new(Object(s.a)(e,"./integrations/postgres").Postgres)}},a=Object.keys(n).filter((function(e){return!!Object(s.c)(e)})).map((function(e){try{return n[e]()}catch(e){return}})).filter((function(e){return e}));a.length>0&&(t.__SENTRY__.integrations=Object(r.e)(t.__SENTRY__.integrations||[],a))}}(),Object(u.a)()}}).call(this,n(611)(e))},604:function(e,t,n){"use strict";n.d(t,"b",(function(){return u})),n.d(t,"a",(function(){return c}));var r=n(11),o=n(167),a=n(636),i=n(221),s=n(165),u=function(){function e(e){void 0===e&&(e=1e3),this.spans=[],this._maxlen=e}return e.prototype.add=function(e){this.spans.length>this._maxlen?e.spanRecorder=void 0:this.spans.push(e)},e}(),c=function(){function e(e){if(this.traceId=Object(o.j)(),this.spanId=Object(o.j)().substring(16),this.startTimestamp=Object(a.d)(),this.tags={},this.data={},!e)return this;e.traceId&&(this.traceId=e.traceId),e.spanId&&(this.spanId=e.spanId),e.parentSpanId&&(this.parentSpanId=e.parentSpanId),"sampled"in e&&(this.sampled=e.sampled),e.op&&(this.op=e.op),e.description&&(this.description=e.description),e.data&&(this.data=e.data),e.tags&&(this.tags=e.tags),e.status&&(this.status=e.status),e.startTimestamp&&(this.startTimestamp=e.startTimestamp),e.endTimestamp&&(this.endTimestamp=e.endTimestamp)}return e.prototype.child=function(e){return this.startChild(e)},e.prototype.startChild=function(t){var n=new e(Object(r.a)(Object(r.a)({},t),{parentSpanId:this.spanId,sampled:this.sampled,traceId:this.traceId}));return n.spanRecorder=this.spanRecorder,n.spanRecorder&&n.spanRecorder.add(n),n.transaction=this.transaction,n},e.prototype.setTag=function(e,t){var n;return this.tags=Object(r.a)(Object(r.a)({},this.tags),((n={})[e]=t,n)),this},e.prototype.setData=function(e,t){var n;return this.data=Object(r.a)(Object(r.a)({},this.data),((n={})[e]=t,n)),this},e.prototype.setStatus=function(e){return this.status=e,this},e.prototype.setHttpStatus=function(e){this.setTag("http.status_code",String(e));var t=s.a.fromHttpCode(e);return t!==s.a.UnknownError&&this.setStatus(t),this},e.prototype.isSuccess=function(){return this.status===s.a.Ok},e.prototype.finish=function(e){this.endTimestamp="number"==typeof e?e:Object(a.d)()},e.prototype.toTraceparent=function(){var e="";return void 0!==this.sampled&&(e=this.sampled?"-1":"-0"),this.traceId+"-"+this.spanId+e},e.prototype.toContext=function(){return Object(i.a)({data:this.data,description:this.description,endTimestamp:this.endTimestamp,op:this.op,parentSpanId:this.parentSpanId,sampled:this.sampled,spanId:this.spanId,startTimestamp:this.startTimestamp,status:this.status,tags:this.tags,traceId:this.traceId})},e.prototype.updateWithContext=function(e){var t,n,r,o,a;return this.data=null!=(t=e.data)?t:{},this.description=e.description,this.endTimestamp=e.endTimestamp,this.op=e.op,this.parentSpanId=e.parentSpanId,this.sampled=e.sampled,this.spanId=null!=(n=e.spanId)?n:this.spanId,this.startTimestamp=null!=(r=e.startTimestamp)?r:this.startTimestamp,this.status=e.status,this.tags=null!=(o=e.tags)?o:{},this.traceId=null!=(a=e.traceId)?a:this.traceId,this},e.prototype.getTraceContext=function(){return Object(i.a)({data:Object.keys(this.data).length>0?this.data:void 0,description:this.description,op:this.op,parent_span_id:this.parentSpanId,span_id:this.spanId,status:this.status,tags:Object.keys(this.tags).length>0?this.tags:void 0,trace_id:this.traceId})},e.prototype.toJSON=function(){return Object(i.a)({data:Object.keys(this.data).length>0?this.data:void 0,description:this.description,op:this.op,parent_span_id:this.parentSpanId,span_id:this.spanId,start_timestamp:this.startTimestamp,status:this.status,tags:Object.keys(this.tags).length>0?this.tags:void 0,timestamp:this.endTimestamp,trace_id:this.traceId})},e}()},607:function(e,t,n){"use strict";n.d(t,"d",(function(){return o})),n.d(t,"c",(function(){return a})),n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return s}));var r=n(118);function o(e,t){return void 0===t&&(t=0),"string"!=typeof e||0===t?e:e.length<=t?e:e.substr(0,t)+"..."}function a(e,t){var n=e,r=n.length;if(r<=150)return n;t>r&&(t=r);var o=Math.max(t-60,0);o<5&&(o=0);var a=Math.min(o+140,r);return a>r-5&&(a=r),a===r&&(o=Math.max(a-140,0)),n=n.slice(o,a),o>0&&(n="'{snip} "+n),a<r&&(n+=" {snip}"),n}function i(e,t){if(!Array.isArray(e))return"";for(var n=[],r=0;r<e.length;r++){var o=e[r];try{n.push(String(o))}catch(e){n.push("[value cannot be serialized]")}}return n.join(t)}function s(e,t){return!!Object(r.k)(e)&&(Object(r.j)(t)?t.test(e):"string"==typeof t&&-1!==e.indexOf(t))}},634:function(e,t,n){"use strict";n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return d}));var r=n(11),o=n(636),a=n(88),i=n(604),s=n(165),u=n(635),c=1e3,l=function(e){function t(t,n,r,o){void 0===r&&(r="");var a=e.call(this,o)||this;return a._pushActivity=t,a._popActivity=n,a.transactionSpanId=r,a}return Object(r.b)(t,e),t.prototype.add=function(t){var n=this;t.spanId!==this.transactionSpanId&&(t.finish=function(e){t.endTimestamp="number"==typeof e?e:Object(o.d)(),n._popActivity(t.spanId)},void 0===t.endTimestamp&&this._pushActivity(t.spanId)),e.prototype.add.call(this,t)},t}(i.b),d=function(e){function t(t,n,r,o){void 0===r&&(r=c),void 0===o&&(o=!1);var i=e.call(this,t,n)||this;return i._idleHub=n,i._idleTimeout=r,i._onScope=o,i.activities={},i._heartbeatCounter=0,i._finished=!1,i._beforeFinishCallbacks=[],n&&o&&(f(n),a.a.log("Setting idle transaction on scope. Span ID: "+i.spanId),n.configureScope((function(e){return e.setSpan(i)}))),i._initTimeout=setTimeout((function(){i._finished||i.finish()}),i._idleTimeout),i}return Object(r.b)(t,e),t.prototype.finish=function(t){var n,i,u=this;if(void 0===t&&(t=Object(o.d)()),this._finished=!0,this.activities={},this.spanRecorder){a.a.log("[Tracing] finishing IdleTransaction",new Date(1e3*t).toISOString(),this.op);try{for(var c=Object(r.f)(this._beforeFinishCallbacks),l=c.next();!l.done;l=c.next()){(0,l.value)(this,t)}}catch(e){n={error:e}}finally{try{l&&!l.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}this.spanRecorder.spans=this.spanRecorder.spans.filter((function(e){if(e.spanId===u.spanId)return!0;e.endTimestamp||(e.endTimestamp=t,e.setStatus(s.a.Cancelled),a.a.log("[Tracing] cancelling span since transaction ended early",JSON.stringify(e,void 0,2)));var n=e.startTimestamp<t;return n||a.a.log("[Tracing] discarding Span since it happened after Transaction was finished",JSON.stringify(e,void 0,2)),n})),a.a.log("[Tracing] flushing IdleTransaction")}else a.a.log("[Tracing] No active IdleTransaction");return this._onScope&&f(this._idleHub),e.prototype.finish.call(this,t)},t.prototype.registerBeforeFinishCallback=function(e){this._beforeFinishCallbacks.push(e)},t.prototype.initSpanRecorder=function(e){var t=this;if(!this.spanRecorder){this.spanRecorder=new l((function(e){t._finished||t._pushActivity(e)}),(function(e){t._finished||t._popActivity(e)}),this.spanId,e),a.a.log("Starting heartbeat"),this._pingHeartbeat()}this.spanRecorder.add(this)},t.prototype._pushActivity=function(e){this._initTimeout&&(clearTimeout(this._initTimeout),this._initTimeout=void 0),a.a.log("[Tracing] pushActivity: "+e),this.activities[e]=!0,a.a.log("[Tracing] new activities count",Object.keys(this.activities).length)},t.prototype._popActivity=function(e){var t=this;if(this.activities[e]&&(a.a.log("[Tracing] popActivity "+e),delete this.activities[e],a.a.log("[Tracing] new activities count",Object.keys(this.activities).length)),0===Object.keys(this.activities).length){var n=this._idleTimeout,r=Object(o.d)()+n/1e3;setTimeout((function(){t._finished||t.finish(r)}),n)}},t.prototype._beat=function(){if(!this._finished){var e=Object.keys(this.activities).join("");e===this._prevHeartbeatString?this._heartbeatCounter+=1:this._heartbeatCounter=1,this._prevHeartbeatString=e,this._heartbeatCounter>=3?(a.a.log("[Tracing] Transaction finished because of no change for 3 heart beats"),this.setStatus(s.a.DeadlineExceeded),this.setTag("heartbeat","failed"),this.finish()):this._pingHeartbeat()}},t.prototype._pingHeartbeat=function(){var e=this;a.a.log("pinging Heartbeat -> current counter: "+this._heartbeatCounter),setTimeout((function(){e._beat()}),5e3)},t}(u.a);function f(e){if(e){var t=e.getScope();if(t)t.getTransaction()&&t.setSpan(void 0)}}},635:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var r=n(11),o=n(637),a=n(2856),i=n(118),s=n(88),u=n(221),c=n(604),l=function(e){function t(t,n){var r=e.call(this,t)||this;return r._measurements={},r._hub=Object(o.b)(),Object(i.g)(n,o.a)&&(r._hub=n),r.name=t.name||"",r.metadata=t.metadata||{},r._trimEnd=t.trimEnd,r.transaction=r,r}return Object(r.b)(t,e),t.prototype.setName=function(e){this.name=e},t.prototype.initSpanRecorder=function(e){void 0===e&&(e=1e3),this.spanRecorder||(this.spanRecorder=new c.b(e)),this.spanRecorder.add(this)},t.prototype.setMeasurements=function(e){this._measurements=Object(r.a)({},e)},t.prototype.setMetadata=function(e){this.metadata=Object(r.a)(Object(r.a)({},this.metadata),e)},t.prototype.finish=function(t){var n,r,o,i,u,c=this;if(void 0===this.endTimestamp){if(this.name||(s.a.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this.name="<unlabeled transaction>"),e.prototype.finish.call(this,t),!0!==this.sampled)return s.a.log("[Tracing] Discarding transaction because its trace was not chosen to be sampled."),void(null===(u=null===(o=null===(n=this._hub.getClient())||void 0===n?void 0:(r=n).getTransport)||void 0===o?void 0:(i=o.call(r)).recordLostEvent)||void 0===u||u.call(i,a.a.SampleRate,"transaction"));var l=this.spanRecorder?this.spanRecorder.spans.filter((function(e){return e!==c&&e.endTimestamp})):[];this._trimEnd&&l.length>0&&(this.endTimestamp=l.reduce((function(e,t){return e.endTimestamp&&t.endTimestamp?e.endTimestamp>t.endTimestamp?e:t:e})).endTimestamp);var d={contexts:{trace:this.getTraceContext()},spans:l,start_timestamp:this.startTimestamp,tags:this.tags,timestamp:this.endTimestamp,transaction:this.name,type:"transaction",debug_meta:this.metadata};return Object.keys(this._measurements).length>0&&(s.a.log("[Measurements] Adding measurements to transaction",JSON.stringify(this._measurements,void 0,2)),d.measurements=this._measurements),s.a.log("[Tracing] Finishing "+this.op+" transaction: "+this.name+"."),this._hub.captureEvent(d)}},t.prototype.toContext=function(){var t=e.prototype.toContext.call(this);return Object(u.a)(Object(r.a)(Object(r.a)({},t),{name:this.name,trimEnd:this._trimEnd}))},t.prototype.updateWithContext=function(t){var n;return e.prototype.updateWithContext.call(this,t),this.name=null!=(n=t.name)?n:"",this._trimEnd=t.trimEnd,this},t}(c.a)},636:function(e,t,n){"use strict";(function(e){n.d(t,"b",(function(){return u})),n.d(t,"c",(function(){return c})),n.d(t,"d",(function(){return l})),n.d(t,"a",(function(){return d}));var r=n(167),o=n(320),a={nowSeconds:function(){return Date.now()/1e3}};var i=Object(o.b)()?function(){try{return Object(o.a)(e,"perf_hooks").performance}catch(e){return}}():function(){var e=Object(r.e)().performance;if(e&&e.now)return{now:function(){return e.now()},timeOrigin:Date.now()-e.now()}}(),s=void 0===i?a:{nowSeconds:function(){return(i.timeOrigin+i.now())/1e3}},u=a.nowSeconds.bind(a),c=s.nowSeconds.bind(s),l=c,d=function(){var e=Object(r.e)().performance;if(e&&e.now){var t=e.now(),n=Date.now(),o=e.timeOrigin?Math.abs(e.timeOrigin+t-n):36e5,a=o<36e5,i=e.timing&&e.timing.navigationStart,s="number"==typeof i?Math.abs(i+t-n):36e5;return a||s<36e5?o<=s?("timeOrigin",e.timeOrigin):("navigationStart",i):("dateNow",n)}"none"}()}).call(this,n(611)(e))},637:function(e,t,n){"use strict";var r=n(11),o=n(2857),a=n(167),i=n(636),s=n(88),u=n(320),c=n(1071),l=n(221),d=function(){function e(e){this.errors=0,this.sid=Object(a.j)(),this.duration=0,this.status=o.a.Ok,this.init=!0,this.ignoreDuration=!1;var t=Object(i.c)();this.timestamp=t,this.started=t,e&&this.update(e)}return e.prototype.update=function(e){if(void 0===e&&(e={}),e.user&&(!this.ipAddress&&e.user.ip_address&&(this.ipAddress=e.user.ip_address),this.did||e.did||(this.did=e.user.id||e.user.email||e.user.username)),this.timestamp=e.timestamp||Object(i.c)(),e.ignoreDuration&&(this.ignoreDuration=e.ignoreDuration),e.sid&&(this.sid=32===e.sid.length?e.sid:Object(a.j)()),void 0!==e.init&&(this.init=e.init),!this.did&&e.did&&(this.did=""+e.did),"number"==typeof e.started&&(this.started=e.started),this.ignoreDuration)this.duration=void 0;else if("number"==typeof e.duration)this.duration=e.duration;else{var t=this.timestamp-this.started;this.duration=t>=0?t:0}e.release&&(this.release=e.release),e.environment&&(this.environment=e.environment),!this.ipAddress&&e.ipAddress&&(this.ipAddress=e.ipAddress),!this.userAgent&&e.userAgent&&(this.userAgent=e.userAgent),"number"==typeof e.errors&&(this.errors=e.errors),e.status&&(this.status=e.status)},e.prototype.close=function(e){e?this.update({status:e}):this.status===o.a.Ok?this.update({status:o.a.Exited}):this.update()},e.prototype.toJSON=function(){return Object(l.a)({sid:""+this.sid,init:this.init,started:new Date(1e3*this.started).toISOString(),timestamp:new Date(1e3*this.timestamp).toISOString(),status:this.status,errors:this.errors,did:"number"==typeof this.did||"string"==typeof this.did?""+this.did:void 0,duration:this.duration,attrs:Object(l.a)({release:this.release,environment:this.environment,ip_address:this.ipAddress,user_agent:this.userAgent})})},e}();n.d(t,"a",(function(){return f})),n.d(t,"d",(function(){return p})),n.d(t,"e",(function(){return h})),n.d(t,"b",(function(){return v})),n.d(t,"c",(function(){return y}));var f=function(){function e(e,t,n){void 0===t&&(t=new c.a),void 0===n&&(n=4),this._version=n,this._stack=[{}],this.getStackTop().scope=t,e&&this.bindClient(e)}return e.prototype.isOlderThan=function(e){return this._version<e},e.prototype.bindClient=function(e){this.getStackTop().client=e,e&&e.setupIntegrations&&e.setupIntegrations()},e.prototype.pushScope=function(){var e=c.a.clone(this.getScope());return this.getStack().push({client:this.getClient(),scope:e}),e},e.prototype.popScope=function(){return!(this.getStack().length<=1)&&!!this.getStack().pop()},e.prototype.withScope=function(e){var t=this.pushScope();try{e(t)}finally{this.popScope()}},e.prototype.getClient=function(){return this.getStackTop().client},e.prototype.getScope=function(){return this.getStackTop().scope},e.prototype.getStack=function(){return this._stack},e.prototype.getStackTop=function(){return this._stack[this._stack.length-1]},e.prototype.captureException=function(e,t){var n=this._lastEventId=Object(a.j)(),o=t;if(!t){var i=void 0;try{throw new Error("Sentry syntheticException")}catch(e){i=e}o={originalException:e,syntheticException:i}}return this._invokeClient("captureException",e,Object(r.a)(Object(r.a)({},o),{event_id:n})),n},e.prototype.captureMessage=function(e,t,n){var o=this._lastEventId=Object(a.j)(),i=n;if(!n){var s=void 0;try{throw new Error(e)}catch(e){s=e}i={originalException:e,syntheticException:s}}return this._invokeClient("captureMessage",e,t,Object(r.a)(Object(r.a)({},i),{event_id:o})),o},e.prototype.captureEvent=function(e,t){var n=Object(a.j)();return"transaction"!==e.type&&(this._lastEventId=n),this._invokeClient("captureEvent",e,Object(r.a)(Object(r.a)({},t),{event_id:n})),n},e.prototype.lastEventId=function(){return this._lastEventId},e.prototype.addBreadcrumb=function(e,t){var n=this.getStackTop(),o=n.scope,s=n.client;if(o&&s){var u=s.getOptions&&s.getOptions()||{},c=u.beforeBreadcrumb,l=void 0===c?null:c,d=u.maxBreadcrumbs,f=void 0===d?100:d;if(!(f<=0)){var p=Object(i.b)(),h=Object(r.a)({timestamp:p},e),v=l?Object(a.c)((function(){return l(h,t)})):h;null!==v&&o.addBreadcrumb(v,f)}}},e.prototype.setUser=function(e){var t=this.getScope();t&&t.setUser(e)},e.prototype.setTags=function(e){var t=this.getScope();t&&t.setTags(e)},e.prototype.setExtras=function(e){var t=this.getScope();t&&t.setExtras(e)},e.prototype.setTag=function(e,t){var n=this.getScope();n&&n.setTag(e,t)},e.prototype.setExtra=function(e,t){var n=this.getScope();n&&n.setExtra(e,t)},e.prototype.setContext=function(e,t){var n=this.getScope();n&&n.setContext(e,t)},e.prototype.configureScope=function(e){var t=this.getStackTop(),n=t.scope,r=t.client;n&&r&&e(n)},e.prototype.run=function(e){var t=h(this);try{e(this)}finally{h(t)}},e.prototype.getIntegration=function(e){var t=this.getClient();if(!t)return null;try{return t.getIntegration(e)}catch(t){return s.a.warn("Cannot retrieve integration "+e.id+" from the current Hub"),null}},e.prototype.startSpan=function(e){return this._callExtensionMethod("startSpan",e)},e.prototype.startTransaction=function(e,t){return this._callExtensionMethod("startTransaction",e,t)},e.prototype.traceHeaders=function(){return this._callExtensionMethod("traceHeaders")},e.prototype.captureSession=function(e){if(void 0===e&&(e=!1),e)return this.endSession();this._sendSessionUpdate()},e.prototype.endSession=function(){var e,t,n,r,o;null===(n=null===(t=null===(e=this.getStackTop())||void 0===e?void 0:e.scope)||void 0===t?void 0:t.getSession())||void 0===n||n.close(),this._sendSessionUpdate(),null===(o=null===(r=this.getStackTop())||void 0===r?void 0:r.scope)||void 0===o||o.setSession()},e.prototype.startSession=function(e){var t=this.getStackTop(),n=t.scope,i=t.client,s=i&&i.getOptions()||{},u=s.release,c=s.environment,l=(Object(a.e)().navigator||{}).userAgent,f=new d(Object(r.a)(Object(r.a)(Object(r.a)({release:u,environment:c},n&&{user:n.getUser()}),l&&{userAgent:l}),e));if(n){var p=n.getSession&&n.getSession();p&&p.status===o.a.Ok&&p.update({status:o.a.Exited}),this.endSession(),n.setSession(f)}return f},e.prototype._sendSessionUpdate=function(){var e=this.getStackTop(),t=e.scope,n=e.client;if(t){var r=t.getSession&&t.getSession();r&&n&&n.captureSession&&n.captureSession(r)}},e.prototype._invokeClient=function(e){for(var t,n=[],o=1;o<arguments.length;o++)n[o-1]=arguments[o];var a=this.getStackTop(),i=a.scope,s=a.client;s&&s[e]&&(t=s)[e].apply(t,Object(r.e)(n,[i]))},e.prototype._callExtensionMethod=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=p(),o=r.__SENTRY__;if(o&&o.extensions&&"function"==typeof o.extensions[e])return o.extensions[e].apply(this,t);s.a.warn("Extension method "+e+" couldn't be found, doing nothing.")},e}();function p(){var e=Object(a.e)();return e.__SENTRY__=e.__SENTRY__||{extensions:{},hub:void 0},e}function h(e){var t=p(),n=y(t);return m(t,e),n}function v(){var e=p();return g(e)&&!y(e).isOlderThan(4)||m(e,new f),Object(u.b)()?function(e){var t,n,r;try{var o=null===(r=null===(n=null===(t=p().__SENTRY__)||void 0===t?void 0:t.extensions)||void 0===n?void 0:n.domain)||void 0===r?void 0:r.active;if(!o)return y(e);if(!g(o)||y(o).isOlderThan(4)){var a=y(e).getStackTop();m(o,new f(a.client,c.a.clone(a.scope)))}return y(o)}catch(t){return y(e)}}(e):y(e)}function g(e){return!!(e&&e.__SENTRY__&&e.__SENTRY__.hub)}function y(e){return e&&e.__SENTRY__&&e.__SENTRY__.hub?e.__SENTRY__.hub:(e.__SENTRY__=e.__SENTRY__||{},e.__SENTRY__.hub=new f,e.__SENTRY__.hub)}function m(e,t){return!!e&&(e.__SENTRY__=e.__SENTRY__||{},e.__SENTRY__.hub=t,!0)}},72:function(e,t,n){"use strict";n.d(t,"a",(function(){return o})),n.d(t,"d",(function(){return a})),n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return s})),n.d(t,"e",(function(){return u})),n.d(t,"f",(function(){return c}));var r=n(637),o=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function a(e){var t;return void 0===e&&(e=null===(t=Object(r.b)().getClient())||void 0===t?void 0:t.getOptions()),!!e&&("tracesSampleRate"in e||"tracesSampler"in e)}function i(e){var t=e.match(o);if(t){var n=void 0;return"1"===t[3]?n=!0:"0"===t[3]&&(n=!1),{traceId:t[1],parentSampled:n,parentSpanId:t[2]}}}function s(e){var t,n;return void 0===e&&(e=Object(r.b)()),null===(n=null===(t=e)||void 0===t?void 0:t.getScope())||void 0===n?void 0:n.getTransaction()}function u(e){return e/1e3}function c(e){return 1e3*e}},88:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n(167),o=Object(r.e)(),a="Sentry Logger ",i=function(){function e(){this._enabled=!1}return e.prototype.disable=function(){this._enabled=!1},e.prototype.enable=function(){this._enabled=!0},e.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._enabled&&Object(r.c)((function(){o.console.log(a+"[Log]: "+e.join(" "))}))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._enabled&&Object(r.c)((function(){o.console.warn(a+"[Warn]: "+e.join(" "))}))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._enabled&&Object(r.c)((function(){o.console.error(a+"[Error]: "+e.join(" "))}))},e}();o.__SENTRY__=o.__SENTRY__||{};var s=o.__SENTRY__.logger||(o.__SENTRY__.logger=new i)},967:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.logger=void 0,t.logger={info:function(e,t){}}}});